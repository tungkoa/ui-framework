{"version":3,"file":"index.module.js","sources":["../src/core.ts","../src/version.ts","../src/helpers.ts","../src/state.ts","../src/component.ts","../src/components/helmet.ts","../src/components/img.ts","../src/fragment.ts","../src/components/link.ts","../src/components/router.ts","../src/components/suspense.ts","../src/components/visible.ts","../src/regexDom.ts","../src/ssr.ts","../src/htm/build.ts","../src/htm/index.ts","../src/jsx.ts","../src/lazy.ts","../src/store.ts","../src/context.ts","../src/withStyles.ts","../src/customElementsMode.ts","../src/index.ts"],"sourcesContent":["import \"./types.js\";\n\nexport const isSSR = () => typeof _nano !== \"undefined\" && _nano.isSSR === true;\n\nexport interface FC<P = {}> {\n  (props: P): Element | void;\n  // (props: P, context?: any): any\n}\n\n/** Creates a new Microtask using Promise() */\nexport const tick = Promise.prototype.then.bind(Promise.resolve()) as (\n  cb: Function,\n) => any;\n\nexport const removeAllChildNodes = (parent: HTMLElement) => {\n  while (parent.firstChild) {\n    parent.removeChild(parent.firstChild);\n  }\n};\n\n// https://stackoverflow.com/a/7616484/12656855\nexport const strToHash = (s: string) => {\n  let hash = 0;\n\n  for (let i = 0; i < s.length; i++) {\n    const chr = s.charCodeAt(i);\n    hash = (hash << 5) - hash + chr;\n    hash |= 0; // Convert to 32bit integer\n  }\n  return Math.abs(hash).toString(32);\n};\n\nexport const appendChildren = (\n  element: HTMLElement | SVGElement,\n  children: HTMLElement[],\n  escape = true,\n) => {\n  // if the child is an html element\n  if (!Array.isArray(children)) {\n    appendChildren(element, [children], escape);\n    return;\n  }\n\n  // htmlCollection to array\n  if (typeof children === \"object\")\n    children = Array.prototype.slice.call(children);\n\n  children.forEach((child) => {\n    // if child is an array of children, append them instead\n    if (Array.isArray(child)) appendChildren(element, child, escape);\n    else {\n      // render the component\n      const c = _render(child) as HTMLElement;\n\n      if (typeof c !== \"undefined\") {\n        // if c is an array of children, append them instead\n        if (Array.isArray(c)) appendChildren(element, c, escape);\n        // apply the component to parent element\n        else {\n          element.appendChild(\n            c.nodeType == null ? document.createTextNode(c.toString()) : c,\n          );\n        }\n      }\n    }\n  });\n};\n\n/**\n * A simple component for rendering SVGs\n */\nconst SVG = (props: any) => {\n  const child = props.children[0] as SVGElement;\n  const attrs = child.attributes;\n\n  if (isSSR()) return child;\n\n  const svg = hNS(\"svg\") as SVGElement;\n  for (let i = attrs.length - 1; i >= 0; i--) {\n    svg.setAttribute(attrs[i].name, attrs[i].value);\n  }\n  svg.innerHTML = child.innerHTML;\n\n  return svg as any;\n};\n\n/** Returns the populated parent if available else  one child or an array of children */\nexport const render = (\n  component: any,\n  parent: HTMLElement | null = null,\n  removeChildNodes = true,\n) => {\n  console.log(\"component\", component);\n  let el = _render(component);\n  console.log(\"el\", el);\n  if (Array.isArray(el)) {\n    el = el.map((e) => _render(e));\n    if (el.length === 1) el = el[0];\n  }\n\n  if (parent) {\n    if (removeChildNodes) removeAllChildNodes(parent);\n\n    // if parent and child are the same, we replace the parent instead of appending to it\n    if (el && parent.id && parent.id === el.id && parent.parentElement) {\n      parent.parentElement.replaceChild(el, parent);\n    } else {\n      // append element(s) to the parent\n      if (Array.isArray(el))\n        el.forEach((e: any) => {\n          appendChildren(parent, _render(e));\n          //parent.appendChild(_render(e))\n        });\n      else appendChildren(parent, _render(el));\n    }\n    return parent;\n  }\n  // returning one child or an array of children\n  else {\n    if (isSSR() && !Array.isArray(el)) return [el];\n    return el;\n  }\n};\n\nexport const hydrate = render;\n\nexport const _render = (comp: any): any => {\n  console.log(\"comp\", comp);\n  // null, false, undefined\n  if (comp === null || comp === false || typeof comp === \"undefined\") return [];\n\n  // string, number\n  if (typeof comp === \"string\" || typeof comp === \"number\")\n    return comp.toString();\n\n  // SVGElement\n  if (comp.tagName && comp.tagName.toLowerCase() === \"svg\")\n    return SVG({ children: [comp] });\n\n  // HTMLElement\n  if (comp.tagName) return comp;\n\n  // TEXTNode (Node.TEXT_NODE === 3)\n  if (comp && comp.nodeType === 3) return comp;\n\n  // Class Component\n  if (comp && comp.component && comp.component.isClass)\n    return renderClassComponent(comp);\n\n  // Class Component (Uninitialized)\n  if (comp.isClass) return renderClassComponent({ component: comp, props: {} });\n\n  // Functional Component\n  if (comp.component && typeof comp.component === \"function\")\n    return renderFunctionalComponent(comp);\n\n  // Array (render each child and return the array) (is probably a fragment)\n  if (Array.isArray(comp)) return (comp.map((c) => _render(c)) as any).flat();\n\n  // function\n  if (typeof comp === \"function\" && !comp.isClass) return _render(comp());\n\n  // if component is a HTMLElement (rare case)\n  if (\n    comp.component &&\n    comp.component.tagName &&\n    typeof comp.component.tagName === \"string\"\n  )\n    return _render(comp.component);\n\n  // (rare case)\n  if (Array.isArray(comp.component)) return _render(comp.component);\n\n  // (rare case)\n  if (comp.component) return _render(comp.component);\n\n  // object\n  if (typeof comp === \"object\") return [];\n\n  console.warn(\"Something unexpected happened with:\", comp);\n};\n\nconst renderFunctionalComponent = (fncComp: any): any => {\n  const { component, props } = fncComp;\n  console.log(\"func\", component(props));\n  return _render(component(props));\n};\n\nconst renderClassComponent = (classComp: any): any => {\n  const { component, props } = classComp;\n\n  // calc hash\n  const hash = strToHash(component.toString());\n\n  // make hash accessible in constructor, without passing it to it\n  component.prototype._getHash = () => hash;\n\n  const Component = new component(props);\n  if (!isSSR()) Component.willMount();\n\n  let el = Component.render();\n  el = _render(el);\n  Component.elements = el;\n\n  // pass the component instance as ref\n  if (props && props.ref) props.ref(Component);\n\n  if (!isSSR())\n    tick(() => {\n      Component._didMount();\n    });\n\n  return el;\n};\n\nconst hNS = (tag: string) =>\n  document.createElementNS(\"http://www.w3.org/2000/svg\", tag) as SVGElement;\n\n// https://stackoverflow.com/a/42405694/12656855\nexport const h = (\n  tagNameOrComponent: any,\n  props: any = {},\n  ...children: any[]\n) => {\n  console.log(\"tagNameOrComponent\", tagNameOrComponent);\n  // if children is passed as props, merge with ...children\n  if (props && props.children) {\n    if (Array.isArray(children)) {\n      if (Array.isArray(props.children))\n        children = [...props.children, ...children];\n      else children.push(props.children);\n    } else {\n      if (Array.isArray(props.children)) children = props.children;\n      else children = [props.children];\n    }\n  }\n\n  // if tagNameOrComponent is a component\n  if (typeof tagNameOrComponent !== \"string\")\n    return {\n      component: tagNameOrComponent,\n      props: { ...props, children: children },\n    };\n\n  let ref;\n\n  const element = document.createElement(tagNameOrComponent) as HTMLElement;\n\n  // check if the element includes the event (for example 'oninput')\n  const isEvent = (el: HTMLElement | any, p: string) => {\n    // check if the event begins with 'on'\n    if (0 !== p.indexOf(\"on\")) return false;\n\n    // we return true if SSR, since otherwise it will get rendered\n    if (el._ssr) return true;\n\n    // check if the event is present in the element as object (null) or as function\n    return typeof el[p] === \"object\" || typeof el[p] === \"function\";\n  };\n\n  for (const p in props) {\n    // https://stackoverflow.com/a/45205645/12656855\n    // style object to style string\n    if (p === \"style\" && typeof props[p] === \"object\") {\n      const styles = Object.keys(props[p])\n        .map((k) => `${k}:${props[p][k]}`)\n        .join(\";\")\n        .replace(/[A-Z]/g, (match) => `-${match.toLowerCase()}`);\n      props[p] = `${styles};`;\n    }\n\n    // handel ref\n    if (p === \"ref\") ref = props[p];\n    // handle events\n    else if (isEvent(element, p.toLowerCase()))\n      element.addEventListener(p.toLowerCase().substring(2), (e: any) =>\n        props[p](e),\n      );\n    // dangerouslySetInnerHTML\n    else if (p === \"dangerouslySetInnerHTML\" && props[p].__html) {\n      if (!isSSR()) {\n        const fragment = document.createElement(\"fragment\");\n        fragment.innerHTML = props[p].__html;\n        element.appendChild(fragment);\n      } else {\n        element.innerHTML = props[p].__html;\n      }\n    }\n    // modern dangerouslySetInnerHTML\n    else if (p === \"innerHTML\" && props[p].__dangerousHtml) {\n      if (!isSSR()) {\n        const fragment = document.createElement(\"fragment\");\n        fragment.innerHTML = props[p].__dangerousHtml;\n        element.appendChild(fragment);\n      } else {\n        element.innerHTML = props[p].__dangerousHtml;\n      }\n    }\n    // className\n    else if (/^className$/i.test(p)) element.setAttribute(\"class\", props[p]);\n    // setAttribute\n    else if (typeof props[p] !== \"undefined\") element.setAttribute(p, props[p]);\n  }\n\n  // these tags should not be escaped by default (in ssr)\n  const escape = !([\"noscript\", \"script\", \"style\"] as any).includes(\n    tagNameOrComponent,\n  );\n  appendChildren(element, children, escape);\n\n  if (ref) ref(element);\n  return element as any;\n};\n","// THIS IS AN AUTOGENERATED FILE. DO NOT EDIT THIS FILE DIRECTLY.\nexport const VERSION = '0.1.0'\n","import { VERSION } from './version.js'\n\n/** Creates a new Task using setTimeout() */\nexport const task = (task: () => void) => setTimeout(task, 0)\n\nexport const nodeToString = (node: Node) => {\n  const tmpNode = document.createElement('div')\n  tmpNode.appendChild(node.cloneNode(true))\n  return tmpNode.innerHTML\n}\n\nexport const detectSSR = (): boolean => {\n  // @ts-ignore\n  const isDeno = typeof Deno !== 'undefined'\n  const hasWindow = typeof window !== 'undefined' ? true : false\n  return (typeof _nano !== 'undefined' && _nano.isSSR) || isDeno || !hasWindow\n}\n\nfunction isDescendant(desc: ParentNode | null, root: Node): boolean {\n  // @ts-ignore\n  return !!desc && (desc === root || isDescendant(desc.parentNode, root))\n}\n\n// https://developer.mozilla.org/en-US/docs/Web/API/MutationObserver\nexport const onNodeRemove = (element: HTMLElement, callback: () => void) => {\n  let observer = new MutationObserver(mutationsList => {\n    mutationsList.forEach(mutation => {\n      mutation.removedNodes.forEach(removed => {\n        if (isDescendant(element, removed)) {\n          callback()\n          if (observer) {\n            // allow garbage collection\n            observer.disconnect()\n            // @ts-ignore\n            observer = undefined\n          }\n        }\n      })\n    })\n  })\n  observer.observe(document, {\n    childList: true,\n    subtree: true\n  })\n  return observer\n}\n\n// https://stackoverflow.com/a/6234804\nexport const escapeHtml = (unsafe: string) => {\n  if (unsafe && typeof unsafe === 'string')\n    return unsafe\n      .replace(/&/g, '&amp;')\n      .replace(/</g, '&lt;')\n      .replace(/>/g, '&gt;')\n      .replace(/\"/g, '&quot;')\n      .replace(/'/g, '&apos;')\n  return unsafe\n}\n\nexport const printVersion = () => {\n  const info = `Powered by nano JSX v${VERSION}`\n  console.log(\n    `%c %c %c %c %c ${info} %c http://nanojsx.io`,\n    'background: #ff0000',\n    'background: #ffff00',\n    'background: #00ff00',\n    'background: #00ffff',\n    'color: #fff; background: #000000;',\n    'background: none'\n  )\n}\n","/** Holds the state of the whole application. */\nexport const _state: Map<string, any> = new Map()\n\n/** Clears the state of the whole application. */\nexport const _clearState = () => {\n  _state.clear()\n}\n","import { onNodeRemove } from './helpers.js'\nimport { tick, _render } from './core.js'\nimport { _state } from './state.js'\n\nexport class Component<P extends Object = any, S = any> {\n  public props: P\n  public id: string\n  private _elements: HTMLElement[] = []\n  private _skipUnmount = false\n  private _hasUnmounted = false\n\n  constructor(props: P) {\n    this.props = props || {}\n    this.id = this._getHash()\n  }\n\n  public static get isClass() {\n    return true\n  }\n\n  public get isClass() {\n    return true\n  }\n\n  setState(state: S, shouldUpdate: boolean = false) {\n    const isObject = typeof state === 'object' && state !== null\n\n    // if state is an object, we merge the objects\n    if (isObject && this.state !== undefined) this.state = { ...this.state, ...state }\n    // else, we just overwrite it\n    else this.state = state\n\n    if (shouldUpdate) this.update()\n  }\n\n  set state(state: S) {\n    _state.set(this.id, state)\n  }\n\n  get state() {\n    return _state.get(this.id) as S\n  }\n\n  set initState(state: S) {\n    if (this.state === undefined) this.state = state\n  }\n\n  /** Returns all currently rendered node elements */\n  public get elements(): HTMLElement[] {\n    return this._elements || []\n  }\n\n  public set elements(elements: HTMLElement[]) {\n    if (!Array.isArray(elements)) elements = [elements]\n\n    elements.forEach(element => {\n      this._elements.push(element)\n    })\n  }\n\n  private _addNodeRemoveListener() {\n    // check if didUnmount is unused\n    if (/^[^{]+{\\s+}$/gm.test(this.didUnmount.toString())) return\n\n    // listen if the root elements gets removed\n    onNodeRemove(this.elements[0], () => {\n      if (!this._skipUnmount) this._didUnmount()\n    })\n  }\n\n  // @ts-ignore\n  private _didMount(): any {\n    this._addNodeRemoveListener()\n    this.didMount()\n  }\n\n  private _willUpdate(): any {\n    this.willUpdate()\n  }\n\n  private _didUpdate(): any {\n    this.didUpdate()\n  }\n\n  private _didUnmount(): any {\n    if (this._hasUnmounted) return\n    this.didUnmount()\n    this._hasUnmounted = true\n  }\n\n  public willMount(): any {}\n  public didMount(): any {}\n  public willUpdate(): any {}\n  public didUpdate(): any {}\n  public didUnmount(): any {}\n\n  public render(_update?: any): HTMLElement | void {}\n\n  /** Will forceRender the component */\n  public update(update?: any) {\n    this._skipUnmount = true\n    this._willUpdate()\n    // get all current rendered node elements\n    const oldElements = [...this.elements]\n\n    // clear\n    this._elements = []\n\n    let el = this.render(update)\n    el = _render(el)\n    this.elements = el as any\n\n    // console.log('old: ', oldElements)\n    // console.log('new: ', this.elements)\n\n    // get valid parent node\n    const parent = oldElements[0].parentElement as HTMLElement\n\n    // make sure we have a parent\n    if (!parent) console.warn('Component needs a parent element to get updated!')\n\n    // add all new node elements\n    this.elements.forEach((child: HTMLElement) => {\n      if (parent) parent.insertBefore(child, oldElements[0])\n    })\n\n    // remove all elements\n    oldElements.forEach((child: HTMLElement) => {\n      // wee keep the element if it is the same, for example if passed as a child\n      if (!this.elements.includes(child)) {\n        child.remove()\n        // @ts-ignore\n        child = null\n      }\n    })\n\n    // listen for node removal\n    this._addNodeRemoveListener()\n\n    // @ts-ignore\n    tick(() => {\n      this._skipUnmount = false\n      if (!this.elements[0].isConnected) this._didUnmount()\n      else this._didUpdate()\n    })\n  }\n\n  private _getHash(): any {}\n}\n","import { Component } from '../component.js'\nimport { appendChildren, h, isSSR } from '../core.js'\n\nclass Attributes extends Map {\n  toString() {\n    let string = ''\n    for (const [key, value] of this) string += ` ${key}=\"${value}\"`\n    return string.trim()\n  }\n}\n\nexport class Helmet extends Component {\n  static SSR(body: string) {\n    const reg = /(<helmet\\b[^>]*>)((.|\\r|\\n)*?)(<\\/helmet>)/gm\n\n    // collect all elements\n    const head: HTMLElement[] = []\n    const footer: HTMLElement[] = []\n    const attributes = {\n      html: new Attributes(),\n      body: new Attributes()\n    }\n\n    // get what's in the head\n    if (typeof document !== 'undefined' && document.head) {\n      let children: HTMLElement[] = []\n      children = [].slice.call(document.head.children)\n      for (let i = 0; i < children.length; i++) {\n        // check if the same element already exists\n        if (head.indexOf(children[i]) === -1) {\n          head.push(children[i])\n        }\n      }\n    }\n\n    let result!: any\n    while ((result = reg.exec(body)) !== null) {\n      const first = result[1]\n      let second = result[2]\n\n      const regHTML = /<html\\s([^>]+)><\\/html>/gm\n      const regBody = /<body\\s([^>]+)><\\/body>/gm\n      const regAttr = /(\\w+)=\"([^\"]+)\"/gm\n      let res = null\n\n      // extract html attributes\n      body.match(regHTML)?.forEach(h => {\n        second = second.replace(h, '')\n        while ((res = regAttr.exec(h)) !== null) {\n          attributes.html.set(res[1], res[2])\n        }\n      })\n      // extract body attributes\n      body.match(regBody)?.forEach(b => {\n        second = second.replace(b, '')\n        while ((res = regAttr.exec(b)) !== null) {\n          attributes.body.set(res[1], res[2])\n        }\n      })\n\n      const toHead = first.includes('data-placement=\"head\"')\n\n      // do not add an element if it already exists\n      if (toHead && !head.includes(second)) head.push(second)\n      else if (!toHead && !footer.includes(second)) footer.push(second)\n    }\n\n    // clean the body from all matches\n    const cleanBody = body.replace(reg, '')\n    return {\n      body: cleanBody,\n      head: head as unknown as string[],\n      footer: footer as unknown as string[],\n      attributes\n    }\n  }\n\n  didMount() {\n    this.props.children.forEach((element: HTMLElement) => {\n      // return if it is not an html element\n      if (!(element instanceof HTMLElement)) return\n\n      const parent = this.props.footer ? document.body : document.head\n      const tag = element.tagName\n      let attrs: string[] = []\n\n      // get the inner text\n      attrs.push(element.innerText as string)\n\n      // get all attributes\n      for (let attr = 0; attr < element.attributes.length; attr++) {\n        attrs.push(element.attributes.item(attr)?.name.toLowerCase() as string)\n        attrs.push(element.attributes.item(attr)?.value.toLowerCase() as string)\n      }\n\n      // handle special tags\n      if (tag === 'HTML' || tag === 'BODY') {\n        const htmlTag = document.getElementsByTagName(tag)[0]\n        for (let attr = 1; attr < attrs.length; attr += 2) {\n          htmlTag.setAttribute(attrs[attr], attrs[attr + 1])\n        }\n        return\n      } else if (tag === 'TITLE') {\n        const titleTags = document.getElementsByTagName('TITLE') as HTMLCollectionOf<HTMLTitleElement>\n        if (titleTags.length > 0) {\n          const e = element as HTMLTitleElement\n          titleTags[0].text = e.text\n        } else {\n          const titleTag = h('title', null, element.innerHTML) as HTMLTitleElement\n          appendChildren(parent, [titleTag], false)\n        }\n        return\n      }\n\n      // check if the element already exists\n      let exists = false\n      attrs = attrs.sort()\n\n      const el = document.getElementsByTagName(tag) as unknown as HTMLElement[]\n\n      for (let i = 0; i < el.length; i++) {\n        let attrs2: string[] = []\n\n        // get the inner text\n        attrs2.push(el[i].innerText as string)\n\n        for (let attr = 0; attr < el[i].attributes.length; attr++) {\n          attrs2.push(el[i].attributes.item(attr)?.name.toLowerCase() as string)\n          attrs2.push(el[i].attributes.item(attr)?.value.toLowerCase() as string)\n        }\n        attrs2 = attrs2.sort()\n\n        if (attrs.length > 0 && attrs2.length > 0 && JSON.stringify(attrs) === JSON.stringify(attrs2)) exists = true\n      }\n\n      // add to dom\n      if (!exists) appendChildren(parent, [element], false)\n    })\n  }\n\n  render() {\n    const placement = this.props.footer ? 'footer' : 'head'\n\n    if (isSSR()) return h('helmet', { 'data-ssr': true, 'data-placement': placement }, this.props.children)\n    else return []\n  }\n}\n","import { Component } from '../component.js'\nimport { h, strToHash } from '../core.js'\n\ninterface Props {\n  [key: string]: any\n  src: string\n  height?: number | string\n  width?: number | string\n  lazy?: boolean\n  placeholder?: any\n}\n\n/**\n * A useful Image component\n * Add <Img lazy ..., to lazy load the img source\n * Add <Img width=\"100\" height=\"100\" ..., to specify img element's size.\n * Add <Img placeholder=\"src or element\" ...., to prepare placeholder for img.\n */\nexport class Img extends Component<Props> {\n  constructor(props: Props) {\n    super(props)\n\n    const { src, key } = props\n\n    // id has to be unique\n    this.id = `${strToHash(src)}-${strToHash(JSON.stringify(props))}`\n    if (key) this.id += `key-${key}`\n\n    // this could also be done in willMount()\n    if (!this.state) this.setState({ isLoaded: false, image: undefined })\n  }\n\n  didMount() {\n    const { lazy = true, placeholder, children, key, ref, ...rest } = this.props\n\n    if (typeof lazy === 'boolean' && lazy === false) return\n\n    const observer = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            observer.disconnect()\n            this.state.image = h('img', { ...rest }) as HTMLImageElement\n            if (this.state.image.complete) {\n              this.state.isLoaded = true\n              this.update()\n            } else {\n              this.state.image.onload = () => {\n                this.state.isLoaded = true\n                this.update()\n              }\n            }\n          }\n        })\n      },\n      { threshold: [0, 1] }\n    )\n    observer.observe(this.elements[0])\n  }\n  render() {\n    const { src, placeholder, children, lazy = true, key, ref, ...rest } = this.props\n\n    // return the img tag if not lazy loaded\n    if (typeof lazy === 'boolean' && lazy === false) {\n      this.state.image = h('img', { src, ...rest }) as HTMLImageElement\n      return this.state.image\n    }\n\n    // if it is visible and loaded, show the image\n    if (this.state.isLoaded) {\n      return this.state.image\n      // if the placeholder is an image src\n    } else if (placeholder && typeof placeholder === 'string') {\n      return h('img', { src: placeholder, ...rest })\n      // if the placeholder is an JSX element\n    } else if (placeholder && typeof placeholder === 'function') {\n      return placeholder()\n    } else {\n      // render a simple box\n      const style: Record<string, any> = {}\n      if (rest.width) style.width = `${rest.width}px`\n      if (rest.height) style.height = `${rest.height}px`\n      const { width, height, ...others } = rest\n      return h('div', { style, ...others })\n    }\n  }\n}\n","export const Fragment = (props: any) => {\n  return props.children\n}\n","import { Component } from '../component.js'\nimport { Helmet } from './helmet.js'\nimport { h } from '../core.js'\nimport { Fragment } from '../fragment.js'\n\ninterface Props {\n  [key: string]: any\n  prefetch?: boolean | 'hover' | 'visible'\n  href: string\n  back?: boolean\n  delay?: number\n}\n\n/**\n * A simple Link component\n * Add <Link prefetch ..., to prefetch the html document\n * Add <Link prefetch=\"hover\" ..., to prefetch the html document on hovering over the link element.\n */\nexport class Link extends Component<Props> {\n  prefetchOnHover() {\n    this.elements[0].addEventListener('mouseover', () => this.addPrefetch(), { once: true })\n  }\n\n  prefetchOnVisible() {\n    const observer = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            observer.disconnect()\n            this.addPrefetch()\n          }\n        })\n      },\n      { threshold: [0, 1] }\n    )\n    observer.observe(this.elements[0])\n  }\n\n  addPrefetch() {\n    let doesAlreadyExist = false\n\n    // check if it is already on the dom\n    const links = document.getElementsByTagName('link')\n    for (let i = 0; i < links.length; i++) {\n      // if it is not already on the dom, add it\n      if (links[i].getAttribute('rel') === 'prefetch' && links[i].getAttribute('href') === this.props.href) {\n        doesAlreadyExist = true\n      }\n    }\n\n    if (!doesAlreadyExist) {\n      const prefetch = h('link', { rel: 'prefetch', href: this.props.href, as: 'document' }) as HTMLElement\n      document.head.appendChild(prefetch)\n    }\n  }\n\n  didMount() {\n    const { href, prefetch, delay = 0, back = false } = this.props\n\n    if (back)\n      this.elements[0].addEventListener('click', (e: Event) => {\n        e.preventDefault()\n        const target = e.target as HTMLLinkElement\n        if (target.href === document.referrer) window.history.back()\n        else window.location.href = target.href\n      })\n\n    if (delay > 0)\n      this.elements[0].addEventListener('click', (e: Event) => {\n        e.preventDefault()\n        setTimeout(() => (window.location.href = href), delay)\n      })\n\n    if (prefetch) {\n      if (prefetch === 'hover') this.prefetchOnHover()\n      else if (prefetch === 'visible') this.prefetchOnVisible()\n      else this.addPrefetch()\n    }\n  }\n\n  render() {\n    // separate children and prefetch from props\n    const { children, prefetch, back, ref, ...rest } = this.props\n\n    // some warning messages\n    if (!this.props.href) console.warn('Please add \"href\" to <Link>')\n    if (children.length !== 1) console.warn('Please add ONE child to <Link> (<Link>child</Link>)')\n\n    const a = h('a', { ...rest }, ...children) as HTMLAnchorElement\n\n    // if ssr\n    if (prefetch === true && !(typeof window !== 'undefined' && window.document)) {\n      // <link rel=\"prefetch\" href=\"/index.html\" as=\"document\"></link>\n      const link = h('link', { rel: 'prefetch', href: this.props.href, as: 'document' })\n      const helmet = h(Helmet, null, link)\n\n      return h(Fragment, null, [helmet, a])\n    }\n    // if not ssr\n    else {\n      return a\n    }\n  }\n}\n","// inspired by https://codesandbox.io/s/build-own-react-router-v4-mpslz\n\nimport { Component } from '../component.js'\nimport { FC, _render, h, isSSR } from '../core.js'\n\nconst instances: Switch[] = []\n\nconst register = (comp: Switch) => instances.push(comp)\nconst unregister = (comp: Switch) => instances.splice(instances.indexOf(comp), 1)\n\nconst historyPush = (path: string) => {\n  window.history.pushState({}, '', path)\n  instances.forEach(instance => instance.handleChanges())\n  window.dispatchEvent(new Event('pushstate'))\n}\n\nconst historyReplace = (path: string) => {\n  window.history.replaceState({}, '', path)\n  instances.forEach(instance => instance.handleChanges())\n  window.dispatchEvent(new Event('replacestate'))\n}\n\nexport interface MatchPathOptions {\n  exact?: boolean\n  path: string\n  regex?: { [param: string]: RegExp }\n}\nexport type MatchPathResult = {\n  path: string | null\n  url: string\n  isExact: boolean\n  params: { [param: string]: string }\n} | null\n\nexport const matchPath = (pathname: string, options: MatchPathOptions): MatchPathResult => {\n  const { exact = false, regex } = options\n  let { path } = options\n\n  if (!path) {\n    return {\n      path: null,\n      url: pathname,\n      isExact: true,\n      params: {}\n    }\n  }\n\n  let match\n  let params: any = {}\n\n  // path with params\n  if (path.includes('/:')) {\n    const pathArr = path.split('/')\n    const pathnameArr = pathname.split('/')\n    pathArr.forEach((p, i) => {\n      if (/^:/.test(p)) {\n        const key = p.slice(1)\n        const value = pathnameArr[i]\n\n        // if a regex is provided, check it it matches\n        if (regex && regex[key]) {\n          const regexMatch = regex[key].test(value)\n          if (!regexMatch) return null\n        }\n\n        params = { ...params, [key]: value }\n\n        pathArr[i] = pathnameArr[i]\n      }\n    })\n    path = pathArr.join('/')\n  }\n\n  // catch all\n  if (path === '*') match = [pathname]\n\n  // regular path\n  if (!match) match = new RegExp(`^${path}`).exec(pathname)\n\n  if (!match) return null\n\n  const url = match[0]\n  const isExact = pathname === url\n\n  if (exact && !isExact) return null\n\n  return {\n    path,\n    url,\n    isExact,\n    params\n  }\n}\n\nexport class Switch extends Component<{ fallback?: any; children?: any }> {\n  index: number = 0\n  path: string = ''\n  match = { index: -1, path: '' }\n\n  didMount() {\n    window.addEventListener('popstate', this.handleChanges.bind(this))\n    register(this)\n  }\n\n  didUnmount() {\n    window.removeEventListener('popstate', this.handleChanges.bind(this))\n    unregister(this)\n  }\n\n  handleChanges() {\n    this.findChild()\n    if (this.shouldUpdate()) this.update()\n  }\n\n  findChild() {\n    this.match = { index: -1, path: '' }\n\n    // flatten children\n    this.props.children = this.props.children.flat()\n\n    for (let i = 0; i < this.props.children.length; i++) {\n      const child = this.props.children[i]\n      const { path, exact, regex } = child.props\n      const match = matchPath(isSSR() ? _nano.location.pathname : window.location.pathname, {\n        path,\n        exact,\n        regex\n      })\n      if (match) {\n        this.match.index = i\n        this.match.path = path\n        return\n      }\n    }\n  }\n\n  shouldUpdate() {\n    return this.path !== this.match.path || this.index !== this.match.index\n  }\n\n  render() {\n    this.findChild()\n\n    const child = this.props.children[this.match.index]\n\n    if (this.match.index === -1) {\n      this.path = ''\n      this.index = 0\n    }\n\n    if (child) {\n      const { path } = child.props\n      this.path = path\n      this.index = this.match.index\n      const el = _render(child)\n      return h('div', {}, _render(el))\n    } else if (this.props.fallback) {\n      return h('div', {}, _render(this.props.fallback))\n    } else {\n      return h('div', {}, 'not found')\n    }\n  }\n}\n\n// alias for <Switch />\nexport class Routes extends Switch {}\n\nexport interface RouteProps {\n  path: string\n  regex: { [param: string]: RegExp }\n  pathname: string\n  params: { [param: string]: string }\n}\n\nexport const Route: FC<{ path: string; exact?: boolean; regex?: { [param: string]: RegExp }; children?: any }> = ({\n  path,\n  regex,\n  children\n}) => {\n  // lookup pathname and parameters\n  const pathname = isSSR() ? _nano.location.pathname : window.location.pathname\n  const params = parseParamsFromPath(path)\n  // pass the route as props to the children\n  children.forEach((child: any) => {\n    if (child.props) child.props = { ...child.props, route: { path, regex, pathname, params } }\n  })\n  return children\n}\n\nexport const to = (to: string, replace: boolean = false) => {\n  replace ? historyReplace(to) : historyPush(to)\n}\n\ninterface LinkProps {\n  to: string\n  replace?: boolean\n  children?: any\n  [key: string]: any\n}\nexport const Link: FC<LinkProps> = ({ to, replace, children, ...rest }) => {\n  const handleClick = (event: Event) => {\n    event.preventDefault()\n    replace ? historyReplace(to) : historyPush(to)\n  }\n\n  return h('a', { href: to, onClick: (e: Event) => handleClick(e), ...rest }, children)\n}\n\nclass CListener {\n  private _route!: string\n  private _listeners: Map<string, Function> = new Map()\n\n  constructor() {\n    if (isSSR()) return\n\n    this._route = window.location.pathname\n\n    const event = () => {\n      const newRoute = window.location.pathname\n      this._listeners.forEach(fnc => {\n        fnc(newRoute, this._route)\n      })\n      this._route = newRoute\n    }\n\n    window.addEventListener('pushstate', event)\n    window.addEventListener('replacestate', event)\n  }\n\n  public use() {\n    const id = Math.random().toString(36).substring(2)\n    return {\n      subscribe: (fnc: (currPath: string, prevPath: string) => void) => {\n        this._listeners.set(id, fnc)\n      },\n      cancel: () => {\n        if (this._listeners.has(id)) this._listeners.delete(id)\n      }\n    }\n  }\n}\n\nlet listener: CListener | undefined\nexport const Listener = () => {\n  if (!listener) listener = new CListener()\n  return listener\n}\n\n/** Pass \"this.props.route.path\" to it. */\nexport const parseParamsFromPath = (path: string): { [param: string]: string } => {\n  let params = {}\n  const _pathname = isSSR() ? _nano.location.pathname.split('/') : window.location.pathname.split('/')\n  path.split('/').forEach((p, i) => {\n    if (p.startsWith(':')) params = { ...params, [p.slice(1)]: _pathname[i] }\n  })\n  return params\n}\n","import { Component } from '../component.js'\nimport { isSSR, strToHash } from '../core.js'\n\ninterface Props {\n  fallback: any\n  cache?: boolean\n  [key: string]: any\n}\n\nexport class Suspense extends Component<Props> {\n  ready = false\n\n  constructor(props: Props) {\n    super(props)\n\n    // get props promises in ...rest\n    const { children, fallback, cache = false, ...rest } = this.props\n\n    // stringify ...rest\n    const str = JSON.stringify(rest, function (_key, val) {\n      if (typeof val === 'function') return `${val}` // implicitly `toString` it\n      return val\n    })\n\n    // create unique id based on ...rest\n    this.id = strToHash(JSON.stringify(str))\n  }\n\n  async didMount() {\n    // get props promises in ...rest\n    const { children, fallback, cache = false, ...rest } = this.props\n\n    // set initial state to []\n    if (cache) this.initState = {}\n\n    // check if we already cached the results in this.state\n    if (this.loadFromCache(cache)) return\n\n    // resolve the promises\n    const promises = Object.values(rest).map(p => p())\n    const resolved = await Promise.all(promises)\n\n    // prepare data\n    const data = this.prepareData(rest, resolved, cache)\n\n    // add data to children\n    this.addDataToChildren(data)\n\n    // update the component\n    this.ready = true\n    this.update()\n  }\n\n  ssr() {\n    // get props promises in ...rest\n    const { children, fallback, cache = false, ...rest } = this.props\n\n    // execute the functions\n    const functions = Object.values(rest).map(p => p())\n\n    // prepare data\n    const data = this.prepareData(rest, functions, false)\n\n    // add data to children\n    this.addDataToChildren(data)\n  }\n\n  loadFromCache(cache: boolean) {\n    const hasCachedProps = this.state && cache && Object.keys(this.state).length > 0\n\n    if (hasCachedProps) {\n      this.addDataToChildren(this.state)\n      this.ready = true\n    }\n\n    return hasCachedProps\n  }\n\n  prepareData(rest: any, fnc: Function[], cache: boolean) {\n    const data = Object.keys(rest).reduce((obj, item, index) => {\n      if (cache) this.state = { ...this.state, [item]: fnc[index] }\n      return {\n        ...obj,\n        [item]: fnc[index]\n      }\n    }, {})\n    return data\n  }\n\n  addDataToChildren(data: any) {\n    // add data as props to children\n    this.props.children.forEach((child: any) => {\n      if (child.props) child.props = { ...child.props, ...data }\n    })\n  }\n\n  render() {\n    if (!isSSR()) {\n      const { cache = false } = this.props\n      this.loadFromCache(cache)\n      return !this.ready ? this.props.fallback : this.props.children\n    } else {\n      this.ssr()\n      return this.props.children\n    }\n  }\n}\n","import { h, render } from '../core.js'\nimport { Component } from '../component.js'\n\nexport class Visible extends Component {\n  isVisible = false\n\n  didMount() {\n    const observer = new IntersectionObserver(\n      (entries, observer) => {\n        entries.forEach(entry => {\n          if (entry.isIntersecting) {\n            observer.disconnect()\n            this.isVisible = true\n            this.update()\n          }\n        })\n      },\n      { threshold: [0, 1] }\n    )\n    observer.observe(this.elements[0])\n  }\n\n  render() {\n    if (!this.isVisible) {\n      return h('div', { 'data-visible': false, visibility: 'hidden' })\n    } else {\n      if (this.props.onVisible) this.props.onVisible()\n      return render(this.props.component || this.props.children[0])\n    }\n  }\n}\n","import { escapeHtml } from './helpers.js'\n\nexport class HTMLElementSSR {\n  public tagName: string\n  public isSelfClosing: boolean = false\n  public nodeType: null | 1 | 2 | 3 | 4 | 5 | 6 | 7 | 8 | 9 | 10 | 11 | 12 = null\n  private _ssr: string\n\n  constructor(tag: string) {\n    this.tagName = tag\n\n    const selfClosing = [\n      'area',\n      'base',\n      'br',\n      'col',\n      'embed',\n      'hr',\n      'img',\n      'input',\n      'link',\n      'meta',\n      'param',\n      'source',\n      'track',\n      'wbr'\n    ]\n\n    this.nodeType = 1\n\n    if (selfClosing.indexOf(tag) >= 0) {\n      this._ssr = `<${tag} />`\n      this.isSelfClosing = true\n    } else {\n      this._ssr = `<${tag}></${tag}>`\n    }\n  }\n\n  get outerHTML() {\n    return this.toString()\n  }\n\n  get innerHTML(): string {\n    return this.innerText\n  }\n\n  set innerHTML(text) {\n    this.innerText = text\n  }\n\n  get innerText(): string {\n    const reg = /(^<[^>]+>)(.+)?(<\\/[a-z0-9]+>$|\\/>$)/gm\n    return reg.exec(this._ssr)?.[2] || ''\n  }\n\n  set innerText(text) {\n    const reg = /(^<[^>]+>)(.+)?(<\\/[a-z0-9]+>$|\\/>$)/gm\n    const replacer = (_match: string, p1: string, _p2: string, p3: string) => [p1, text, p3].join('')\n    this._ssr = this._ssr.replace(reg, replacer)\n  }\n\n  getAttribute(_name: any) {\n    return null\n  }\n\n  get classList() {\n    const element = this._ssr\n\n    const classesRegex = /^<\\w+.+(\\sclass=\")([^\"]+)\"/gm\n\n    return {\n      add: (name: string) => {\n        this.setAttribute('class', name)\n      },\n      entries: {\n        get length(): number {\n          const classes = classesRegex.exec(element)\n          if (classes && classes[2]) return classes[2].split(' ').length\n          return 0\n        }\n      }\n    }\n  }\n\n  toString() {\n    return this._ssr\n  }\n\n  setAttributeNS(_namespace: string | null, name: string, value: string) {\n    this.setAttribute(name, value)\n  }\n\n  setAttribute(name: string, value: string) {\n    const replacer1 = (_match: string, p1: string, p2: string) =>\n      `${p1}${escapeHtml(name)}=\"${escapeHtml(value)}\" ${p2}`\n    const replacer2 = (_match: string, p1: string, p2: string) =>\n      `${p1} ${escapeHtml(name)}=\"${escapeHtml(value)}\"${p2}`\n\n    if (this.isSelfClosing) this._ssr = this._ssr.replace(/(^<[a-z0-9]+ )(.+)/gm, replacer1)\n    else this._ssr = this._ssr.replace(/(^<[^>]+)(.+)/gm, replacer2)\n  }\n\n  append(child: any) {\n    this.appendChild(child)\n  }\n\n  appendChild(child: any) {\n    const index = this._ssr.lastIndexOf('</')\n    this._ssr = this._ssr.substring(0, index) + child + this._ssr.substring(index)\n  }\n\n  get children() {\n    const reg = /<([a-z0-9]+)((?!<\\/\\1).)*<\\/\\1>/gms\n    const array = []\n    let match\n\n    while ((match = reg.exec(this.innerHTML)) !== null) {\n      array.push(match[0].replace(/[\\s]+/gm, ' '))\n    }\n\n    return array\n  }\n\n  addEventListener<K extends keyof DocumentEventMap>(\n    _type: keyof K,\n    _listener: (this: Document, ev: DocumentEventMap[K]) => any,\n    _options?: boolean | AddEventListenerOptions | undefined\n  ) {}\n}\n\nexport class DocumentSSR {\n  body: HTMLElement\n  head: HTMLElement\n\n  constructor() {\n    this.body = this.createElement('body')\n    this.head = this.createElement('head')\n  }\n\n  createElement(tag: string) {\n    return new HTMLElementSSR(tag) as unknown as HTMLElement\n  }\n\n  createElementNS(_URI: string, tag: string) {\n    return this.createElement(tag)\n  }\n\n  createTextNode(text: string) {\n    return escapeHtml(text)\n  }\n\n  querySelector(_query: string) {\n    return undefined\n  }\n}\n\nconst documentSSR = () => {\n  return new DocumentSSR() as unknown as Document\n}\n\nexport { documentSSR }\n","import { isSSR, render } from './core.js'\nimport { documentSSR } from './regexDom.js'\nimport { _state } from './state.js'\nimport { detectSSR } from './helpers.js'\n\n// functions that should only be available on the server-side\nconst ssrTricks = {\n  isWebComponent: (tagNameOrComponent: any) => {\n    return (\n      typeof tagNameOrComponent === 'string' &&\n      tagNameOrComponent.includes('-') &&\n      _nano.customElements.has(tagNameOrComponent)\n    )\n  },\n  renderWebComponent: (tagNameOrComponent: any, props: any, children: any, _render: any) => {\n    const customElement = _nano.customElements.get(tagNameOrComponent)\n    const component = _render({ component: customElement, props: { ...props, children: children } })\n    // get the html tag and the innerText from string\n    // match[1]: HTMLTag\n    // match[2]: innerText\n    const match = component.toString().match(/^<(?<tag>[a-z]+)>(.*)<\\/\\k<tag>>$/)\n    if (match) {\n      const element = document.createElement(match[1])\n      element.innerText = match[2]\n\n      // eslint-disable-next-line no-inner-declarations\n      function replacer(match: string, p1: string, _offset: number, _string: string): string {\n        return match.replace(p1, '')\n      }\n      // remove events like onClick from DOM\n      element.innerText = element.innerText.replace(/<\\w+[^>]*(\\s(on\\w*)=\"[^\"]*\")/gm, replacer)\n\n      return element\n    } else {\n      return null\n    }\n  }\n}\n\nconst initGlobalVar = () => {\n  const isSSR = detectSSR() === true ? true : undefined\n  const location = { pathname: '/' }\n  const document = isSSR ? documentSSR() : window.document\n  globalThis._nano = { isSSR, location, document, customElements: new Map(), ssrTricks }\n}\ninitGlobalVar()\n\nexport const initSSR = (pathname: string = '/') => {\n  _nano.location = { pathname }\n  globalThis.document = _nano.document = isSSR() ? documentSSR() : window.document\n}\n\nexport const renderSSR = (component: any, options: { pathname?: string; clearState?: boolean } = {}) => {\n  const { pathname, clearState = true } = options\n\n  initSSR(pathname)\n  if (clearState) _state.clear()\n\n  const tmp = render(component, null, true) as string | string[]\n  if (Array.isArray(tmp)) return tmp.join('')\n  else return Array.from(tmp).join('')\n}\n\nexport const clearState = () => {\n  _state.clear()\n}\n","import { MINI } from './constants.js'\n\nconst MODE_SLASH = 0\nconst MODE_TEXT = 1\nconst MODE_WHITESPACE = 2\nconst MODE_TAGNAME = 3\nconst MODE_COMMENT = 4\nconst MODE_PROP_SET = 5\nconst MODE_PROP_APPEND = 6\n\nconst CHILD_APPEND = 0\nconst CHILD_RECURSE = 2\nconst TAG_SET = 3\nconst PROPS_ASSIGN = 4\nconst PROP_SET = MODE_PROP_SET\nconst PROP_APPEND = MODE_PROP_APPEND\n\n// Turn a result of a build(...) call into a tree that is more\n// convenient to analyze and transform (e.g. Babel plugins).\n// For example:\n// \ttreeify(\n//\t\tbuild'<div href=\"1${a}\" ...${b}><${x} /></div>`,\n//\t\t[X, Y, Z]\n//\t)\n// returns:\n// \t{\n// \t\ttag: 'div',\n//\t\tprops: [ { href: [\"1\", X] },\tY ],\n// \t\tchildren: [ { tag: Z, props: [], children: [] } ]\n// \t}\nexport const treeify = (built: any, fields: any) => {\n  const _treeify = (built: any): any => {\n    let tag = ''\n    let currentProps: any = null\n    const props = []\n    const children: any[] = []\n\n    for (let i = 1; i < built.length; i++) {\n      const type = built[i++]\n      const value = built[i] ? fields[built[i++] - 1] : built[++i]\n\n      if (type === TAG_SET) {\n        tag = value\n      } else if (type === PROPS_ASSIGN) {\n        props.push(value)\n        currentProps = null\n      } else if (type === PROP_SET) {\n        if (!currentProps) {\n          currentProps = Object.create(null)\n          props.push(currentProps)\n        }\n        currentProps[built[++i]] = [value]\n      } else if (type === PROP_APPEND) {\n        currentProps[built[++i]].push(value)\n      } else if (type === CHILD_RECURSE) {\n        children.push(_treeify(value))\n      } else if (type === CHILD_APPEND) {\n        children.push(value)\n      }\n    }\n\n    return { tag, props, children }\n  }\n  const { children } = _treeify(built)\n  return children.length > 1 ? children : children[0]\n}\n\nexport const evaluate = (h: any, built: any, fields: any, args: any): any => {\n  let tmp\n\n  // `build()` used the first element of the operation list as\n  // temporary workspace. Now that `build()` is done we can use\n  // that space to track whether the current element is \"dynamic\"\n  // (i.e. it or any of its descendants depend on dynamic values).\n  built[0] = 0\n\n  for (let i = 1; i < built.length; i++) {\n    const type = built[i++]\n\n    // Set `built[0]`'s appropriate bits if this element depends on a dynamic value.\n    const value = built[i] ? ((built[0] |= type ? 1 : 2), fields[built[i++]]) : built[++i]\n\n    if (type === TAG_SET) {\n      args[0] = value\n    } else if (type === PROPS_ASSIGN) {\n      args[1] = Object.assign(args[1] || {}, value)\n    } else if (type === PROP_SET) {\n      ;(args[1] = args[1] || {})[built[++i]] = value\n    } else if (type === PROP_APPEND) {\n      args[1][built[++i]] += `${value}`\n    } else if (type) {\n      // type === CHILD_RECURSE\n      // Set the operation list (including the staticness bits) as\n      // `this` for the `h` call.\n      tmp = h.apply(value, evaluate(h, value, fields, ['', null]))\n      args.push(tmp)\n\n      if (value[0]) {\n        // Set the 2nd lowest bit it the child element is dynamic.\n        built[0] |= 2\n      } else {\n        // Rewrite the operation list in-place if the child element is static.\n        // The currently evaluated piece `CHILD_RECURSE, 0, [...]` becomes\n        // `CHILD_APPEND, 0, tmp`.\n        // Essentially the operation list gets optimized for potential future\n        // re-evaluations.\n        built[i - 2] = CHILD_APPEND\n        built[i] = tmp\n      }\n    } else {\n      // type === CHILD_APPEND\n      args.push(value)\n    }\n  }\n\n  return args\n}\n\nexport const build = function (statics: TemplateStringsArray, ...rest: any[]) {\n  const fields = [statics, ...rest]\n  // @ts-ignore\n  const h = this\n\n  let mode: any = MODE_TEXT\n  let buffer = ''\n  let quote = ''\n  let current: any = [0]\n  let char: any\n  let propName: any\n\n  const commit = (field?: any) => {\n    if (mode === MODE_TEXT && (field || (buffer = buffer.replace(/^\\s*\\n\\s*|\\s*\\n\\s*$/g, '')))) {\n      if (MINI) {\n        current.push(field ? fields[field] : buffer)\n      } else {\n        current.push(CHILD_APPEND, field, buffer)\n      }\n    } else if (mode === MODE_TAGNAME && (field || buffer)) {\n      if (MINI) {\n        current[1] = field ? fields[field] : buffer\n      } else {\n        current.push(TAG_SET, field, buffer)\n      }\n      mode = MODE_WHITESPACE\n    } else if (mode === MODE_WHITESPACE && buffer === '...' && field) {\n      if (MINI) {\n        current[2] = Object.assign(current[2] || {}, fields[field])\n      } else {\n        current.push(PROPS_ASSIGN, field, 0)\n      }\n    } else if (mode === MODE_WHITESPACE && buffer && !field) {\n      if (MINI) {\n        ;(current[2] = current[2] || {})[buffer] = true\n      } else {\n        current.push(PROP_SET, 0, true, buffer)\n      }\n    } else if (mode >= MODE_PROP_SET) {\n      if (MINI) {\n        if (mode === MODE_PROP_SET) {\n          ;(current[2] = current[2] || {})[propName] = field\n            ? buffer\n              ? buffer + fields[field]\n              : fields[field]\n            : buffer\n          mode = MODE_PROP_APPEND\n        } else if (field || buffer) {\n          current[2][propName] += field ? buffer + fields[field] : buffer\n        }\n      } else {\n        if (buffer || (!field && mode === MODE_PROP_SET)) {\n          current.push(mode, 0, buffer, propName)\n          mode = MODE_PROP_APPEND\n        }\n        if (field) {\n          current.push(mode, field, 0, propName)\n          mode = MODE_PROP_APPEND\n        }\n      }\n    }\n\n    buffer = ''\n  }\n\n  for (let i = 0; i < statics.length; i++) {\n    if (i) {\n      if (mode === MODE_TEXT) {\n        commit()\n      }\n      commit(i)\n    }\n\n    for (let j = 0; j < statics[i].length; j++) {\n      char = statics[i][j]\n\n      if (mode === MODE_TEXT) {\n        if (char === '<') {\n          // commit buffer\n          commit()\n          if (MINI) {\n            current = [current, '', null]\n          } else {\n            current = [current]\n          }\n          mode = MODE_TAGNAME\n        } else {\n          buffer += char\n        }\n      } else if (mode === MODE_COMMENT) {\n        // Ignore everything until the last three characters are '-', '-' and '>'\n        if (buffer === '--' && char === '>') {\n          mode = MODE_TEXT\n          buffer = ''\n        } else {\n          buffer = char + buffer[0]\n        }\n      } else if (quote) {\n        if (char === quote) {\n          quote = ''\n        } else {\n          buffer += char\n        }\n      } else if (char === '\"' || char === \"'\") {\n        quote = char\n      } else if (char === '>') {\n        commit()\n        mode = MODE_TEXT\n      } else if (!mode) {\n        // Ignore everything until the tag ends\n      } else if (char === '=') {\n        mode = MODE_PROP_SET\n        propName = buffer\n        buffer = ''\n      } else if (char === '/' && (mode < MODE_PROP_SET || statics[i][j + 1] === '>')) {\n        commit()\n        if (mode === MODE_TAGNAME) {\n          current = current[0]\n        }\n        mode = current\n        if (MINI) {\n          ;(current = current[0]).push(h(...mode.slice(1)))\n        } else {\n          ;(current = current[0]).push(CHILD_RECURSE, 0, mode)\n        }\n        mode = MODE_SLASH\n      } else if (char === ' ' || char === '\\t' || char === '\\n' || char === '\\r') {\n        // <a disabled>\n        commit()\n        mode = MODE_WHITESPACE\n      } else {\n        buffer += char\n      }\n\n      if (mode === MODE_TAGNAME && buffer === '!--') {\n        mode = MODE_COMMENT\n        current = current[0]\n      }\n    }\n  }\n  commit()\n\n  if (MINI) {\n    return current.length > 2 ? current.slice(1) : current[1]\n  }\n  return current\n}\n","/**\n * Copyright 2018 Google Inc. All Rights Reserved.\n * Licensed under the Apache License, Version 2.0 (the \"License\");\n * you may not use this file except in compliance with the License.\n * You may obtain a copy of the License at\n *     http://www.apache.org/licenses/LICENSE-2.0\n * Unless required by applicable law or agreed to in writing, software\n * distributed under the License is distributed on an \"AS IS\" BASIS,\n * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n * See the License for the specific language governing permissions and\n * limitations under the License.\n */\n\nimport { MINI } from './constants.js'\nimport { build, evaluate } from './build.js'\n\nconst CACHES = new Map()\n\nconst regular = function (this: HTMLElement, statics: TemplateStringsArray) {\n  let tmp = CACHES.get(this)\n  if (!tmp) {\n    tmp = new Map()\n    CACHES.set(this, tmp)\n  }\n  tmp = evaluate(this, tmp.get(statics) || (tmp.set(statics, (tmp = build(statics))), tmp), arguments, [])\n  return tmp.length > 1 ? tmp : tmp[0]\n}\n\n// export as htm\nexport default MINI ? build : regular\n","import { h } from './core.js'\nimport htm from './htm.js'\nconst jsx = htm.bind(h)\n\nexport { jsx }\n","import { hydrate, h } from './core.js'\nimport { Visible } from './components/visible.js'\n\nexport const hydrateLazy = (component: any, parent: HTMLElement | null = null, removeChildNodes = true) => {\n  const c = h(Visible, null, component)\n  return hydrate(c, parent, removeChildNodes)\n}\n","import { isSSR } from './core.js'\n\nexport class Store<S = any> {\n  private _state: S\n  private _prevState: S\n  private _listeners: Map<string, Function> = new Map()\n  private _storage: 'memory' | 'local' | 'session'\n  private _id: string\n\n  /**\n   * Create your own Store.\n   * @param defaultState Pass the initial State.\n   * @param name The name of the Store (only required if you persist the state in localStorage or sessionStorage).\n   * @param storage Pass 'memory', 'local' or 'session'.\n   */\n  constructor(defaultState: Object, name: string = '', storage: 'memory' | 'local' | 'session' = 'memory') {\n    if (isSSR()) storage = 'memory'\n\n    this._id = name\n    this._storage = storage\n\n    this._state = this._prevState = defaultState as any\n\n    if (storage === 'memory' || !storage) return\n\n    const Storage = storage === 'local' ? localStorage : sessionStorage\n\n    // get/set initial state of Storage\n    const item = Storage.getItem(this._id)\n    if (item) {\n      this._state = this._prevState = JSON.parse(item)\n    } else Storage.setItem(this._id, JSON.stringify(defaultState))\n  }\n\n  private persist(newState: S) {\n    if (this._storage === 'memory') return\n    const Storage = this._storage === 'local' ? localStorage : sessionStorage\n    Storage.setItem(this._id, JSON.stringify(newState))\n  }\n\n  /** Clears the state of the whole store. */\n  public clear() {\n    // @ts-ignore\n    this._state = this._prevState = undefined\n\n    if (this._storage === 'local') localStorage.removeItem(this._id)\n    else if (this._storage === 'session') sessionStorage.removeItem(this._id)\n  }\n\n  public setState(newState: S) {\n    this.state = newState\n  }\n\n  public set state(newState: S) {\n    this._prevState = this._state\n    this._state = newState\n\n    this.persist(newState)\n\n    this._listeners.forEach(fnc => {\n      fnc(this._state, this._prevState)\n    })\n  }\n\n  public get state(): S {\n    return this._state\n  }\n\n  public use() {\n    const id = Math.random().toString(36).substring(2, 9)\n    const _this = this\n    return {\n      get state(): S {\n        return _this.state\n      },\n      setState: (newState: S) => {\n        this.state = newState\n      },\n      subscribe: (fnc: (newState: S, prevState: S) => void) => {\n        this._listeners.set(id, fnc)\n      },\n      cancel: () => {\n        if (this._listeners.has(id)) this._listeners.delete(id)\n      }\n    }\n  }\n}\n","export const createContext = (ctx: any) => {\n  let _ctx = ctx\n  return {\n    Provider: (props: any) => {\n      if (props.value) _ctx = props.value\n      return props.children\n    },\n    Consumer: (props: any) => {\n      return { component: props.children[0](_ctx), props: { ...props, context: _ctx } }\n    },\n    get: () => _ctx,\n    set: (ctx: any) => (_ctx = ctx)\n  }\n}\n\nexport const useContext = (ctx: any) => {\n  const _ctx = ctx\n  if (_ctx && typeof _ctx.get === 'function') {\n    return _ctx.get()\n  }\n}\n","import { h } from './core.js'\nimport { Component } from './component.js'\nimport { Fragment } from './fragment.js'\nimport { Helmet } from './components/helmet.js'\n\ninterface ObjectHasToString {\n  toString: () => string\n}\ntype Styles = string\ntype FunctionReturnsString = () => string\ntype WithStylesType = Styles | ObjectHasToString | FunctionReturnsString\n\nexport const withStyles: any =\n  (...styles: WithStylesType[]) =>\n  (WrappedComponent: any) => {\n    return class extends Component {\n      render() {\n        const { children, ...rest } = this.props\n\n        const helmets: any[] = []\n        styles.forEach(style => {\n          if (typeof style === 'string') {\n            helmets.push(h(Helmet, null, h('style', null, style)))\n          } else if (typeof style === 'function') {\n            const _style = style()\n            if (typeof _style === 'string') {\n              helmets.push(h(Helmet, null, h('style', null, _style)))\n            }\n          } else if (typeof style === 'object') {\n            const _style = style.toString?.()\n            if (typeof _style === 'string') {\n              helmets.push(h(Helmet, null, h('style', null, _style)))\n            }\n          }\n        })\n\n        const component =\n          children && children.length > 0\n            ? h(WrappedComponent, { ...rest }, children)\n            : h(WrappedComponent, { ...this.props })\n\n        return h(Fragment, null, ...helmets, component)\n      }\n    }\n  }\n","import { h, isSSR, render, _render } from './core.js'\n\nconst defineAsCustomElementsSSR = (\n  component: any,\n  componentName: string,\n  _publicProps: string[] = [],\n  _options: any = {}\n) => {\n  if (!/^[a-zA-Z0-9]+-[a-zA-Z0-9]+$/.test(componentName))\n    console.log(`Error: WebComponent name \"${componentName}\" is invalid.`)\n  else _nano.customElements.set(componentName, component)\n}\n\nexport const defineAsCustomElements: (\n  component: any,\n  componentName: string,\n  publicProps: string[],\n  shadow?: ShadowRootInit\n) => void = function (component, componentName, publicProps, shadow) {\n  if (isSSR()) {\n    defineAsCustomElementsSSR(component, componentName, publicProps)\n    return\n  }\n\n  customElements.define(\n    componentName,\n    class extends HTMLElement {\n      component: any\n      $root: ShadowRoot | HTMLElement\n      private isFunctionalComponent: boolean\n      private functionalComponentsProps: any\n\n      constructor() {\n        super()\n\n        if (shadow) {\n          this.attachShadow(shadow)\n          this.$root = this.shadowRoot as ShadowRoot\n        } else {\n          this.$root = this\n        }\n\n        let ref\n\n        const el = this.buildEl(\n          _render({\n            component,\n            props: {\n              ref: (r: any) => (ref = r),\n              children: Array.from(this.children).map(c => render(c))\n            }\n          })\n        )\n\n        // ------------------------------ first render\n        this.component = ref\n        this.isFunctionalComponent = !component.isClass\n        this.functionalComponentsProps = {}\n        this.appendEl(el)\n        // ------------------------------------------\n\n        if (!this.isFunctionalComponent) {\n          this.component.updatePropsValue = (name: string, value: any) => {\n            // @ts-ignore\n            if (!this.component.props) this.component.props = {}\n            this.component.props[name] = value\n            this.component[name] = value\n          }\n        }\n      }\n\n      static get observedAttributes() {\n        return publicProps\n      }\n\n      private buildEl(contents: any) {\n        // because nano-jsx update needs parentElement, we need\n        // to wrap the element in a div when using shadow mode\n        return h(this.shadowRoot ? 'div' : 'template', null, contents)\n      }\n\n      private appendEl(el: any) {\n        if (this.shadowRoot) {\n          // el.dataset.wcRoot = true\n          this.$root.append(el)\n        } else {\n          this.$root.append(...el.childNodes)\n        }\n      }\n\n      private removeChildren() {\n        if (this.$root) {\n          const children = Array.from(this.$root?.children) || []\n          for (const el of children) {\n            el.remove()\n          }\n        }\n      }\n\n      attributeChangedCallback(name: string, _: any, newValue: any) {\n        if (!this.isFunctionalComponent) {\n          this.component.updatePropsValue(name, newValue)\n          this.component.update()\n        } else {\n          this.removeChildren()\n          this.functionalComponentsProps[name] = newValue\n\n          const el = this.buildEl(\n            _render({\n              component,\n              props: {\n                children: [],\n                ref: (r: any) => (this.component = r),\n                ...this.functionalComponentsProps\n              }\n            })\n          )\n\n          this.appendEl(el)\n        }\n      }\n    }\n  )\n}\n","// core\nexport { h, render, hydrate, tick } from \"./core.js\";\nexport type { FC } from \"./core.js\";\n\n// component\nexport { Component } from \"./component.js\";\n\n// built-in Components\nexport * from \"./components/index.js\";\n\n// export some defaults (Nano)\nimport { h, render, hydrate, isSSR } from \"./core.js\";\nimport { renderSSR } from \"./ssr.js\";\nexport default { h, render, hydrate, renderSSR, isSSR };\n\n// other\nexport { isSSR };\nexport { jsx } from \"./jsx.js\";\nexport { hydrateLazy } from \"./lazy.js\";\nexport { nodeToString, task } from \"./helpers.js\";\nexport { renderSSR } from \"./ssr.js\";\nexport { Fragment } from \"./fragment.js\";\nexport { Store } from \"./store.js\";\nexport { createContext, useContext } from \"./context.js\";\nexport { withStyles } from \"./withStyles.js\";\nexport { defineAsCustomElements } from \"./customElementsMode.js\";\n\n// version\nexport { printVersion } from \"./helpers.js\";\nexport { VERSION } from \"./version.js\";\n"],"names":["isSSR","_nano","tick","Promise","prototype","then","bind","resolve","removeAllChildNodes","parent","firstChild","removeChild","strToHash","s","hash","i","length","chr","charCodeAt","Math","abs","toString","appendChildren","element","children","escape","Array","isArray","slice","call","forEach","child","c","_render","appendChild","nodeType","document","createTextNode","SVG","props","attrs","attributes","svg","hNS","setAttribute","name","value","innerHTML","render","component","removeChildNodes","console","log","el","map","e","id","parentElement","replaceChild","hydrate","comp","tagName","toLowerCase","isClass","renderClassComponent","renderFunctionalComponent","flat","warn","fncComp","classComp","_getHash","Component","willMount","elements","ref","_didMount","tag","createElementNS","h","tagNameOrComponent","arguments","concat","push","_extends","createElement","isEvent","p","indexOf","_ssr","_loop","styles","Object","keys","k","join","replace","match","addEventListener","substring","__html","fragment","__dangerousHtml","test","VERSION","task","setTimeout","nodeToString","node","tmpNode","cloneNode","detectSSR","isDeno","Deno","hasWindow","window","isDescendant","desc","root","parentNode","onNodeRemove","callback","observer","MutationObserver","mutationsList","mutation","removedNodes","removed","disconnect","undefined","observe","childList","subtree","escapeHtml","unsafe","printVersion","info","_state","Map","_elements","_skipUnmount","_hasUnmounted","_proto","setState","state","shouldUpdate","isObject","update","_addNodeRemoveListener","_this","didUnmount","_didUnmount","didMount","_willUpdate","willUpdate","_didUpdate","didUpdate","_update","_this2","oldElements","insertBefore","includes","remove","isConnected","_createClass","key","get","set","_this3","Attributes","_Map","apply","_inheritsLoose","string","_iterator","_createForOfIteratorHelperLoose","_step","done","_step$value","trim","_wrapNativeSuper","Helmet","_Component","SSR","body","reg","head","footer","html","result","_body$match","_body$match2","first","second","regHTML","regBody","regAttr","res","exec","b","toHead","cleanBody","_proto2","HTMLElement","innerText","attr","_element$attributes$i","_element$attributes$i2","item","htmlTag","getElementsByTagName","titleTags","text","titleTag","exists","sort","attrs2","_el$i$attributes$item","_el$i$attributes$item2","JSON","stringify","placement","Img","src","isLoaded","image","_this$props","_this$props$lazy","lazy","rest","_objectWithoutPropertiesLoose","_excluded","IntersectionObserver","entries","entry","isIntersecting","complete","onload","threshold","_this$props2","placeholder","_this$props2$lazy","_excluded2","style","width","height","others","_excluded3","Fragment","Link","prefetchOnHover","addPrefetch","once","prefetchOnVisible","doesAlreadyExist","links","getAttribute","href","prefetch","rel","as","_this$props$delay","delay","_this$props$back","back","preventDefault","target","referrer","history","location","a","link","helmet","instances","register","unregister","splice","historyPush","path","pushState","instance","handleChanges","dispatchEvent","Event","historyReplace","replaceState","matchPath","pathname","options","_options$exact","exact","regex","url","isExact","params","pathArr","split","pathnameArr","_extends2","regexMatch","RegExp","Switch","_len","args","_key","index","removeEventListener","findChild","_child$props","fallback","Routes","_Switch2","Route","_ref","parseParamsFromPath","route","to","_ref2","handleClick","event","onClick","CListener","_route","_listeners","newRoute","fnc","use","random","subscribe","cancel","has","listener","Listener","_pathname","_extends3","startsWith","Suspense","ready","str","val","_this2$props","_this2$props$cache","cache","initState","loadFromCache","promises","values","all","resolved","data","prepareData","addDataToChildren","reject","ssr","functions","hasCachedProps","reduce","obj","_this$props$cache2","Visible","isVisible","visibility","onVisible","HTMLElementSSR","isSelfClosing","selfClosing","_name","setAttributeNS","_namespace","replacer1","_match","p1","p2","replacer2","append","lastIndexOf","_type","_listener","_options","_reg$exec","replacer","_p2","p3","classesRegex","add","classes","array","DocumentSSR","_URI","querySelector","_query","documentSSR","ssrTricks","isWebComponent","customElements","renderWebComponent","customElement","_wrapRegExp","_offset","_string","initGlobalVar","globalThis","initSSR","renderSSR","_options$clearState","clearState","clear","tmp","from","MODE_SLASH","MODE_TEXT","MODE_WHITESPACE","MODE_TAGNAME","MODE_COMMENT","MODE_PROP_SET","MODE_PROP_APPEND","CHILD_APPEND","CHILD_RECURSE","TAG_SET","PROPS_ASSIGN","PROP_SET","PROP_APPEND","evaluate","built","fields","type","assign","build","statics","mode","buffer","quote","current","char","propName","commit","field","j","CACHES","regular","jsx","htm","hydrateLazy","Store","defaultState","storage","_prevState","_storage","_id","Storage","localStorage","sessionStorage","getItem","parse","setItem","persist","newState","removeItem","createContext","ctx","_ctx","Provider","Consumer","context","useContext","withStyles","WrappedComponent","_class","helmets","_style","defineAsCustomElementsSSR","componentName","_publicProps","defineAsCustomElements","publicProps","shadow","define","_HTMLElement","$root","isFunctionalComponent","functionalComponentsProps","attachShadow","shadowRoot","buildEl","r","appendEl","updatePropsValue","contents","_this$$root","childNodes","removeChildren","_this$$root2","attributeChangedCallback","_","newValue"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAEaA,IAAAA,KAAK,GAAG,SAARA,KAAKA,GAAA;EAAA,OAAS,OAAOC,KAAK,KAAK,WAAW,IAAIA,KAAK,CAACD,KAAK,KAAK,IAAI,CAAA;AAAA,EAAA;AAO/E;IACaE,IAAI,GAAGC,OAAO,CAACC,SAAS,CAACC,IAAI,CAACC,IAAI,CAACH,OAAO,CAACI,OAAO,EAAE,EAEzD;AAED,IAAMC,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIC,MAAmB,EAAI;EACzD,OAAOA,MAAM,CAACC,UAAU,EAAE;AACxBD,IAAAA,MAAM,CAACE,WAAW,CAACF,MAAM,CAACC,UAAU,CAAC,CAAA;AACvC,GAAA;AACF,CAAC,CAAA;AAED;AACO,IAAME,SAAS,GAAG,SAAZA,SAASA,CAAIC,CAAS,EAAI;EACrC,IAAIC,IAAI,GAAG,CAAC,CAAA;AAEZ,EAAA,KAAK,IAAIC,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGF,CAAC,CAACG,MAAM,EAAED,CAAC,EAAE,EAAE;AACjC,IAAA,IAAME,GAAG,GAAGJ,CAAC,CAACK,UAAU,CAACH,CAAC,CAAC,CAAA;IAC3BD,IAAI,GAAG,CAACA,IAAI,IAAI,CAAC,IAAIA,IAAI,GAAGG,GAAG,CAAA;IAC/BH,IAAI,IAAI,CAAC,CAAC;AACZ,GAAA;EACA,OAAOK,IAAI,CAACC,GAAG,CAACN,IAAI,CAAC,CAACO,QAAQ,CAAC,EAAE,CAAC,CAAA;AACpC,CAAC,CAAA;AAEM,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CACzBC,OAAiC,EACjCC,QAAuB,EACvBC,MAAM,EACJ;AACF;AACA,EAAA,IAAI,CAACC,KAAK,CAACC,OAAO,CAACH,QAAQ,CAAC,EAAE;IAC5BF,cAAc,CAACC,OAAO,EAAE,CAACC,QAAQ,CAAS,CAAC,CAAA;AAC3C,IAAA,OAAA;AACF,GAAA;AAEA;AACA,EAAA,IAAI,OAAOA,QAAQ,KAAK,QAAQ,EAC9BA,QAAQ,GAAGE,KAAK,CAACtB,SAAS,CAACwB,KAAK,CAACC,IAAI,CAACL,QAAQ,CAAC,CAAA;AAEjDA,EAAAA,QAAQ,CAACM,OAAO,CAAC,UAACC,KAAK,EAAI;AACzB;AACA,IAAA,IAAIL,KAAK,CAACC,OAAO,CAACI,KAAK,CAAC,EAAET,cAAc,CAACC,OAAO,EAAEQ,KAAa,CAAC,CAAC,KAC5D;AACH;AACA,MAAA,IAAMC,CAAC,GAAGC,OAAO,CAACF,KAAK,CAAgB,CAAA;AAEvC,MAAA,IAAI,OAAOC,CAAC,KAAK,WAAW,EAAE;AAC5B;AACA,QAAA,IAAIN,KAAK,CAACC,OAAO,CAACK,CAAC,CAAC,EAAEV,cAAc,CAACC,OAAO,EAAES,CAAS,CAAC,CAAA;AACxD;aACK;UACHT,OAAO,CAACW,WAAW,CACjBF,CAAC,CAACG,QAAQ,IAAI,IAAI,GAAGC,QAAQ,CAACC,cAAc,CAACL,CAAC,CAACX,QAAQ,EAAE,CAAC,GAAGW,CAAC,CAC/D,CAAA;AACH,SAAA;AACF,OAAA;AACF,KAAA;AACF,GAAC,CAAC,CAAA;AACJ,CAAC,CAAA;AAED;;AAEG;AACH,IAAMM,GAAG,GAAG,SAANA,GAAGA,CAAIC,KAAU,EAAI;AACzB,EAAA,IAAMR,KAAK,GAAGQ,KAAK,CAACf,QAAQ,CAAC,CAAC,CAAe,CAAA;AAC7C,EAAA,IAAMgB,KAAK,GAAGT,KAAK,CAACU,UAAU,CAAA;AAE9B,EAAA,IAAIzC,KAAK,EAAE,EAAE,OAAO+B,KAAK,CAAA;AAEzB,EAAA,IAAMW,GAAG,GAAGC,GAAG,CAAC,KAAK,CAAe,CAAA;AACpC,EAAA,KAAK,IAAI5B,CAAC,GAAGyB,KAAK,CAACxB,MAAM,GAAG,CAAC,EAAED,CAAC,IAAI,CAAC,EAAEA,CAAC,EAAE,EAAE;AAC1C2B,IAAAA,GAAG,CAACE,YAAY,CAACJ,KAAK,CAACzB,CAAC,CAAC,CAAC8B,IAAI,EAAEL,KAAK,CAACzB,CAAC,CAAC,CAAC+B,KAAK,CAAC,CAAA;AACjD,GAAA;AACAJ,EAAAA,GAAG,CAACK,SAAS,GAAGhB,KAAK,CAACgB,SAAS,CAAA;AAE/B,EAAA,OAAOL,GAAU,CAAA;AACnB,CAAC,CAAA;AAED;AACO,IAAMM,MAAM,GAAG,SAATA,MAAMA,CACjBC,SAAc,EACdxC,MAA6B,EAC7ByC,gBAAgB,EACd;AAAA,EAAA,IAFFzC,MAA6B,KAAA,KAAA,CAAA,EAAA;AAA7BA,IAAAA,MAA6B,GAAA,IAAI,CAAA;AAAA,GAAA;AAAA,EAAA,IACjCyC,gBAAgB,KAAA,KAAA,CAAA,EAAA;AAAhBA,IAAAA,gBAAgB,GAAG,IAAI,CAAA;AAAA,GAAA;AAEvBC,EAAAA,OAAO,CAACC,GAAG,CAAC,WAAW,EAAEH,SAAS,CAAC,CAAA;AACnC,EAAA,IAAII,EAAE,GAAGpB,OAAO,CAACgB,SAAS,CAAC,CAAA;AAC3BE,EAAAA,OAAO,CAACC,GAAG,CAAC,IAAI,EAAEC,EAAE,CAAC,CAAA;AACrB,EAAA,IAAI3B,KAAK,CAACC,OAAO,CAAC0B,EAAE,CAAC,EAAE;AACrBA,IAAAA,EAAE,GAAGA,EAAE,CAACC,GAAG,CAAC,UAACC,CAAC,EAAA;MAAA,OAAKtB,OAAO,CAACsB,CAAC,CAAC,CAAA;KAAC,CAAA,CAAA;IAC9B,IAAIF,EAAE,CAACrC,MAAM,KAAK,CAAC,EAAEqC,EAAE,GAAGA,EAAE,CAAC,CAAC,CAAC,CAAA;AACjC,GAAA;AAEA,EAAA,IAAI5C,MAAM,EAAE;AACV,IAAA,IAAIyC,gBAAgB,EAAE1C,mBAAmB,CAACC,MAAM,CAAC,CAAA;AAEjD;AACA,IAAA,IAAI4C,EAAE,IAAI5C,MAAM,CAAC+C,EAAE,IAAI/C,MAAM,CAAC+C,EAAE,KAAKH,EAAE,CAACG,EAAE,IAAI/C,MAAM,CAACgD,aAAa,EAAE;MAClEhD,MAAM,CAACgD,aAAa,CAACC,YAAY,CAACL,EAAE,EAAE5C,MAAM,CAAC,CAAA;AAC/C,KAAC,MAAM;AACL;AACA,MAAA,IAAIiB,KAAK,CAACC,OAAO,CAAC0B,EAAE,CAAC,EACnBA,EAAE,CAACvB,OAAO,CAAC,UAACyB,CAAM,EAAI;AACpBjC,QAAAA,cAAc,CAACb,MAAM,EAAEwB,OAAO,CAACsB,CAAC,CAAC,CAAC,CAAA;AAClC;OACD,CAAC,CAAC,KACAjC,cAAc,CAACb,MAAM,EAAEwB,OAAO,CAACoB,EAAE,CAAC,CAAC,CAAA;AAC1C,KAAA;AACA,IAAA,OAAO5C,MAAM,CAAA;AACf,GAAA;AACA;OACK;AACH,IAAA,IAAIT,KAAK,EAAE,IAAI,CAAC0B,KAAK,CAACC,OAAO,CAAC0B,EAAE,CAAC,EAAE,OAAO,CAACA,EAAE,CAAC,CAAA;AAC9C,IAAA,OAAOA,EAAE,CAAA;AACX,GAAA;AACF,EAAC;AAEM,IAAMM,OAAO,GAAGX,OAAM;AAEtB,IAAMf,OAAO,GAAG,SAAVA,OAAOA,CAAI2B,IAAS,EAAS;AACxCT,EAAAA,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEQ,IAAI,CAAC,CAAA;AACzB;AACA,EAAA,IAAIA,IAAI,KAAK,IAAI,IAAIA,IAAI,KAAK,KAAK,IAAI,OAAOA,IAAI,KAAK,WAAW,EAAE,OAAO,EAAE,CAAA;AAE7E;AACA,EAAA,IAAI,OAAOA,IAAI,KAAK,QAAQ,IAAI,OAAOA,IAAI,KAAK,QAAQ,EACtD,OAAOA,IAAI,CAACvC,QAAQ,EAAE,CAAA;AAExB;AACA,EAAA,IAAIuC,IAAI,CAACC,OAAO,IAAID,IAAI,CAACC,OAAO,CAACC,WAAW,EAAE,KAAK,KAAK,EACtD,OAAOxB,GAAG,CAAC;IAAEd,QAAQ,EAAE,CAACoC,IAAI,CAAA;AAAG,GAAA,CAAC,CAAA;AAElC;AACA,EAAA,IAAIA,IAAI,CAACC,OAAO,EAAE,OAAOD,IAAI,CAAA;AAE7B;EACA,IAAIA,IAAI,IAAIA,IAAI,CAACzB,QAAQ,KAAK,CAAC,EAAE,OAAOyB,IAAI,CAAA;AAE5C;AACA,EAAA,IAAIA,IAAI,IAAIA,IAAI,CAACX,SAAS,IAAIW,IAAI,CAACX,SAAS,CAACc,OAAO,EAClD,OAAOC,oBAAoB,CAACJ,IAAI,CAAC,CAAA;AAEnC;AACA,EAAA,IAAIA,IAAI,CAACG,OAAO,EAAE,OAAOC,oBAAoB,CAAC;AAAEf,IAAAA,SAAS,EAAEW,IAAI;AAAErB,IAAAA,KAAK,EAAE,EAAA;AAAI,GAAA,CAAC,CAAA;AAE7E;AACA,EAAA,IAAIqB,IAAI,CAACX,SAAS,IAAI,OAAOW,IAAI,CAACX,SAAS,KAAK,UAAU,EACxD,OAAOgB,yBAAyB,CAACL,IAAI,CAAC,CAAA;AAExC;AACA,EAAA,IAAIlC,KAAK,CAACC,OAAO,CAACiC,IAAI,CAAC,EAAE,OAAQA,IAAI,CAACN,GAAG,CAAC,UAACtB,CAAC,EAAA;IAAA,OAAKC,OAAO,CAACD,CAAC,CAAC,CAAA;GAAS,CAAA,CAACkC,IAAI,EAAE,CAAA;AAE3E;AACA,EAAA,IAAI,OAAON,IAAI,KAAK,UAAU,IAAI,CAACA,IAAI,CAACG,OAAO,EAAE,OAAO9B,OAAO,CAAC2B,IAAI,EAAE,CAAC,CAAA;AAEvE;EACA,IACEA,IAAI,CAACX,SAAS,IACdW,IAAI,CAACX,SAAS,CAACY,OAAO,IACtB,OAAOD,IAAI,CAACX,SAAS,CAACY,OAAO,KAAK,QAAQ,EAE1C,OAAO5B,OAAO,CAAC2B,IAAI,CAACX,SAAS,CAAC,CAAA;AAEhC;AACA,EAAA,IAAIvB,KAAK,CAACC,OAAO,CAACiC,IAAI,CAACX,SAAS,CAAC,EAAE,OAAOhB,OAAO,CAAC2B,IAAI,CAACX,SAAS,CAAC,CAAA;AAEjE;EACA,IAAIW,IAAI,CAACX,SAAS,EAAE,OAAOhB,OAAO,CAAC2B,IAAI,CAACX,SAAS,CAAC,CAAA;AAElD;AACA,EAAA,IAAI,OAAOW,IAAI,KAAK,QAAQ,EAAE,OAAO,EAAE,CAAA;AAEvCT,EAAAA,OAAO,CAACgB,IAAI,CAAC,qCAAqC,EAAEP,IAAI,CAAC,CAAA;AAC3D,CAAC,CAAA;AAED,IAAMK,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAAIG,OAAY,EAAS;AACtD,EAAA,IAAQnB,SAAS,GAAYmB,OAAO,CAA5BnB,SAAS;IAAEV,KAAK,GAAK6B,OAAO,CAAjB7B,KAAK,CAAA;EACxBY,OAAO,CAACC,GAAG,CAAC,MAAM,EAAEH,SAAS,CAACV,KAAK,CAAC,CAAC,CAAA;AACrC,EAAA,OAAON,OAAO,CAACgB,SAAS,CAACV,KAAK,CAAC,CAAC,CAAA;AAClC,CAAC,CAAA;AAED,IAAMyB,oBAAoB,GAAG,SAAvBA,oBAAoBA,CAAIK,SAAc,EAAS;AACnD,EAAA,IAAQpB,SAAS,GAAYoB,SAAS,CAA9BpB,SAAS;IAAEV,KAAK,GAAK8B,SAAS,CAAnB9B,KAAK,CAAA;AAExB;EACA,IAAMzB,IAAI,GAAGF,SAAS,CAACqC,SAAS,CAAC5B,QAAQ,EAAE,CAAC,CAAA;AAE5C;AACA4B,EAAAA,SAAS,CAAC7C,SAAS,CAACkE,QAAQ,GAAG,YAAA;AAAA,IAAA,OAAMxD,IAAI,CAAA;AAAA,GAAA,CAAA;AAEzC,EAAA,IAAMyD,SAAS,GAAG,IAAItB,SAAS,CAACV,KAAK,CAAC,CAAA;EACtC,IAAI,CAACvC,KAAK,EAAE,EAAEuE,SAAS,CAACC,SAAS,EAAE,CAAA;AAEnC,EAAA,IAAInB,EAAE,GAAGkB,SAAS,CAACvB,MAAM,EAAE,CAAA;AAC3BK,EAAAA,EAAE,GAAGpB,OAAO,CAACoB,EAAE,CAAC,CAAA;EAChBkB,SAAS,CAACE,QAAQ,GAAGpB,EAAE,CAAA;AAEvB;EACA,IAAId,KAAK,IAAIA,KAAK,CAACmC,GAAG,EAAEnC,KAAK,CAACmC,GAAG,CAACH,SAAS,CAAC,CAAA;AAE5C,EAAA,IAAI,CAACvE,KAAK,EAAE,EACVE,IAAI,CAAC,YAAK;IACRqE,SAAS,CAACI,SAAS,EAAE,CAAA;AACvB,GAAC,CAAC,CAAA;AAEJ,EAAA,OAAOtB,EAAE,CAAA;AACX,CAAC,CAAA;AAED,IAAMV,GAAG,GAAG,SAANA,GAAGA,CAAIiC,GAAW,EAAA;AAAA,EAAA,OACtBxC,QAAQ,CAACyC,eAAe,CAAC,4BAA4B,EAAED,GAAG,CAAe,CAAA;AAAA,CAAA,CAAA;AAE3E;AACO,IAAME,CAAC,GAAG,SAAJA,CAACA,CACZC,kBAAuB,EACvBxC,KAAA,EAEE;AAAA,EAAA,IAFFA,KAAA,KAAA,KAAA,CAAA,EAAA;IAAAA,KAAA,GAAa,EAAE,CAAA;AAAA,GAAA;AAAA,EAAA,IACZf,QAAe,GAAAI,EAAAA,CAAAA,KAAA,CAAAC,IAAA,CAAAmD,SAAA,EAAA,CAAA,CAAA,CAAA;AAElB7B,EAAAA,OAAO,CAACC,GAAG,CAAC,oBAAoB,EAAE2B,kBAAkB,CAAC,CAAA;AACrD;AACA,EAAA,IAAIxC,KAAK,IAAIA,KAAK,CAACf,QAAQ,EAAE;AAC3B,IAAA,IAAIE,KAAK,CAACC,OAAO,CAACH,QAAQ,CAAC,EAAE;AAC3B,MAAA,IAAIE,KAAK,CAACC,OAAO,CAACY,KAAK,CAACf,QAAQ,CAAC,EAC/BA,QAAQ,GAAAyD,EAAAA,CAAAA,MAAA,CAAO1C,KAAK,CAACf,QAAQ,EAAKA,QAAQ,CAAC,CAAC,KACzCA,QAAQ,CAAC0D,IAAI,CAAC3C,KAAK,CAACf,QAAQ,CAAC,CAAA;AACpC,KAAC,MAAM;MACL,IAAIE,KAAK,CAACC,OAAO,CAACY,KAAK,CAACf,QAAQ,CAAC,EAAEA,QAAQ,GAAGe,KAAK,CAACf,QAAQ,CAAC,KACxDA,QAAQ,GAAG,CAACe,KAAK,CAACf,QAAQ,CAAC,CAAA;AAClC,KAAA;AACF,GAAA;AAEA;AACA,EAAA,IAAI,OAAOuD,kBAAkB,KAAK,QAAQ,EACxC,OAAO;AACL9B,IAAAA,SAAS,EAAE8B,kBAAkB;IAC7BxC,KAAK,EAAA4C,QAAA,CAAA,EAAA,EAAO5C,KAAK,EAAA;AAAEf,MAAAA,QAAQ,EAAEA,QAAAA;AAAQ,KAAA,CAAA;GACtC,CAAA;AAEH,EAAA,IAAIkD,GAAG,CAAA;AAEP,EAAA,IAAMnD,OAAO,GAAGa,QAAQ,CAACgD,aAAa,CAACL,kBAAkB,CAAgB,CAAA;AAEzE;EACA,IAAMM,OAAO,GAAG,SAAVA,OAAOA,CAAIhC,EAAqB,EAAEiC,CAAS,EAAI;AACnD;IACA,IAAI,CAAC,KAAKA,CAAC,CAACC,OAAO,CAAC,IAAI,CAAC,EAAE,OAAO,KAAK,CAAA;AAEvC;AACA,IAAA,IAAIlC,EAAE,CAACmC,IAAI,EAAE,OAAO,IAAI,CAAA;AAExB;AACA,IAAA,OAAO,OAAOnC,EAAE,CAACiC,CAAC,CAAC,KAAK,QAAQ,IAAI,OAAOjC,EAAE,CAACiC,CAAC,CAAC,KAAK,UAAU,CAAA;GAChE,CAAA;AAAC,EAAA,IAAAG,KAAA,GAAA,SAAAA,KAAAH,CAAAA,CAAA,EAEqB;AACrB;AACA;IACA,IAAIA,CAAC,KAAK,OAAO,IAAI,OAAO/C,KAAK,CAAC+C,CAAC,CAAC,KAAK,QAAQ,EAAE;AACjD,MAAA,IAAMI,MAAM,GAAGC,MAAM,CAACC,IAAI,CAACrD,KAAK,CAAC+C,CAAC,CAAC,CAAC,CACjChC,GAAG,CAAC,UAACuC,CAAC,EAAA;QAAA,OAAQA,CAAC,SAAItD,KAAK,CAAC+C,CAAC,CAAC,CAACO,CAAC,CAAC,CAAA;AAAA,OAAE,CAAC,CACjCC,IAAI,CAAC,GAAG,CAAC,CACTC,OAAO,CAAC,QAAQ,EAAE,UAACC,KAAK,EAAA;AAAA,QAAA,OAAA,GAAA,GAASA,KAAK,CAAClC,WAAW,EAAE,CAAA;AAAA,OAAE,CAAC,CAAA;AAC1DvB,MAAAA,KAAK,CAAC+C,CAAC,CAAC,GAAMI,MAAM,GAAG,GAAA,CAAA;AACzB,KAAA;AAEA;IACA,IAAIJ,CAAC,KAAK,KAAK,EAAEZ,GAAG,GAAGnC,KAAK,CAAC+C,CAAC,CAAC,CAAA;AAC/B;AAAA,SACK,IAAID,OAAO,CAAC9D,OAAO,EAAE+D,CAAC,CAACxB,WAAW,EAAE,CAAC,EACxCvC,OAAO,CAAC0E,gBAAgB,CAACX,CAAC,CAACxB,WAAW,EAAE,CAACoC,SAAS,CAAC,CAAC,CAAC,EAAE,UAAC3C,CAAM,EAAA;AAAA,MAAA,OAC5DhB,KAAK,CAAC+C,CAAC,CAAC,CAAC/B,CAAC,CAAC,CAAA;KACZ,CAAA,CAAA;AACH;SACK,IAAI+B,CAAC,KAAK,yBAAyB,IAAI/C,KAAK,CAAC+C,CAAC,CAAC,CAACa,MAAM,EAAE;AAC3D,MAAA,IAAI,CAACnG,KAAK,EAAE,EAAE;AACZ,QAAA,IAAMoG,QAAQ,GAAGhE,QAAQ,CAACgD,aAAa,CAAC,UAAU,CAAC,CAAA;QACnDgB,QAAQ,CAACrD,SAAS,GAAGR,KAAK,CAAC+C,CAAC,CAAC,CAACa,MAAM,CAAA;AACpC5E,QAAAA,OAAO,CAACW,WAAW,CAACkE,QAAQ,CAAC,CAAA;AAC/B,OAAC,MAAM;QACL7E,OAAO,CAACwB,SAAS,GAAGR,KAAK,CAAC+C,CAAC,CAAC,CAACa,MAAM,CAAA;AACrC,OAAA;AACF,KAAA;AACA;SACK,IAAIb,CAAC,KAAK,WAAW,IAAI/C,KAAK,CAAC+C,CAAC,CAAC,CAACe,eAAe,EAAE;AACtD,MAAA,IAAI,CAACrG,KAAK,EAAE,EAAE;AACZ,QAAA,IAAMoG,SAAQ,GAAGhE,QAAQ,CAACgD,aAAa,CAAC,UAAU,CAAC,CAAA;QACnDgB,SAAQ,CAACrD,SAAS,GAAGR,KAAK,CAAC+C,CAAC,CAAC,CAACe,eAAe,CAAA;AAC7C9E,QAAAA,OAAO,CAACW,WAAW,CAACkE,SAAQ,CAAC,CAAA;AAC/B,OAAC,MAAM;QACL7E,OAAO,CAACwB,SAAS,GAAGR,KAAK,CAAC+C,CAAC,CAAC,CAACe,eAAe,CAAA;AAC9C,OAAA;AACF,KAAA;AACA;AAAA,SACK,IAAI,cAAc,CAACC,IAAI,CAAChB,CAAC,CAAC,EAAE/D,OAAO,CAACqB,YAAY,CAAC,OAAO,EAAEL,KAAK,CAAC+C,CAAC,CAAC,CAAC,CAAA;AACxE;AAAA,SACK,IAAI,OAAO/C,KAAK,CAAC+C,CAAC,CAAC,KAAK,WAAW,EAAE/D,OAAO,CAACqB,YAAY,CAAC0C,CAAC,EAAE/C,KAAK,CAAC+C,CAAC,CAAC,CAAC,CAAA;GAC5E,CAAA;EA1CD,KAAK,IAAMA,CAAC,IAAI/C,KAAK,EAAA;AAAAkD,IAAAA,KAAA,CAAAH,CAAA,CAAA,CAAA;AAAA,GAAA;AAgDrBhE,EAAAA,cAAc,CAACC,OAAO,EAAEC,QAAgB,CAAC,CAAA;AAEzC,EAAA,IAAIkD,GAAG,EAAEA,GAAG,CAACnD,OAAO,CAAC,CAAA;AACrB,EAAA,OAAOA,OAAc,CAAA;AACvB;;ACxTA;AACO,IAAMgF,OAAO,GAAG;;ACCvB;AACaC,IAAAA,IAAI,GAAG,SAAAA,KAACA,KAAgB,EAAA;AAAA,EAAA,OAAKC,UAAU,CAACD,KAAI,EAAE,CAAC,CAAC,CAAA;AAAA,EAAA;IAEhDE,YAAY,GAAG,SAAfA,YAAYA,CAAIC,IAAU,EAAI;AACzC,EAAA,IAAMC,OAAO,GAAGxE,QAAQ,CAACgD,aAAa,CAAC,KAAK,CAAC,CAAA;EAC7CwB,OAAO,CAAC1E,WAAW,CAACyE,IAAI,CAACE,SAAS,CAAC,IAAI,CAAC,CAAC,CAAA;EACzC,OAAOD,OAAO,CAAC7D,SAAS,CAAA;AAC1B,EAAC;AAEM,IAAM+D,SAAS,GAAG,SAAZA,SAASA,GAAiB;AACrC;AACA,EAAA,IAAMC,MAAM,GAAG,OAAOC,IAAI,KAAK,WAAW,CAAA;EAC1C,IAAMC,SAAS,GAAG,OAAOC,MAAM,KAAK,WAAW,GAAG,IAAI,GAAG,KAAK,CAAA;AAC9D,EAAA,OAAQ,OAAOjH,KAAK,KAAK,WAAW,IAAIA,KAAK,CAACD,KAAK,IAAK+G,MAAM,IAAI,CAACE,SAAS,CAAA;AAC9E,CAAC,CAAA;AAED,SAASE,YAAYA,CAACC,IAAuB,EAAEC,IAAU,EAAA;AACvD;AACA,EAAA,OAAO,CAAC,CAACD,IAAI,KAAKA,IAAI,KAAKC,IAAI,IAAIF,YAAY,CAACC,IAAI,CAACE,UAAU,EAAED,IAAI,CAAC,CAAC,CAAA;AACzE,CAAA;AAEA;AACO,IAAME,YAAY,GAAG,SAAfA,YAAYA,CAAIhG,OAAoB,EAAEiG,QAAoB,EAAI;AACzE,EAAA,IAAIC,QAAQ,GAAG,IAAIC,gBAAgB,CAAC,UAAAC,aAAa,EAAG;AAClDA,IAAAA,aAAa,CAAC7F,OAAO,CAAC,UAAA8F,QAAQ,EAAG;AAC/BA,MAAAA,QAAQ,CAACC,YAAY,CAAC/F,OAAO,CAAC,UAAAgG,OAAO,EAAG;AACtC,QAAA,IAAIX,YAAY,CAAC5F,OAAO,EAAEuG,OAAO,CAAC,EAAE;AAClCN,UAAAA,QAAQ,EAAE,CAAA;AACV,UAAA,IAAIC,QAAQ,EAAE;AACZ;YACAA,QAAQ,CAACM,UAAU,EAAE,CAAA;AACrB;AACAN,YAAAA,QAAQ,GAAGO,SAAS,CAAA;AACtB,WAAA;AACF,SAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAC,CAAC,CAAA;AACJ,GAAC,CAAC,CAAA;AACFP,EAAAA,QAAQ,CAACQ,OAAO,CAAC7F,QAAQ,EAAE;AACzB8F,IAAAA,SAAS,EAAE,IAAI;AACfC,IAAAA,OAAO,EAAE,IAAA;AACV,GAAA,CAAC,CAAA;AACF,EAAA,OAAOV,QAAQ,CAAA;AACjB,CAAC,CAAA;AAED;AACO,IAAMW,UAAU,GAAG,SAAbA,UAAUA,CAAIC,MAAc,EAAI;AAC3C,EAAA,IAAIA,MAAM,IAAI,OAAOA,MAAM,KAAK,QAAQ,EACtC,OAAOA,MAAM,CACVtC,OAAO,CAAC,IAAI,EAAE,OAAO,CAAC,CACtBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,MAAM,CAAC,CACrBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CACvBA,OAAO,CAAC,IAAI,EAAE,QAAQ,CAAC,CAAA;AAC5B,EAAA,OAAOsC,MAAM,CAAA;AACf,CAAC,CAAA;IAEYC,YAAY,GAAG,SAAfA,YAAYA,GAAQ;EAC/B,IAAMC,IAAI,6BAA2BhC,OAAS,CAAA;AAC9CpD,EAAAA,OAAO,CAACC,GAAG,CAAA,iBAAA,GACSmF,IAAI,GAAA,uBAAA,EACtB,qBAAqB,EACrB,qBAAqB,EACrB,qBAAqB,EACrB,qBAAqB,EACrB,mCAAmC,EACnC,kBAAkB,CACnB,CAAA;AACH;;ACtEA;AACO,IAAMC,MAAM,GAAqB,IAAIC,GAAG,EAAE;;ACGjD,IAAalE,SAAS,gBAAA,YAAA;EAOpB,SAAAA,SAAAA,CAAYhC,KAAQ,EAAA;AAAA,IAAA,IAAA,CANbA,KAAK,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CACLiB,EAAE,GAAA,KAAA,CAAA,CAAA;IAAA,IACDkF,CAAAA,SAAS,GAAkB,EAAE,CAAA;IAAA,IAC7BC,CAAAA,YAAY,GAAG,KAAK,CAAA;IAAA,IACpBC,CAAAA,aAAa,GAAG,KAAK,CAAA;AAG3B,IAAA,IAAI,CAACrG,KAAK,GAAGA,KAAK,IAAI,EAAE,CAAA;AACxB,IAAA,IAAI,CAACiB,EAAE,GAAG,IAAI,CAACc,QAAQ,EAAE,CAAA;AAC3B,GAAA;AAAC,EAAA,IAAAuE,MAAA,GAAAtE,SAAA,CAAAnE,SAAA,CAAA;EAAAyI,MAAA,CAUDC,QAAQ,GAAR,SAAAA,SAASC,KAAQ,EAAEC,YAAA,EAA6B;AAAA,IAAA,IAA7BA,YAAA,KAAA,KAAA,CAAA,EAAA;AAAAA,MAAAA,YAAA,GAAwB,KAAK,CAAA;AAAA,KAAA;IAC9C,IAAMC,QAAQ,GAAG,OAAOF,KAAK,KAAK,QAAQ,IAAIA,KAAK,KAAK,IAAI,CAAA;AAE5D;AACA,IAAA,IAAIE,QAAQ,IAAI,IAAI,CAACF,KAAK,KAAKf,SAAS,EAAE,IAAI,CAACe,KAAK,GAAA5D,QAAA,CAAQ,EAAA,EAAA,IAAI,CAAC4D,KAAK,EAAKA,KAAK,CAAE,CAAA;AAClF;AAAA,SACK,IAAI,CAACA,KAAK,GAAGA,KAAK,CAAA;AAEvB,IAAA,IAAIC,YAAY,EAAE,IAAI,CAACE,MAAM,EAAE,CAAA;GAChC,CAAA;AAAAL,EAAAA,MAAA,CA2BOM,sBAAsB,GAAtB,SAAAA,yBAAsB;AAAA,IAAA,IAAAC,KAAA,GAAA,IAAA,CAAA;AAC5B;AACA,IAAA,IAAI,gBAAgB,CAAC9C,IAAI,CAAC,IAAI,CAAC+C,UAAU,CAAChI,QAAQ,EAAE,CAAC,EAAE,OAAA;AAEvD;IACAkG,YAAY,CAAC,IAAI,CAAC9C,QAAQ,CAAC,CAAC,CAAC,EAAE,YAAK;MAClC,IAAI,CAAC2E,KAAI,CAACT,YAAY,EAAES,KAAI,CAACE,WAAW,EAAE,CAAA;AAC5C,KAAC,CAAC,CAAA;AACJ,GAAA;AAEA;AAAA,GAAA;AAAAT,EAAAA,MAAA,CACQlE,SAAS,GAAT,SAAAA,YAAS;IACf,IAAI,CAACwE,sBAAsB,EAAE,CAAA;IAC7B,IAAI,CAACI,QAAQ,EAAE,CAAA;GAChB,CAAA;AAAAV,EAAAA,MAAA,CAEOW,WAAW,GAAX,SAAAA,cAAW;IACjB,IAAI,CAACC,UAAU,EAAE,CAAA;GAClB,CAAA;AAAAZ,EAAAA,MAAA,CAEOa,UAAU,GAAV,SAAAA,aAAU;IAChB,IAAI,CAACC,SAAS,EAAE,CAAA;GACjB,CAAA;AAAAd,EAAAA,MAAA,CAEOS,WAAW,GAAX,SAAAA,cAAW;IACjB,IAAI,IAAI,CAACV,aAAa,EAAE,OAAA;IACxB,IAAI,CAACS,UAAU,EAAE,CAAA;IACjB,IAAI,CAACT,aAAa,GAAG,IAAI,CAAA;GAC1B,CAAA;AAAAC,EAAAA,MAAA,CAEMrE,SAAS,GAAT,SAAAA,SAAA,KAAmB,CAAA;AAAAqE,EAAAA,MAAA,CACnBU,QAAQ,GAAR,SAAAA,QAAA,KAAkB,CAAA;AAAAV,EAAAA,MAAA,CAClBY,UAAU,GAAV,SAAAA,UAAA,KAAoB,CAAA;AAAAZ,EAAAA,MAAA,CACpBc,SAAS,GAAT,SAAAA,SAAA,KAAmB,CAAA;AAAAd,EAAAA,MAAA,CACnBQ,UAAU,GAAV,SAAAA,UAAA,KAAoB,CAAA;AAAAR,EAAAA,MAAA,CAEpB7F,MAAM,GAAN,SAAAA,MAAO4G,CAAAA,OAAa,EAAA,EAAuB;AAElD,wCAAA;AAAAf,EAAAA,MAAA,CACOK,MAAM,GAAN,SAAAA,MAAAA,CAAOA,QAAY,EAAA;AAAA,IAAA,IAAAW,MAAA,GAAA,IAAA,CAAA;IACxB,IAAI,CAAClB,YAAY,GAAG,IAAI,CAAA;IACxB,IAAI,CAACa,WAAW,EAAE,CAAA;AAClB;AACA,IAAA,IAAMM,WAAW,GAAA7E,EAAAA,CAAAA,MAAA,CAAO,IAAI,CAACR,QAAQ,CAAC,CAAA;AAEtC;IACA,IAAI,CAACiE,SAAS,GAAG,EAAE,CAAA;AAEnB,IAAA,IAAIrF,EAAE,GAAG,IAAI,CAACL,MAAM,CAACkG,QAAM,CAAC,CAAA;AAC5B7F,IAAAA,EAAE,GAAGpB,OAAO,CAACoB,EAAE,CAAC,CAAA;IAChB,IAAI,CAACoB,QAAQ,GAAGpB,EAAS,CAAA;AAEzB;AACA;AAEA;AACA,IAAA,IAAM5C,MAAM,GAAGqJ,WAAW,CAAC,CAAC,CAAC,CAACrG,aAA4B,CAAA;AAE1D;IACA,IAAI,CAAChD,MAAM,EAAE0C,OAAO,CAACgB,IAAI,CAAC,kDAAkD,CAAC,CAAA;AAE7E;AACA,IAAA,IAAI,CAACM,QAAQ,CAAC3C,OAAO,CAAC,UAACC,KAAkB,EAAI;AAC3C,MAAA,IAAItB,MAAM,EAAEA,MAAM,CAACsJ,YAAY,CAAChI,KAAK,EAAE+H,WAAW,CAAC,CAAC,CAAC,CAAC,CAAA;AACxD,KAAC,CAAC,CAAA;AAEF;AACAA,IAAAA,WAAW,CAAChI,OAAO,CAAC,UAACC,KAAkB,EAAI;AACzC;MACA,IAAI,CAAC8H,MAAI,CAACpF,QAAQ,CAACuF,QAAQ,CAACjI,KAAK,CAAC,EAAE;QAClCA,KAAK,CAACkI,MAAM,EAAE,CAAA;AACd;AACAlI,QAAAA,KAAK,GAAG,IAAI,CAAA;AACd,OAAA;AACF,KAAC,CAAC,CAAA;AAEF;IACA,IAAI,CAACoH,sBAAsB,EAAE,CAAA;AAE7B;AACAjJ,IAAAA,IAAI,CAAC,YAAK;MACR2J,MAAI,CAAClB,YAAY,GAAG,KAAK,CAAA;MACzB,IAAI,CAACkB,MAAI,CAACpF,QAAQ,CAAC,CAAC,CAAC,CAACyF,WAAW,EAAEL,MAAI,CAACP,WAAW,EAAE,CAAA,KAChDO,MAAI,CAACH,UAAU,EAAE,CAAA;AACxB,KAAC,CAAC,CAAA;GACH,CAAA;AAAAb,EAAAA,MAAA,CAEOvE,QAAQ,GAAR,SAAAA,QAAA,KAAkB,CAAA;EAAA,OAAA6F,YAAA,CAAA5F,SAAA,EAAA,CAAA;IAAA6F,GAAA,EAAA,SAAA;IAAAC,GAAA,EA/H1B,SAAAA,GAAAA,GAAkB;AAChB,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;AAAC,GAAA,EAAA;IAAAD,GAAA,EAAA,OAAA;IAAAC,GAAA,EAiBD,SAAAA,GAAAA,GAAS;AACP,MAAA,OAAO7B,MAAM,CAAC6B,GAAG,CAAC,IAAI,CAAC7G,EAAE,CAAM,CAAA;KAChC;AAAA8G,IAAAA,GAAA,EAND,SAAAA,GAAUvB,CAAAA,KAAQ,EAAA;MAChBP,MAAM,CAAC8B,GAAG,CAAC,IAAI,CAAC9G,EAAE,EAAEuF,KAAK,CAAC,CAAA;AAC5B,KAAA;AAAC,GAAA,EAAA;IAAAqB,GAAA,EAAA,WAAA;AAAAE,IAAAA,GAAA,EAMD,SAAAA,GAAcvB,CAAAA,KAAQ,EAAA;MACpB,IAAI,IAAI,CAACA,KAAK,KAAKf,SAAS,EAAE,IAAI,CAACe,KAAK,GAAGA,KAAK,CAAA;AAClD,KAAA;AAEA;AAAA,GAAA,EAAA;IAAAqB,GAAA,EAAA,UAAA;IAAAC,GAAA,EACA,SAAAA,GAAAA,GAAmB;AACjB,MAAA,OAAO,IAAI,CAAC3B,SAAS,IAAI,EAAE,CAAA;KAC5B;AAAA4B,IAAAA,GAAA,EAED,SAAAA,GAAoB7F,CAAAA,QAAuB,EAAA;AAAA,MAAA,IAAA8F,MAAA,GAAA,IAAA,CAAA;AACzC,MAAA,IAAI,CAAC7I,KAAK,CAACC,OAAO,CAAC8C,QAAQ,CAAC,EAAEA,QAAQ,GAAG,CAACA,QAAQ,CAAC,CAAA;AAEnDA,MAAAA,QAAQ,CAAC3C,OAAO,CAAC,UAAAP,OAAO,EAAG;AACzBgJ,QAAAA,MAAI,CAAC7B,SAAS,CAACxD,IAAI,CAAC3D,OAAO,CAAC,CAAA;AAC9B,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,CAAA,EAAA,CAAA;IAAA6I,GAAA,EAAA,SAAA;IAAAC,GAAA,EA1CM,SAAAA,GAAAA,GAAkB;AACvB,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA;;ACjBkD,IAE/CG,UAAW,0BAAAC,IAAA,EAAA;AAAA,EAAA,SAAAD,UAAA,GAAA;AAAA,IAAA,OAAAC,IAAA,CAAAC,KAAA,CAAA,IAAA,EAAA1F,SAAA,CAAA,IAAA,IAAA,CAAA;AAAA,GAAA;EAAA2F,cAAA,CAAAH,UAAA,EAAAC,IAAA,CAAA,CAAA;AAAA,EAAA,IAAA5B,MAAA,GAAA2B,UAAA,CAAApK,SAAA,CAAA;AAAAyI,EAAAA,MAAA,CACfxH,QAAQ,GAAR,SAAAA,WAAQ;IACN,IAAIuJ,MAAM,GAAG,EAAE,CAAA;AACf,IAAA,KAAA,IAAAC,SAAA,GAAAC,+BAAA,CAA2B,IAAI,CAAA,EAAAC,KAAA,EAAA,CAAA,CAAAA,KAAA,GAAAF,SAAA,EAAA,EAAAG,IAAA,GAAE;AAAA,MAAA,IAAAC,WAAA,GAAAF,KAAA,CAAAjI,KAAA;AAArBsH,QAAAA,GAAG,GAAAa,WAAA,CAAA,CAAA,CAAA;AAAEnI,QAAAA,KAAK,GAAAmI,WAAA,CAAA,CAAA,CAAA,CAAA;AAAWL,MAAAA,MAAM,IAAQR,GAAAA,GAAAA,GAAG,GAAKtH,KAAAA,GAAAA,KAAK,GAAG,IAAA,CAAA;AAAA,KAAA;AAC/D,IAAA,OAAO8H,MAAM,CAACM,IAAI,EAAE,CAAA;GACrB,CAAA;AAAA,EAAA,OAAAV,UAAA,CAAA;AAAA,CAAAW,eAAAA,gBAAA,CALsB1C,GAAG,CAAA,CAAA,CAAA;AAQf2C,IAAAA,MAAO,0BAAAC,UAAA,EAAA;AAAA,EAAA,SAAAD,MAAA,GAAA;AAAA,IAAA,OAAAC,UAAA,CAAAX,KAAA,CAAA,IAAA,EAAA1F,SAAA,CAAA,IAAA,IAAA,CAAA;AAAA,GAAA;EAAA2F,cAAA,CAAAS,MAAA,EAAAC,UAAA,CAAA,CAAA;AAAAD,EAAAA,MAAA,CACXE,GAAG,GAAV,SAAAA,GAAAA,CAAWC,IAAY,EAAA;IACrB,IAAMC,GAAG,GAAG,8CAA8C,CAAA;AAE1D;IACA,IAAMC,IAAI,GAAkB,EAAE,CAAA;IAC9B,IAAMC,MAAM,GAAkB,EAAE,CAAA;AAChC,IAAA,IAAMjJ,UAAU,GAAG;AACjBkJ,MAAAA,IAAI,EAAE,IAAInB,UAAU,EAAE;MACtBe,IAAI,EAAE,IAAIf,UAAU,EAAE;KACvB,CAAA;AAED;IACA,IAAI,OAAOpI,QAAQ,KAAK,WAAW,IAAIA,QAAQ,CAACqJ,IAAI,EAAE;MACpD,IAAIjK,QAAQ,GAAkB,EAAE,CAAA;AAChCA,MAAAA,QAAQ,GAAG,EAAE,CAACI,KAAK,CAACC,IAAI,CAACO,QAAQ,CAACqJ,IAAI,CAACjK,QAAQ,CAAC,CAAA;AAChD,MAAA,KAAK,IAAIT,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGS,QAAQ,CAACR,MAAM,EAAED,CAAC,EAAE,EAAE;AACxC;AACA,QAAA,IAAI0K,IAAI,CAAClG,OAAO,CAAC/D,QAAQ,CAACT,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE;AACpC0K,UAAAA,IAAI,CAACvG,IAAI,CAAC1D,QAAQ,CAACT,CAAC,CAAC,CAAC,CAAA;AACxB,SAAA;AACF,OAAA;AACF,KAAA;AAEA,IAAA,IAAI6K,MAAY,CAAA;IAAA,IAAAnG,KAAA,GAAAA,SAAAA,KAAAA,GAC2B;MAAA,IAAAoG,WAAA,EAAAC,YAAA,CAAA;AACzC,MAAA,IAAMC,KAAK,GAAGH,MAAM,CAAC,CAAC,CAAC,CAAA;AACvB,MAAA,IAAII,MAAM,GAAGJ,MAAM,CAAC,CAAC,CAAC,CAAA;MAEtB,IAAMK,OAAO,GAAG,2BAA2B,CAAA;MAC3C,IAAMC,OAAO,GAAG,2BAA2B,CAAA;MAC3C,IAAMC,OAAO,GAAG,mBAAmB,CAAA;MACnC,IAAIC,GAAG,GAAG,IAAI,CAAA;AAEd;AACA,MAAA,CAAAP,WAAA,GAAAN,IAAI,CAACvF,KAAK,CAACiG,OAAO,CAAC,KAAA,IAAA,IAAnBJ,WAAA,CAAqB/J,OAAO,CAAC,UAAAgD,CAAC,EAAG;QAC/BkH,MAAM,GAAGA,MAAM,CAACjG,OAAO,CAACjB,CAAC,EAAE,EAAE,CAAC,CAAA;QAC9B,OAAO,CAACsH,GAAG,GAAGD,OAAO,CAACE,IAAI,CAACvH,CAAC,CAAC,MAAM,IAAI,EAAE;AACvCrC,UAAAA,UAAU,CAACkJ,IAAI,CAACrB,GAAG,CAAC8B,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AACrC,SAAA;AACF,OAAC,CAAC,CAAA;AACF;AACA,MAAA,CAAAN,YAAA,GAAAP,IAAI,CAACvF,KAAK,CAACkG,OAAO,CAAC,KAAA,IAAA,IAAnBJ,YAAA,CAAqBhK,OAAO,CAAC,UAAAwK,CAAC,EAAG;QAC/BN,MAAM,GAAGA,MAAM,CAACjG,OAAO,CAACuG,CAAC,EAAE,EAAE,CAAC,CAAA;QAC9B,OAAO,CAACF,GAAG,GAAGD,OAAO,CAACE,IAAI,CAACC,CAAC,CAAC,MAAM,IAAI,EAAE;AACvC7J,UAAAA,UAAU,CAAC8I,IAAI,CAACjB,GAAG,CAAC8B,GAAG,CAAC,CAAC,CAAC,EAAEA,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AACrC,SAAA;AACF,OAAC,CAAC,CAAA;AAEF,MAAA,IAAMG,MAAM,GAAGR,KAAK,CAAC/B,QAAQ,CAAC,uBAAuB,CAAC,CAAA;AAEtD;AACA,MAAA,IAAIuC,MAAM,IAAI,CAACd,IAAI,CAACzB,QAAQ,CAACgC,MAAM,CAAC,EAAEP,IAAI,CAACvG,IAAI,CAAC8G,MAAM,CAAC,CAAA,KAClD,IAAI,CAACO,MAAM,IAAI,CAACb,MAAM,CAAC1B,QAAQ,CAACgC,MAAM,CAAC,EAAEN,MAAM,CAACxG,IAAI,CAAC8G,MAAM,CAAC,CAAA;KAClE,CAAA;IA7BD,OAAO,CAACJ,MAAM,GAAGJ,GAAG,CAACa,IAAI,CAACd,IAAI,CAAC,MAAM,IAAI,EAAA;MAAA9F,KAAA,EAAA,CAAA;AAAA,KAAA;AA+BzC;IACA,IAAM+G,SAAS,GAAGjB,IAAI,CAACxF,OAAO,CAACyF,GAAG,EAAE,EAAE,CAAC,CAAA;IACvC,OAAO;AACLD,MAAAA,IAAI,EAAEiB,SAAS;AACff,MAAAA,IAAI,EAAEA,IAA2B;AACjCC,MAAAA,MAAM,EAAEA,MAA6B;AACrCjJ,MAAAA,UAAU,EAAVA,UAAAA;KACD,CAAA;GACF,CAAA;AAAA,EAAA,IAAAgK,OAAA,GAAArB,MAAA,CAAAhL,SAAA,CAAA;AAAAqM,EAAAA,OAAA,CAEDlD,QAAQ,GAAR,SAAAA,WAAQ;AAAA,IAAA,IAAAH,KAAA,GAAA,IAAA,CAAA;IACN,IAAI,CAAC7G,KAAK,CAACf,QAAQ,CAACM,OAAO,CAAC,UAACP,OAAoB,EAAI;AACnD;AACA,MAAA,IAAI,EAAEA,OAAO,YAAYmL,WAAW,CAAC,EAAE,OAAA;AAEvC,MAAA,IAAMjM,MAAM,GAAG2I,KAAI,CAAC7G,KAAK,CAACmJ,MAAM,GAAGtJ,QAAQ,CAACmJ,IAAI,GAAGnJ,QAAQ,CAACqJ,IAAI,CAAA;AAChE,MAAA,IAAM7G,GAAG,GAAGrD,OAAO,CAACsC,OAAO,CAAA;MAC3B,IAAIrB,KAAK,GAAa,EAAE,CAAA;AAExB;AACAA,MAAAA,KAAK,CAAC0C,IAAI,CAAC3D,OAAO,CAACoL,SAAmB,CAAC,CAAA;AAEvC;AACA,MAAA,KAAK,IAAIC,IAAI,GAAG,CAAC,EAAEA,IAAI,GAAGrL,OAAO,CAACkB,UAAU,CAACzB,MAAM,EAAE4L,IAAI,EAAE,EAAE;QAAA,IAAAC,qBAAA,EAAAC,sBAAA,CAAA;QAC3DtK,KAAK,CAAC0C,IAAI,CAAA2H,CAAAA,qBAAA,GAACtL,OAAO,CAACkB,UAAU,CAACsK,IAAI,CAACH,IAAI,CAAC,qBAA7BC,qBAAA,CAA+BhK,IAAI,CAACiB,WAAW,EAAY,CAAC,CAAA;QACvEtB,KAAK,CAAC0C,IAAI,CAAA4H,CAAAA,sBAAA,GAACvL,OAAO,CAACkB,UAAU,CAACsK,IAAI,CAACH,IAAI,CAAC,qBAA7BE,sBAAA,CAA+BhK,KAAK,CAACgB,WAAW,EAAY,CAAC,CAAA;AAC1E,OAAA;AAEA;AACA,MAAA,IAAIc,GAAG,KAAK,MAAM,IAAIA,GAAG,KAAK,MAAM,EAAE;QACpC,IAAMoI,OAAO,GAAG5K,QAAQ,CAAC6K,oBAAoB,CAACrI,GAAG,CAAC,CAAC,CAAC,CAAC,CAAA;AACrD,QAAA,KAAK,IAAIgI,KAAI,GAAG,CAAC,EAAEA,KAAI,GAAGpK,KAAK,CAACxB,MAAM,EAAE4L,KAAI,IAAI,CAAC,EAAE;AACjDI,UAAAA,OAAO,CAACpK,YAAY,CAACJ,KAAK,CAACoK,KAAI,CAAC,EAAEpK,KAAK,CAACoK,KAAI,GAAG,CAAC,CAAC,CAAC,CAAA;AACpD,SAAA;AACA,QAAA,OAAA;AACF,OAAC,MAAM,IAAIhI,GAAG,KAAK,OAAO,EAAE;AAC1B,QAAA,IAAMsI,SAAS,GAAG9K,QAAQ,CAAC6K,oBAAoB,CAAC,OAAO,CAAuC,CAAA;AAC9F,QAAA,IAAIC,SAAS,CAAClM,MAAM,GAAG,CAAC,EAAE;UACxB,IAAMuC,CAAC,GAAGhC,OAA2B,CAAA;UACrC2L,SAAS,CAAC,CAAC,CAAC,CAACC,IAAI,GAAG5J,CAAC,CAAC4J,IAAI,CAAA;AAC5B,SAAC,MAAM;UACL,IAAMC,QAAQ,GAAGtI,CAAC,CAAC,OAAO,EAAE,IAAI,EAAEvD,OAAO,CAACwB,SAAS,CAAqB,CAAA;UACxEzB,cAAc,CAACb,MAAM,EAAE,CAAC2M,QAAQ,CAAQ,CAAC,CAAA;AAC3C,SAAA;AACA,QAAA,OAAA;AACF,OAAA;AAEA;MACA,IAAIC,MAAM,GAAG,KAAK,CAAA;AAClB7K,MAAAA,KAAK,GAAGA,KAAK,CAAC8K,IAAI,EAAE,CAAA;AAEpB,MAAA,IAAMjK,EAAE,GAAGjB,QAAQ,CAAC6K,oBAAoB,CAACrI,GAAG,CAA6B,CAAA;AAEzE,MAAA,KAAK,IAAI7D,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGsC,EAAE,CAACrC,MAAM,EAAED,CAAC,EAAE,EAAE;QAClC,IAAIwM,MAAM,GAAa,EAAE,CAAA;AAEzB;QACAA,MAAM,CAACrI,IAAI,CAAC7B,EAAE,CAACtC,CAAC,CAAC,CAAC4L,SAAmB,CAAC,CAAA;AAEtC,QAAA,KAAK,IAAIC,MAAI,GAAG,CAAC,EAAEA,MAAI,GAAGvJ,EAAE,CAACtC,CAAC,CAAC,CAAC0B,UAAU,CAACzB,MAAM,EAAE4L,MAAI,EAAE,EAAE;UAAA,IAAAY,qBAAA,EAAAC,sBAAA,CAAA;UACzDF,MAAM,CAACrI,IAAI,CAAA,CAAAsI,qBAAA,GAACnK,EAAE,CAACtC,CAAC,CAAC,CAAC0B,UAAU,CAACsK,IAAI,CAACH,MAAI,CAAC,KAAA,IAAA,GAAA,KAAA,CAAA,GAA3BY,qBAAA,CAA6B3K,IAAI,CAACiB,WAAW,EAAY,CAAC,CAAA;UACtEyJ,MAAM,CAACrI,IAAI,CAAA,CAAAuI,sBAAA,GAACpK,EAAE,CAACtC,CAAC,CAAC,CAAC0B,UAAU,CAACsK,IAAI,CAACH,MAAI,CAAC,KAAA,IAAA,GAAA,KAAA,CAAA,GAA3Ba,sBAAA,CAA6B3K,KAAK,CAACgB,WAAW,EAAY,CAAC,CAAA;AACzE,SAAA;AACAyJ,QAAAA,MAAM,GAAGA,MAAM,CAACD,IAAI,EAAE,CAAA;AAEtB,QAAA,IAAI9K,KAAK,CAACxB,MAAM,GAAG,CAAC,IAAIuM,MAAM,CAACvM,MAAM,GAAG,CAAC,IAAI0M,IAAI,CAACC,SAAS,CAACnL,KAAK,CAAC,KAAKkL,IAAI,CAACC,SAAS,CAACJ,MAAM,CAAC,EAAEF,MAAM,GAAG,IAAI,CAAA;AAC9G,OAAA;AAEA;AACA,MAAA,IAAI,CAACA,MAAM,EAAE/L,cAAc,CAACb,MAAM,EAAE,CAACc,OAAO,CAAQ,CAAC,CAAA;AACvD,KAAC,CAAC,CAAA;GACH,CAAA;AAAAkL,EAAAA,OAAA,CAEDzJ,MAAM,GAAN,SAAAA,SAAM;IACJ,IAAM4K,SAAS,GAAG,IAAI,CAACrL,KAAK,CAACmJ,MAAM,GAAG,QAAQ,GAAG,MAAM,CAAA;IAEvD,IAAI1L,KAAK,EAAE,EAAE,OAAO8E,CAAC,CAAC,QAAQ,EAAE;AAAE,MAAA,UAAU,EAAE,IAAI;AAAE,MAAA,gBAAgB,EAAE8I,SAAAA;KAAW,EAAE,IAAI,CAACrL,KAAK,CAACf,QAAQ,CAAC,CAAA,KAClG,OAAO,EAAE,CAAA;GACf,CAAA;AAAA,EAAA,OAAA4J,MAAA,CAAA;AAAA,CAAA,CAtIyB7G,SAAS;;;;;ACCrC;;;;;AAKG;AACUsJ,IAAAA,GAAI,0BAAAxC,UAAA,EAAA;EACf,SAAAwC,GAAAA,CAAYtL,KAAY,EAAA;AAAA,IAAA,IAAA6G,KAAA,CAAA;AACtBA,IAAAA,KAAA,GAAAiC,UAAA,CAAAxJ,IAAA,CAAA,IAAA,EAAMU,KAAK,CAAC,IAAA,IAAA,CAAA;AAEZ,IAAA,IAAQuL,GAAG,GAAUvL,KAAK,CAAlBuL,GAAG;MAAE1D,GAAG,GAAK7H,KAAK,CAAb6H,GAAG,CAAA;AAEhB;AACAhB,IAAAA,KAAA,CAAK5F,EAAE,GAAM5C,SAAS,CAACkN,GAAG,CAAC,GAAA,GAAA,GAAIlN,SAAS,CAAC8M,IAAI,CAACC,SAAS,CAACpL,KAAK,CAAC,CAAG,CAAA;AACjE,IAAA,IAAI6H,GAAG,EAAEhB,KAAA,CAAK5F,EAAE,aAAW4G,GAAK,CAAA;AAEhC;IACA,IAAI,CAAChB,KAAA,CAAKL,KAAK,EAAEK,KAAA,CAAKN,QAAQ,CAAC;AAAEiF,MAAAA,QAAQ,EAAE,KAAK;AAAEC,MAAAA,KAAK,EAAEhG,SAAAA;AAAS,KAAE,CAAC,CAAA;AAAA,IAAA,OAAAoB,KAAA,CAAA;AACvE,GAAA;EAACuB,cAAA,CAAAkD,GAAA,EAAAxC,UAAA,CAAA,CAAA;AAAA,EAAA,IAAAxC,MAAA,GAAAgF,GAAA,CAAAzN,SAAA,CAAA;AAAAyI,EAAAA,MAAA,CAEDU,QAAQ,GAAR,SAAAA,WAAQ;AAAA,IAAA,IAAAM,MAAA,GAAA,IAAA,CAAA;AACN,IAAA,IAAAoE,WAAA,GAAkE,IAAI,CAAC1L,KAAK,CAAA;MAAA2L,gBAAA,GAAAD,WAAA,CAApEE,IAAI,CAAA;AAAJA,MAAAA,IAAI,GAAAD,gBAAA,KAAG,KAAA,CAAA,GAAA,IAAI,GAAAA,gBAAA,CAAA;MAAsCE,IAAI,GAAAC,6BAAA,CAAAJ,WAAA,EAAAK,WAAA,EAAA;IAE7D,IAAI,OAAOH,IAAI,KAAK,SAAS,IAAIA,IAAI,KAAK,KAAK,EAAE,OAAA;IAEjD,IAAM1G,QAAQ,GAAG,IAAI8G,oBAAoB,CACvC,UAACC,OAAO,EAAE/G,QAAQ,EAAI;AACpB+G,MAAAA,OAAO,CAAC1M,OAAO,CAAC,UAAA2M,KAAK,EAAG;QACtB,IAAIA,KAAK,CAACC,cAAc,EAAE;UACxBjH,QAAQ,CAACM,UAAU,EAAE,CAAA;AACrB8B,UAAAA,MAAI,CAACd,KAAK,CAACiF,KAAK,GAAGlJ,CAAC,CAAC,KAAK,EAAAK,QAAA,CAAOiJ,EAAAA,EAAAA,IAAI,CAAE,CAAqB,CAAA;AAC5D,UAAA,IAAIvE,MAAI,CAACd,KAAK,CAACiF,KAAK,CAACW,QAAQ,EAAE;AAC7B9E,YAAAA,MAAI,CAACd,KAAK,CAACgF,QAAQ,GAAG,IAAI,CAAA;YAC1BlE,MAAI,CAACX,MAAM,EAAE,CAAA;AACf,WAAC,MAAM;AACLW,YAAAA,MAAI,CAACd,KAAK,CAACiF,KAAK,CAACY,MAAM,GAAG,YAAK;AAC7B/E,cAAAA,MAAI,CAACd,KAAK,CAACgF,QAAQ,GAAG,IAAI,CAAA;cAC1BlE,MAAI,CAACX,MAAM,EAAE,CAAA;aACd,CAAA;AACH,WAAA;AACF,SAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAC,EACD;AAAE2F,MAAAA,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAA;AAAG,KAAA,CACtB,CAAA;IACDpH,QAAQ,CAACQ,OAAO,CAAC,IAAI,CAACxD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;GACnC,CAAA;AAAAoE,EAAAA,MAAA,CACD7F,MAAM,GAAN,SAAAA,SAAM;AACJ,IAAA,IAAA8L,YAAA,GAAuE,IAAI,CAACvM,KAAK,CAAA;MAAzEuL,GAAG,GAAAgB,YAAA,CAAHhB,GAAG,CAAA;MAAEiB,WAAW,GAAAD,YAAA,CAAXC,WAAW,CAAA;MAAUC,iBAAA,GAAAF,YAAA,CAAEX,IAAI,CAAA;AAAJA,MAAAA,IAAI,GAAAa,iBAAA,KAAG,KAAA,CAAA,GAAA,IAAI,GAAAA,iBAAA,CAAA;MAAeZ,IAAI,GAAAC,6BAAA,CAAAS,YAAA,EAAAG,YAAA,EAAA;AAElE;IACA,IAAI,OAAOd,IAAI,KAAK,SAAS,IAAIA,IAAI,KAAK,KAAK,EAAE;MAC/C,IAAI,CAACpF,KAAK,CAACiF,KAAK,GAAGlJ,CAAC,CAAC,KAAK,EAAAK,QAAA,CAAA;AAAI2I,QAAAA,GAAG,EAAHA,GAAAA;OAAQM,EAAAA,IAAI,CAAE,CAAqB,CAAA;AACjE,MAAA,OAAO,IAAI,CAACrF,KAAK,CAACiF,KAAK,CAAA;AACzB,KAAA;AAEA;AACA,IAAA,IAAI,IAAI,CAACjF,KAAK,CAACgF,QAAQ,EAAE;AACvB,MAAA,OAAO,IAAI,CAAChF,KAAK,CAACiF,KAAK,CAAA;AACvB;KACD,MAAM,IAAIe,WAAW,IAAI,OAAOA,WAAW,KAAK,QAAQ,EAAE;AACzD,MAAA,OAAOjK,CAAC,CAAC,KAAK,EAAAK,QAAA,CAAA;AAAI2I,QAAAA,GAAG,EAAEiB,WAAAA;OAAgBX,EAAAA,IAAI,CAAE,CAAC,CAAA;AAC9C;KACD,MAAM,IAAIW,WAAW,IAAI,OAAOA,WAAW,KAAK,UAAU,EAAE;MAC3D,OAAOA,WAAW,EAAE,CAAA;AACtB,KAAC,MAAM;AACL;MACA,IAAMG,KAAK,GAAwB,EAAE,CAAA;MACrC,IAAId,IAAI,CAACe,KAAK,EAAED,KAAK,CAACC,KAAK,GAAMf,IAAI,CAACe,KAAK,GAAI,IAAA,CAAA;MAC/C,IAAIf,IAAI,CAACgB,MAAM,EAAEF,KAAK,CAACE,MAAM,GAAMhB,IAAI,CAACgB,MAAM,GAAI,IAAA,CAAA;AAClD,MAAA,IAA0BC,MAAM,GAAAhB,6BAAA,CAAKD,IAAI,EAAAkB,YAAA,EAAA;AACzC,MAAA,OAAOxK,CAAC,CAAC,KAAK,EAAAK,QAAA,CAAA;AAAI+J,QAAAA,KAAK,EAALA,KAAAA;OAAUG,EAAAA,MAAM,CAAE,CAAC,CAAA;AACvC,KAAA;GACD,CAAA;AAAA,EAAA,OAAAxB,GAAA,CAAA;AAAA,CAAA,CAnEsBtJ,SAAgB;;IClB5BgL,QAAQ,GAAG,SAAXA,QAAQA,CAAIhN,KAAU,EAAI;EACrC,OAAOA,KAAK,CAACf,QAAQ,CAAA;AACvB;;;ACWA;;;;AAIG;AACUgO,IAAAA,MAAK,0BAAAnE,UAAA,EAAA;AAAA,EAAA,SAAAmE,IAAA,GAAA;AAAA,IAAA,OAAAnE,UAAA,CAAAX,KAAA,CAAA,IAAA,EAAA1F,SAAA,CAAA,IAAA,IAAA,CAAA;AAAA,GAAA;EAAA2F,cAAA,CAAA6E,IAAA,EAAAnE,UAAA,CAAA,CAAA;AAAA,EAAA,IAAAxC,MAAA,GAAA2G,IAAA,CAAApP,SAAA,CAAA;AAAAyI,EAAAA,MAAA,CAChB4G,eAAe,GAAf,SAAAA,kBAAe;AAAA,IAAA,IAAArG,KAAA,GAAA,IAAA,CAAA;IACb,IAAI,CAAC3E,QAAQ,CAAC,CAAC,CAAC,CAACwB,gBAAgB,CAAC,WAAW,EAAE,YAAA;AAAA,MAAA,OAAMmD,KAAI,CAACsG,WAAW,EAAE,CAAA;KAAE,EAAA;AAAEC,MAAAA,IAAI,EAAE,IAAA;AAAM,KAAA,CAAC,CAAA;GACzF,CAAA;AAAA9G,EAAAA,MAAA,CAED+G,iBAAiB,GAAjB,SAAAA,oBAAiB;AAAA,IAAA,IAAA/F,MAAA,GAAA,IAAA,CAAA;IACf,IAAMpC,QAAQ,GAAG,IAAI8G,oBAAoB,CACvC,UAACC,OAAO,EAAE/G,QAAQ,EAAI;AACpB+G,MAAAA,OAAO,CAAC1M,OAAO,CAAC,UAAA2M,KAAK,EAAG;QACtB,IAAIA,KAAK,CAACC,cAAc,EAAE;UACxBjH,QAAQ,CAACM,UAAU,EAAE,CAAA;UACrB8B,MAAI,CAAC6F,WAAW,EAAE,CAAA;AACpB,SAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAC,EACD;AAAEb,MAAAA,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAA;AAAG,KAAA,CACtB,CAAA;IACDpH,QAAQ,CAACQ,OAAO,CAAC,IAAI,CAACxD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;GACnC,CAAA;AAAAoE,EAAAA,MAAA,CAED6G,WAAW,GAAX,SAAAA,cAAW;IACT,IAAIG,gBAAgB,GAAG,KAAK,CAAA;AAE5B;AACA,IAAA,IAAMC,KAAK,GAAG1N,QAAQ,CAAC6K,oBAAoB,CAAC,MAAM,CAAC,CAAA;AACnD,IAAA,KAAK,IAAIlM,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG+O,KAAK,CAAC9O,MAAM,EAAED,CAAC,EAAE,EAAE;AACrC;MACA,IAAI+O,KAAK,CAAC/O,CAAC,CAAC,CAACgP,YAAY,CAAC,KAAK,CAAC,KAAK,UAAU,IAAID,KAAK,CAAC/O,CAAC,CAAC,CAACgP,YAAY,CAAC,MAAM,CAAC,KAAK,IAAI,CAACxN,KAAK,CAACyN,IAAI,EAAE;AACpGH,QAAAA,gBAAgB,GAAG,IAAI,CAAA;AACzB,OAAA;AACF,KAAA;IAEA,IAAI,CAACA,gBAAgB,EAAE;AACrB,MAAA,IAAMI,QAAQ,GAAGnL,CAAC,CAAC,MAAM,EAAE;AAAEoL,QAAAA,GAAG,EAAE,UAAU;AAAEF,QAAAA,IAAI,EAAE,IAAI,CAACzN,KAAK,CAACyN,IAAI;AAAEG,QAAAA,EAAE,EAAE,UAAA;AAAY,OAAA,CAAgB,CAAA;AACrG/N,MAAAA,QAAQ,CAACqJ,IAAI,CAACvJ,WAAW,CAAC+N,QAAQ,CAAC,CAAA;AACrC,KAAA;GACD,CAAA;AAAApH,EAAAA,MAAA,CAEDU,QAAQ,GAAR,SAAAA,WAAQ;AACN,IAAA,IAAA0E,WAAA,GAAoD,IAAI,CAAC1L,KAAK;MAAtDyN,IAAI,GAAA/B,WAAA,CAAJ+B,IAAI;MAAEC,QAAQ,GAAAhC,WAAA,CAARgC,QAAQ;MAAAG,iBAAA,GAAAnC,WAAA,CAAEoC,KAAK;AAALA,MAAAA,KAAK,GAAAD,iBAAA,KAAG,KAAA,CAAA,GAAA,CAAC,GAAAA,iBAAA;MAAAE,gBAAA,GAAArC,WAAA,CAAEsC,IAAI;AAAJA,MAAAA,IAAI,GAAAD,gBAAA,KAAG,KAAA,CAAA,GAAA,KAAK,GAAAA,gBAAA,CAAA;AAE/C,IAAA,IAAIC,IAAI,EACN,IAAI,CAAC9L,QAAQ,CAAC,CAAC,CAAC,CAACwB,gBAAgB,CAAC,OAAO,EAAE,UAAC1C,CAAQ,EAAI;MACtDA,CAAC,CAACiN,cAAc,EAAE,CAAA;AAClB,MAAA,IAAMC,MAAM,GAAGlN,CAAC,CAACkN,MAAyB,CAAA;MAC1C,IAAIA,MAAM,CAACT,IAAI,KAAK5N,QAAQ,CAACsO,QAAQ,EAAExJ,MAAM,CAACyJ,OAAO,CAACJ,IAAI,EAAE,CAAA,KACvDrJ,MAAM,CAAC0J,QAAQ,CAACZ,IAAI,GAAGS,MAAM,CAACT,IAAI,CAAA;AACzC,KAAC,CAAC,CAAA;AAEJ,IAAA,IAAIK,KAAK,GAAG,CAAC,EACX,IAAI,CAAC5L,QAAQ,CAAC,CAAC,CAAC,CAACwB,gBAAgB,CAAC,OAAO,EAAE,UAAC1C,CAAQ,EAAI;MACtDA,CAAC,CAACiN,cAAc,EAAE,CAAA;AAClB/J,MAAAA,UAAU,CAAC,YAAA;AAAA,QAAA,OAAOS,MAAM,CAAC0J,QAAQ,CAACZ,IAAI,GAAGA,IAAI,CAAA;OAAC,EAAEK,KAAK,CAAC,CAAA;AACxD,KAAC,CAAC,CAAA;AAEJ,IAAA,IAAIJ,QAAQ,EAAE;MACZ,IAAIA,QAAQ,KAAK,OAAO,EAAE,IAAI,CAACR,eAAe,EAAE,CAAA,KAC3C,IAAIQ,QAAQ,KAAK,SAAS,EAAE,IAAI,CAACL,iBAAiB,EAAE,CAAA,KACpD,IAAI,CAACF,WAAW,EAAE,CAAA;AACzB,KAAA;GACD,CAAA;AAAA7G,EAAAA,MAAA,CAED7F,MAAM,GAAN,SAAAA,SAAM;AACJ;AACA,IAAA,IAAA8L,YAAA,GAAmD,IAAI,CAACvM,KAAK,CAAA;MAArDf,QAAQ,GAAAsN,YAAA,CAARtN,QAAQ,CAAA;MAAEyO,QAAQ,GAAAnB,YAAA,CAARmB,QAAQ,CAAA;MAAgB7B,IAAI,GAAAC,6BAAA,CAAAS,YAAA,EAAAR,WAAA,EAAA;AAE9C;AACA,IAAA,IAAI,CAAC,IAAI,CAAC/L,KAAK,CAACyN,IAAI,EAAE7M,OAAO,CAACgB,IAAI,CAAC,6BAA6B,CAAC,CAAA;IACjE,IAAI3C,QAAQ,CAACR,MAAM,KAAK,CAAC,EAAEmC,OAAO,CAACgB,IAAI,CAAC,qDAAqD,CAAC,CAAA;AAE9F,IAAA,IAAM0M,CAAC,GAAG/L,CAAC,CAAA4F,KAAA,CAAC,KAAA,CAAA,EAAA,CAAA,GAAG,EAAAvF,QAAA,KAAOiJ,IAAI,CAAA,CAAA,CAAAnJ,MAAA,CAAOzD,QAAQ,CAAsB,CAAA,CAAA;AAE/D;AACA,IAAA,IAAIyO,QAAQ,KAAK,IAAI,IAAI,EAAE,OAAO/I,MAAM,KAAK,WAAW,IAAIA,MAAM,CAAC9E,QAAQ,CAAC,EAAE;AAC5E;AACA,MAAA,IAAM0O,IAAI,GAAGhM,CAAC,CAAC,MAAM,EAAE;AAAEoL,QAAAA,GAAG,EAAE,UAAU;AAAEF,QAAAA,IAAI,EAAE,IAAI,CAACzN,KAAK,CAACyN,IAAI;AAAEG,QAAAA,EAAE,EAAE,UAAA;AAAY,OAAA,CAAC,CAAA;MAClF,IAAMY,MAAM,GAAGjM,CAAC,CAACsG,MAAM,EAAE,IAAI,EAAE0F,IAAI,CAAC,CAAA;MAEpC,OAAOhM,CAAC,CAACyK,QAAQ,EAAE,IAAI,EAAE,CAACwB,MAAM,EAAEF,CAAC,CAAC,CAAC,CAAA;AACvC,KAAA;AACA;SACK;AACH,MAAA,OAAOA,CAAC,CAAA;AACV,KAAA;GACD,CAAA;AAAA,EAAA,OAAArB,IAAA,CAAA;AAAA,CAAA,CApFuBjL,SAAgB;;;ACb1C,IAAMyM,SAAS,GAAa,EAAE,CAAA;AAE9B,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,CAAIrN,IAAY,EAAA;AAAA,EAAA,OAAKoN,SAAS,CAAC9L,IAAI,CAACtB,IAAI,CAAC,CAAA;AAAA,CAAA,CAAA;AACvD,IAAMsN,UAAU,GAAG,SAAbA,UAAUA,CAAItN,IAAY,EAAA;AAAA,EAAA,OAAKoN,SAAS,CAACG,MAAM,CAACH,SAAS,CAACzL,OAAO,CAAC3B,IAAI,CAAC,EAAE,CAAC,CAAC,CAAA;AAAA,CAAA,CAAA;AAEjF,IAAMwN,WAAW,GAAG,SAAdA,WAAWA,CAAIC,IAAY,EAAI;EACnCnK,MAAM,CAACyJ,OAAO,CAACW,SAAS,CAAC,EAAE,EAAE,EAAE,EAAED,IAAI,CAAC,CAAA;AACtCL,EAAAA,SAAS,CAAClP,OAAO,CAAC,UAAAyP,QAAQ,EAAA;AAAA,IAAA,OAAIA,QAAQ,CAACC,aAAa,EAAE,CAAA;GAAC,CAAA,CAAA;EACvDtK,MAAM,CAACuK,aAAa,CAAC,IAAIC,KAAK,CAAC,WAAW,CAAC,CAAC,CAAA;AAC9C,CAAC,CAAA;AAED,IAAMC,cAAc,GAAG,SAAjBA,cAAcA,CAAIN,IAAY,EAAI;EACtCnK,MAAM,CAACyJ,OAAO,CAACiB,YAAY,CAAC,EAAE,EAAE,EAAE,EAAEP,IAAI,CAAC,CAAA;AACzCL,EAAAA,SAAS,CAAClP,OAAO,CAAC,UAAAyP,QAAQ,EAAA;AAAA,IAAA,OAAIA,QAAQ,CAACC,aAAa,EAAE,CAAA;GAAC,CAAA,CAAA;EACvDtK,MAAM,CAACuK,aAAa,CAAC,IAAIC,KAAK,CAAC,cAAc,CAAC,CAAC,CAAA;AACjD,CAAC,CAAA;AAcM,IAAMG,SAAS,GAAG,SAAZA,SAASA,CAAIC,QAAgB,EAAEC,OAAyB,EAAqB;AACxF,EAAA,IAAAC,cAAA,GAAiCD,OAAO,CAAhCE,KAAK;AAALA,IAAAA,KAAK,GAAAD,cAAA,KAAG,KAAA,CAAA,GAAA,KAAK,GAAAA,cAAA;IAAEE,KAAK,GAAKH,OAAO,CAAjBG,KAAK,CAAA;AAC5B,EAAA,IAAMb,IAAI,GAAKU,OAAO,CAAhBV,IAAI,CAAA;EAEV,IAAI,CAACA,IAAI,EAAE;IACT,OAAO;AACLA,MAAAA,IAAI,EAAE,IAAI;AACVc,MAAAA,GAAG,EAAEL,QAAQ;AACbM,MAAAA,OAAO,EAAE,IAAI;AACbC,MAAAA,MAAM,EAAE,EAAE;KACX,CAAA;AACH,GAAA;AAEA,EAAA,IAAIrM,KAAK,CAAA;EACT,IAAIqM,MAAM,GAAQ,EAAE,CAAA;AAEpB;AACA,EAAA,IAAIhB,IAAI,CAACrH,QAAQ,CAAC,IAAI,CAAC,EAAE;AACvB,IAAA,IAAMsI,OAAO,GAAGjB,IAAI,CAACkB,KAAK,CAAC,GAAG,CAAC,CAAA;AAC/B,IAAA,IAAMC,WAAW,GAAGV,QAAQ,CAACS,KAAK,CAAC,GAAG,CAAC,CAAA;AACvCD,IAAAA,OAAO,CAACxQ,OAAO,CAAC,UAACwD,CAAC,EAAEvE,CAAC,EAAI;AACvB,MAAA,IAAI,IAAI,CAACuF,IAAI,CAAChB,CAAC,CAAC,EAAE;AAAA,QAAA,IAAAmN,SAAA,CAAA;AAChB,QAAA,IAAMrI,GAAG,GAAG9E,CAAC,CAAC1D,KAAK,CAAC,CAAC,CAAC,CAAA;AACtB,QAAA,IAAMkB,KAAK,GAAG0P,WAAW,CAACzR,CAAC,CAAC,CAAA;AAE5B;AACA,QAAA,IAAImR,KAAK,IAAIA,KAAK,CAAC9H,GAAG,CAAC,EAAE;UACvB,IAAMsI,UAAU,GAAGR,KAAK,CAAC9H,GAAG,CAAC,CAAC9D,IAAI,CAACxD,KAAK,CAAC,CAAA;AACzC,UAAA,IAAI,CAAC4P,UAAU,EAAE,OAAO,IAAI,CAAA;AAC9B,SAAA;AAEAL,QAAAA,MAAM,GAAAlN,QAAA,CAAQkN,EAAAA,EAAAA,MAAM,GAAAI,SAAA,GAAA,EAAA,EAAAA,SAAA,CAAGrI,GAAG,CAAA,GAAGtH,KAAK,EAAA2P,SAAA,EAAE,CAAA;AAEpCH,QAAAA,OAAO,CAACvR,CAAC,CAAC,GAAGyR,WAAW,CAACzR,CAAC,CAAC,CAAA;AAC7B,OAAA;AACF,KAAC,CAAC,CAAA;AACFsQ,IAAAA,IAAI,GAAGiB,OAAO,CAACxM,IAAI,CAAC,GAAG,CAAC,CAAA;AAC1B,GAAA;AAEA;EACA,IAAIuL,IAAI,KAAK,GAAG,EAAErL,KAAK,GAAG,CAAC8L,QAAQ,CAAC,CAAA;AAEpC;AACA,EAAA,IAAI,CAAC9L,KAAK,EAAEA,KAAK,GAAG,IAAI2M,MAAM,CAAKtB,GAAAA,GAAAA,IAAM,CAAC,CAAChF,IAAI,CAACyF,QAAQ,CAAC,CAAA;AAEzD,EAAA,IAAI,CAAC9L,KAAK,EAAE,OAAO,IAAI,CAAA;AAEvB,EAAA,IAAMmM,GAAG,GAAGnM,KAAK,CAAC,CAAC,CAAC,CAAA;AACpB,EAAA,IAAMoM,OAAO,GAAGN,QAAQ,KAAKK,GAAG,CAAA;AAEhC,EAAA,IAAIF,KAAK,IAAI,CAACG,OAAO,EAAE,OAAO,IAAI,CAAA;EAElC,OAAO;AACLf,IAAAA,IAAI,EAAJA,IAAI;AACJc,IAAAA,GAAG,EAAHA,GAAG;AACHC,IAAAA,OAAO,EAAPA,OAAO;AACPC,IAAAA,MAAM,EAANA,MAAAA;GACD,CAAA;AACH,CAAC,CAAA;AAEYO,IAAAA,MAAO,0BAAAvH,UAAA,EAAA;AAAA,EAAA,SAAAuH,MAAA,GAAA;AAAA,IAAA,IAAAxJ,KAAA,CAAA;AAAA,IAAA,KAAA,IAAAyJ,IAAA,GAAA7N,SAAA,CAAAhE,MAAA,EAAA8R,IAAA,GAAApR,IAAAA,KAAA,CAAAmR,IAAA,GAAAE,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA,EAAA,EAAA;AAAAD,MAAAA,IAAA,CAAAC,IAAA,CAAA/N,GAAAA,SAAA,CAAA+N,IAAA,CAAA,CAAA;AAAA,KAAA;IAAA3J,KAAA,GAAAiC,UAAA,CAAAxJ,IAAA,CAAA6I,KAAA,CAAAW,UAAA,EAAA,CAAA,IAAA,CAAA,CAAApG,MAAA,CAAA6N,IAAA,CAAA,CAAA,IAAA,IAAA,CAAA;IAAA1J,KAAA,CAClB4J,KAAK,GAAW,CAAC,CAAA;IAAA5J,KAAA,CACjBiI,IAAI,GAAW,EAAE,CAAA;IAAAjI,KAAA,CACjBpD,KAAK,GAAG;MAAEgN,KAAK,EAAE,CAAC,CAAC;AAAE3B,MAAAA,IAAI,EAAE,EAAA;KAAI,CAAA;AAAA,IAAA,OAAAjI,KAAA,CAAA;AAAA,GAAA;EAAAuB,cAAA,CAAAiI,MAAA,EAAAvH,UAAA,CAAA,CAAA;AAAA,EAAA,IAAAxC,MAAA,GAAA+J,MAAA,CAAAxS,SAAA,CAAA;AAAAyI,EAAAA,MAAA,CAE/BU,QAAQ,GAAR,SAAAA,WAAQ;AACNrC,IAAAA,MAAM,CAACjB,gBAAgB,CAAC,UAAU,EAAE,IAAI,CAACuL,aAAa,CAAClR,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IAClE2Q,QAAQ,CAAC,IAAI,CAAC,CAAA;GACf,CAAA;AAAApI,EAAAA,MAAA,CAEDQ,UAAU,GAAV,SAAAA,aAAU;AACRnC,IAAAA,MAAM,CAAC+L,mBAAmB,CAAC,UAAU,EAAE,IAAI,CAACzB,aAAa,CAAClR,IAAI,CAAC,IAAI,CAAC,CAAC,CAAA;IACrE4Q,UAAU,CAAC,IAAI,CAAC,CAAA;GACjB,CAAA;AAAArI,EAAAA,MAAA,CAED2I,aAAa,GAAb,SAAAA,gBAAa;IACX,IAAI,CAAC0B,SAAS,EAAE,CAAA;IAChB,IAAI,IAAI,CAAClK,YAAY,EAAE,EAAE,IAAI,CAACE,MAAM,EAAE,CAAA;GACvC,CAAA;AAAAL,EAAAA,MAAA,CAEDqK,SAAS,GAAT,SAAAA,YAAS;IACP,IAAI,CAAClN,KAAK,GAAG;MAAEgN,KAAK,EAAE,CAAC,CAAC;AAAE3B,MAAAA,IAAI,EAAE,EAAA;KAAI,CAAA;AAEpC;AACA,IAAA,IAAI,CAAC9O,KAAK,CAACf,QAAQ,GAAG,IAAI,CAACe,KAAK,CAACf,QAAQ,CAAC0C,IAAI,EAAE,CAAA;AAEhD,IAAA,KAAK,IAAInD,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG,IAAI,CAACwB,KAAK,CAACf,QAAQ,CAACR,MAAM,EAAED,CAAC,EAAE,EAAE;MACnD,IAAMgB,KAAK,GAAG,IAAI,CAACQ,KAAK,CAACf,QAAQ,CAACT,CAAC,CAAC,CAAA;AACpC,MAAA,IAAAoS,YAAA,GAA+BpR,KAAK,CAACQ,KAAK;QAAlC8O,IAAI,GAAA8B,YAAA,CAAJ9B,IAAI;QAAEY,KAAK,GAAAkB,YAAA,CAALlB,KAAK;QAAEC,KAAK,GAAAiB,YAAA,CAALjB,KAAK,CAAA;AAC1B,MAAA,IAAMlM,KAAK,GAAG6L,SAAS,CAAC7R,KAAK,EAAE,GAAGC,KAAK,CAAC2Q,QAAQ,CAACkB,QAAQ,GAAG5K,MAAM,CAAC0J,QAAQ,CAACkB,QAAQ,EAAE;AACpFT,QAAAA,IAAI,EAAJA,IAAI;AACJY,QAAAA,KAAK,EAALA,KAAK;AACLC,QAAAA,KAAK,EAALA,KAAAA;AACD,OAAA,CAAC,CAAA;AACF,MAAA,IAAIlM,KAAK,EAAE;AACT,QAAA,IAAI,CAACA,KAAK,CAACgN,KAAK,GAAGjS,CAAC,CAAA;AACpB,QAAA,IAAI,CAACiF,KAAK,CAACqL,IAAI,GAAGA,IAAI,CAAA;AACtB,QAAA,OAAA;AACF,OAAA;AACF,KAAA;GACD,CAAA;AAAAxI,EAAAA,MAAA,CAEDG,YAAY,GAAZ,SAAAA,eAAY;AACV,IAAA,OAAO,IAAI,CAACqI,IAAI,KAAK,IAAI,CAACrL,KAAK,CAACqL,IAAI,IAAI,IAAI,CAAC2B,KAAK,KAAK,IAAI,CAAChN,KAAK,CAACgN,KAAK,CAAA;GACxE,CAAA;AAAAnK,EAAAA,MAAA,CAED7F,MAAM,GAAN,SAAAA,SAAM;IACJ,IAAI,CAACkQ,SAAS,EAAE,CAAA;AAEhB,IAAA,IAAMnR,KAAK,GAAG,IAAI,CAACQ,KAAK,CAACf,QAAQ,CAAC,IAAI,CAACwE,KAAK,CAACgN,KAAK,CAAC,CAAA;IAEnD,IAAI,IAAI,CAAChN,KAAK,CAACgN,KAAK,KAAK,CAAC,CAAC,EAAE;MAC3B,IAAI,CAAC3B,IAAI,GAAG,EAAE,CAAA;MACd,IAAI,CAAC2B,KAAK,GAAG,CAAC,CAAA;AAChB,KAAA;AAEA,IAAA,IAAIjR,KAAK,EAAE;AACT,MAAA,IAAQsP,IAAI,GAAKtP,KAAK,CAACQ,KAAK,CAApB8O,IAAI,CAAA;MACZ,IAAI,CAACA,IAAI,GAAGA,IAAI,CAAA;AAChB,MAAA,IAAI,CAAC2B,KAAK,GAAG,IAAI,CAAChN,KAAK,CAACgN,KAAK,CAAA;AAC7B,MAAA,IAAM3P,EAAE,GAAGpB,OAAO,CAACF,KAAK,CAAC,CAAA;MACzB,OAAO+C,CAAC,CAAC,KAAK,EAAE,EAAE,EAAE7C,OAAO,CAACoB,EAAE,CAAC,CAAC,CAAA;AAClC,KAAC,MAAM,IAAI,IAAI,CAACd,KAAK,CAAC6Q,QAAQ,EAAE;AAC9B,MAAA,OAAOtO,CAAC,CAAC,KAAK,EAAE,EAAE,EAAE7C,OAAO,CAAC,IAAI,CAACM,KAAK,CAAC6Q,QAAQ,CAAC,CAAC,CAAA;AACnD,KAAC,MAAM;MACL,OAAOtO,CAAC,CAAC,KAAK,EAAE,EAAE,EAAE,WAAW,CAAC,CAAA;AAClC,KAAA;GACD,CAAA;AAAA,EAAA,OAAA8N,MAAA,CAAA;AAAA,CAAA,CAnEyBrO,SAA6C,CAAA,CAAA;AAsEzE;AACa8O,IAAAA,MAAO,0BAAAC,QAAA,EAAA;AAAA,EAAA,SAAAD,MAAA,GAAA;AAAA,IAAA,OAAAC,QAAA,CAAA5I,KAAA,CAAA,IAAA,EAAA1F,SAAA,CAAA,IAAA,IAAA,CAAA;AAAA,GAAA;EAAA2F,cAAA,CAAA0I,MAAA,EAAAC,QAAA,CAAA,CAAA;AAAA,EAAA,OAAAD,MAAA,CAAA;AAAA,CAAA,CAAQT,MAAM,CAAA,CAAA;AAS3B,IAAMW,KAAK,GAA+F,SAApGA,KAAKA,CAAAC,IAAA,EAIb;AAAA,EAAA,IAHHnC,IAAI,GAAAmC,IAAA,CAAJnC,IAAI;IACJa,KAAK,GAAAsB,IAAA,CAALtB,KAAK;IACL1Q,QAAQ,GAAAgS,IAAA,CAARhS,QAAQ,CAAA;AAER;AACA,EAAA,IAAMsQ,QAAQ,GAAG9R,KAAK,EAAE,GAAGC,KAAK,CAAC2Q,QAAQ,CAACkB,QAAQ,GAAG5K,MAAM,CAAC0J,QAAQ,CAACkB,QAAQ,CAAA;AAC7E,EAAA,IAAMO,MAAM,GAAGoB,mBAAmB,CAACpC,IAAI,CAAC,CAAA;AACxC;AACA7P,EAAAA,QAAQ,CAACM,OAAO,CAAC,UAACC,KAAU,EAAI;AAC9B,IAAA,IAAIA,KAAK,CAACQ,KAAK,EAAER,KAAK,CAACQ,KAAK,GAAA4C,QAAA,CAAA,EAAA,EAAQpD,KAAK,CAACQ,KAAK,EAAA;AAAEmR,MAAAA,KAAK,EAAE;AAAErC,QAAAA,IAAI,EAAJA,IAAI;AAAEa,QAAAA,KAAK,EAALA,KAAK;AAAEJ,QAAAA,QAAQ,EAARA,QAAQ;AAAEO,QAAAA,MAAM,EAANA,MAAAA;AAAQ,OAAA;KAAE,CAAA,CAAA;AAC7F,GAAC,CAAC,CAAA;AACF,EAAA,OAAO7Q,QAAQ,CAAA;AACjB,CAAC,CAAA;AAEM,IAAMmS,EAAE,GAAG,SAAAA,GAACA,GAAU,EAAE5N,OAAA,EAA4B;AAAA,EAAA,IAA5BA,OAAA,KAAA,KAAA,CAAA,EAAA;AAAAA,IAAAA,OAAA,GAAmB,KAAK,CAAA;AAAA,GAAA;EACrDA,OAAO,GAAG4L,cAAc,CAACgC,GAAE,CAAC,GAAGvC,WAAW,CAACuC,GAAE,CAAC,CAAA;AAChD,CAAC,CAAA;AAQM,IAAMnE,IAAI,GAAkB,SAAtBA,IAAIA,CAAAoE,KAAA,EAAyD;AAAA,EAAA,IAApCD,EAAE,GAAAC,KAAA,CAAFD,EAAE;IAAE5N,OAAO,GAAA6N,KAAA,CAAP7N,OAAO;IAAEvE,QAAQ,GAAAoS,KAAA,CAARpS,QAAQ;AAAK4M,IAAAA,IAAI,GAAAC,6BAAA,CAAAuF,KAAA,EAAAtF,WAAA,CAAA,CAAA;AAClE,EAAA,IAAMuF,WAAW,GAAG,SAAdA,WAAWA,CAAIC,KAAY,EAAI;IACnCA,KAAK,CAACtD,cAAc,EAAE,CAAA;IACtBzK,OAAO,GAAG4L,cAAc,CAACgC,EAAE,CAAC,GAAGvC,WAAW,CAACuC,EAAE,CAAC,CAAA;GAC/C,CAAA;AAED,EAAA,OAAO7O,CAAC,CAAC,GAAG,EAAAK,QAAA,CAAA;AAAI6K,IAAAA,IAAI,EAAE2D,EAAE;IAAEI,OAAO,EAAE,SAAAA,OAAAA,CAACxQ,CAAQ,EAAA;MAAA,OAAKsQ,WAAW,CAACtQ,CAAC,CAAC,CAAA;AAAA,KAAA;GAAK6K,EAAAA,IAAI,CAAI5M,EAAAA,QAAQ,CAAC,CAAA;AACvF,CAAC,CAAA;AAAA,IAEKwS,SAAS,gBAAA,YAAA;AAIb,EAAA,SAAAA,YAAA;AAAA,IAAA,IAAAnK,MAAA,GAAA,IAAA,CAAA;AAAA,IAAA,IAAA,CAHQoK,MAAM,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CACNC,UAAU,GAA0B,IAAIzL,GAAG,EAAE,CAAA;IAGnD,IAAIzI,KAAK,EAAE,EAAE,OAAA;AAEb,IAAA,IAAI,CAACiU,MAAM,GAAG/M,MAAM,CAAC0J,QAAQ,CAACkB,QAAQ,CAAA;AAEtC,IAAA,IAAMgC,KAAK,GAAG,SAARA,KAAKA,GAAQ;AACjB,MAAA,IAAMK,QAAQ,GAAGjN,MAAM,CAAC0J,QAAQ,CAACkB,QAAQ,CAAA;AACzCjI,MAAAA,MAAI,CAACqK,UAAU,CAACpS,OAAO,CAAC,UAAAsS,GAAG,EAAG;AAC5BA,QAAAA,GAAG,CAACD,QAAQ,EAAEtK,MAAI,CAACoK,MAAM,CAAC,CAAA;AAC5B,OAAC,CAAC,CAAA;MACFpK,MAAI,CAACoK,MAAM,GAAGE,QAAQ,CAAA;KACvB,CAAA;AAEDjN,IAAAA,MAAM,CAACjB,gBAAgB,CAAC,WAAW,EAAE6N,KAAK,CAAC,CAAA;AAC3C5M,IAAAA,MAAM,CAACjB,gBAAgB,CAAC,cAAc,EAAE6N,KAAK,CAAC,CAAA;AAChD,GAAA;AAAC,EAAA,IAAArH,OAAA,GAAAuH,SAAA,CAAA5T,SAAA,CAAA;AAAAqM,EAAAA,OAAA,CAEM4H,GAAG,GAAH,SAAAA,MAAG;AAAA,IAAA,IAAA9J,MAAA,GAAA,IAAA,CAAA;AACR,IAAA,IAAM/G,EAAE,GAAGrC,IAAI,CAACmT,MAAM,EAAE,CAACjT,QAAQ,CAAC,EAAE,CAAC,CAAC6E,SAAS,CAAC,CAAC,CAAC,CAAA;IAClD,OAAO;AACLqO,MAAAA,SAAS,EAAE,SAAAA,SAACH,CAAAA,GAAiD,EAAI;QAC/D7J,MAAI,CAAC2J,UAAU,CAAC5J,GAAG,CAAC9G,EAAE,EAAE4Q,GAAG,CAAC,CAAA;OAC7B;MACDI,MAAM,EAAE,SAAAA,MAAAA,GAAK;AACX,QAAA,IAAIjK,MAAI,CAAC2J,UAAU,CAACO,GAAG,CAACjR,EAAE,CAAC,EAAE+G,MAAI,CAAC2J,UAAU,CAAO,QAAA,CAAA,CAAC1Q,EAAE,CAAC,CAAA;AACzD,OAAA;KACD,CAAA;GACF,CAAA;AAAA,EAAA,OAAAwQ,SAAA,CAAA;AAAA,CAAA,EAAA,CAAA;AAGH,IAAIU,QAA+B,CAAA;AAC5B,IAAMC,QAAQ,GAAG,SAAXA,QAAQA,GAAQ;EAC3B,IAAI,CAACD,QAAQ,EAAEA,QAAQ,GAAG,IAAIV,SAAS,EAAE,CAAA;AACzC,EAAA,OAAOU,QAAQ,CAAA;AACjB,CAAC,CAAA;AAED;AACO,IAAMjB,mBAAmB,GAAG,SAAtBA,mBAAmBA,CAAIpC,IAAY,EAAiC;EAC/E,IAAIgB,MAAM,GAAG,EAAE,CAAA;EACf,IAAMuC,SAAS,GAAG5U,KAAK,EAAE,GAAGC,KAAK,CAAC2Q,QAAQ,CAACkB,QAAQ,CAACS,KAAK,CAAC,GAAG,CAAC,GAAGrL,MAAM,CAAC0J,QAAQ,CAACkB,QAAQ,CAACS,KAAK,CAAC,GAAG,CAAC,CAAA;AACpGlB,EAAAA,IAAI,CAACkB,KAAK,CAAC,GAAG,CAAC,CAACzQ,OAAO,CAAC,UAACwD,CAAC,EAAEvE,CAAC,EAAI;AAAA,IAAA,IAAA8T,SAAA,CAAA;AAC/B,IAAA,IAAIvP,CAAC,CAACwP,UAAU,CAAC,GAAG,CAAC,EAAEzC,MAAM,GAAAlN,QAAA,CAAQkN,EAAAA,EAAAA,MAAM,GAAAwC,SAAA,GAAA,EAAA,EAAAA,SAAA,CAAGvP,CAAC,CAAC1D,KAAK,CAAC,CAAC,CAAC,CAAGgT,GAAAA,SAAS,CAAC7T,CAAC,CAAC,EAAA8T,SAAA,EAAE,CAAA;AAC3E,GAAC,CAAC,CAAA;AACF,EAAA,OAAOxC,MAAM,CAAA;AACf,CAAC;;;;;;;;;;;;;;;;;ACvPY0C,IAAAA,QAAS,0BAAA1J,UAAA,EAAA;EAGpB,SAAA0J,QAAAA,CAAYxS,KAAY,EAAA;AAAA,IAAA,IAAA6G,KAAA,CAAA;AACtBA,IAAAA,KAAA,GAAAiC,UAAA,CAAAxJ,IAAA,CAAA,IAAA,EAAMU,KAAK,CAAC,IAAA,IAAA,CAAA;AAEZ;IAAA6G,KAAA,CALF4L,KAAK,GAAG,KAAK,CAAA;AAMX,IAAA,IAAA/G,WAAA,GAAuD7E,KAAA,CAAK7G,KAAK,CAAA;MAAnB6L,IAAI,GAAAC,6BAAA,CAAAJ,WAAA,EAAAK,WAAA,EAAA;AAElD;AACA,IAAA,IAAM2G,GAAG,GAAGvH,IAAI,CAACC,SAAS,CAACS,IAAI,EAAE,UAAU2E,IAAI,EAAEmC,GAAG,EAAA;MAClD,IAAI,OAAOA,GAAG,KAAK,UAAU,EAAE,OAAUA,EAAAA,GAAAA,GAAG,CAAE;AAC9C,MAAA,OAAOA,GAAG,CAAA;AACZ,KAAC,CAAC,CAAA;AAEF;IACA9L,KAAA,CAAK5F,EAAE,GAAG5C,SAAS,CAAC8M,IAAI,CAACC,SAAS,CAACsH,GAAG,CAAC,CAAC,CAAA;AAAA,IAAA,OAAA7L,KAAA,CAAA;AAC1C,GAAA;EAACuB,cAAA,CAAAoK,QAAA,EAAA1J,UAAA,CAAA,CAAA;AAAA,EAAA,IAAAxC,MAAA,GAAAkM,QAAA,CAAA3U,SAAA,CAAA;EAAAyI,MAAA,CAEKU,QAAQ,GAAA,SAAAA,QAAA,GAAA;IAAA,IAAA;MAAA,IAAAM,MAAA,GAE2C,IAAI,CAAA;AAD3D;AACA,MAAA,IAAAsL,YAAA,GAAuDtL,MAAA,CAAKtH,KAAK;QAAzDf,QAAQ,GAAA2T,YAAA,CAAR3T,QAAQ;QAAE4R,QAAQ,GAAA+B,YAAA,CAAR/B,QAAQ;QAAAgC,kBAAA,GAAAD,YAAA,CAAEE,KAAK;AAALA,QAAAA,KAAK,GAAAD,kBAAA,KAAG,KAAA,CAAA,GAAA,KAAK,GAAAA,kBAAA;AAAKhH,QAAAA,IAAI,GAAAC,6BAAA,CAAA8G,YAAA,EAAAlG,UAAA,CAAA,CAAA;AAElD;AACA,MAAA,IAAIoG,KAAK,EAAExL,MAAA,CAAKyL,SAAS,GAAG,EAAE,CAAA;AAE9B;MACA,IAAIzL,MAAA,CAAK0L,aAAa,CAACF,KAAK,CAAC,EAAE,OAAAlV,OAAA,CAAAI,OAAA,EAAA,CAAA;AAE/B;AACA,MAAA,IAAMiV,QAAQ,GAAG7P,MAAM,CAAC8P,MAAM,CAACrH,IAAI,CAAC,CAAC9K,GAAG,CAAC,UAAAgC,CAAC,EAAA;QAAA,OAAIA,CAAC,EAAE,CAAA;OAAC,CAAA,CAAA;AAAA,MAAA,OAAAnF,OAAA,CAAAI,OAAA,CAC3BJ,OAAO,CAACuV,GAAG,CAACF,QAAQ,CAAC,CAAAnV,CAAAA,IAAA,WAAtCsV,QAAQ,EAAA;AAEd;QACA,IAAMC,IAAI,GAAG/L,MAAA,CAAKgM,WAAW,CAACzH,IAAI,EAAEuH,QAAQ,EAAEN,KAAK,CAAC,CAAA;AAEpD;AACAxL,QAAAA,MAAA,CAAKiM,iBAAiB,CAACF,IAAI,CAAC,CAAA;AAE5B;QACA/L,MAAA,CAAKmL,KAAK,GAAG,IAAI,CAAA;QACjBnL,MAAA,CAAKX,MAAM,EAAE,CAAA;AAAA,OAAA,CAAA,CAAA;AACf,KAAC,QAAA3F,CAAA,EAAA;AAAA,MAAA,OAAApD,OAAA,CAAA4V,MAAA,CAAAxS,CAAA,CAAA,CAAA;AAAA,KAAA;AAAA,GAAA,CAAA;AAAAsF,EAAAA,MAAA,CAEDmN,GAAG,GAAH,SAAAA,MAAG;AACD;AACA,IAAA,IAAAlH,YAAA,GAAuD,IAAI,CAACvM,KAAK,CAAA;MAAnB6L,IAAI,GAAAC,6BAAA,CAAAS,YAAA,EAAAQ,UAAA,EAAA;AAElD;AACA,IAAA,IAAM2G,SAAS,GAAGtQ,MAAM,CAAC8P,MAAM,CAACrH,IAAI,CAAC,CAAC9K,GAAG,CAAC,UAAAgC,CAAC,EAAA;MAAA,OAAIA,CAAC,EAAE,CAAA;KAAC,CAAA,CAAA;AAEnD;IACA,IAAMsQ,IAAI,GAAG,IAAI,CAACC,WAAW,CAACzH,IAAI,EAAE6H,SAAS,EAAE,KAAK,CAAC,CAAA;AAErD;AACA,IAAA,IAAI,CAACH,iBAAiB,CAACF,IAAI,CAAC,CAAA;GAC7B,CAAA;AAAA/M,EAAAA,MAAA,CAED0M,aAAa,GAAb,SAAAA,aAAAA,CAAcF,KAAc,EAAA;AAC1B,IAAA,IAAMa,cAAc,GAAG,IAAI,CAACnN,KAAK,IAAIsM,KAAK,IAAI1P,MAAM,CAACC,IAAI,CAAC,IAAI,CAACmD,KAAK,CAAC,CAAC/H,MAAM,GAAG,CAAC,CAAA;AAEhF,IAAA,IAAIkV,cAAc,EAAE;AAClB,MAAA,IAAI,CAACJ,iBAAiB,CAAC,IAAI,CAAC/M,KAAK,CAAC,CAAA;MAClC,IAAI,CAACiM,KAAK,GAAG,IAAI,CAAA;AACnB,KAAA;AAEA,IAAA,OAAOkB,cAAc,CAAA;GACtB,CAAA;EAAArN,MAAA,CAEDgN,WAAW,GAAX,SAAAA,WAAAA,CAAYzH,IAAS,EAAEgG,GAAe,EAAEiB,KAAc,EAAA;AAAA,IAAA,IAAA9K,MAAA,GAAA,IAAA,CAAA;AACpD,IAAA,IAAMqL,IAAI,GAAGjQ,MAAM,CAACC,IAAI,CAACwI,IAAI,CAAC,CAAC+H,MAAM,CAAC,UAACC,GAAG,EAAErJ,IAAI,EAAEiG,KAAK,EAAI;MAAA,IAAAP,SAAA,EAAAoC,SAAA,CAAA;MACzD,IAAIQ,KAAK,EAAE9K,MAAI,CAACxB,KAAK,GAAA5D,QAAA,CAAA,EAAA,EAAQoF,MAAI,CAACxB,KAAK,GAAA0J,SAAA,GAAAA,EAAAA,EAAAA,SAAA,CAAG1F,IAAI,CAAGqH,GAAAA,GAAG,CAACpB,KAAK,CAAC,EAAAP,SAAA,EAAE,CAAA;AAC7D,MAAA,OAAAtN,QAAA,CAAA,EAAA,EACKiR,GAAG,GAAAvB,SAAA,GAAAA,EAAAA,EAAAA,SAAA,CACL9H,IAAI,IAAGqH,GAAG,CAACpB,KAAK,CAAC,EAAA6B,SAAA,EAAA,CAAA;KAErB,EAAE,EAAE,CAAC,CAAA;AACN,IAAA,OAAOe,IAAI,CAAA;GACZ,CAAA;AAAA/M,EAAAA,MAAA,CAEDiN,iBAAiB,GAAjB,SAAAA,iBAAAA,CAAkBF,IAAS,EAAA;AACzB;IACA,IAAI,CAACrT,KAAK,CAACf,QAAQ,CAACM,OAAO,CAAC,UAACC,KAAU,EAAI;AACzC,MAAA,IAAIA,KAAK,CAACQ,KAAK,EAAER,KAAK,CAACQ,KAAK,GAAA4C,QAAA,KAAQpD,KAAK,CAACQ,KAAK,EAAKqT,IAAI,CAAE,CAAA;AAC5D,KAAC,CAAC,CAAA;GACH,CAAA;AAAA/M,EAAAA,MAAA,CAED7F,MAAM,GAAN,SAAAA,SAAM;AACJ,IAAA,IAAI,CAAChD,KAAK,EAAE,EAAE;AACZ,MAAA,IAAAqW,kBAAA,GAA0B,IAAI,CAAC9T,KAAK,CAA5B8S,KAAK;AAALA,QAAAA,KAAK,GAAAgB,kBAAA,KAAG,KAAA,CAAA,GAAA,KAAK,GAAAA,kBAAA,CAAA;AACrB,MAAA,IAAI,CAACd,aAAa,CAACF,KAAK,CAAC,CAAA;AACzB,MAAA,OAAO,CAAC,IAAI,CAACL,KAAK,GAAG,IAAI,CAACzS,KAAK,CAAC6Q,QAAQ,GAAG,IAAI,CAAC7Q,KAAK,CAACf,QAAQ,CAAA;AAChE,KAAC,MAAM;MACL,IAAI,CAACwU,GAAG,EAAE,CAAA;AACV,MAAA,OAAO,IAAI,CAACzT,KAAK,CAACf,QAAQ,CAAA;AAC5B,KAAA;GACD,CAAA;AAAA,EAAA,OAAAuT,QAAA,CAAA;AAAA,CAAA,CAhG2BxQ,SAAgB;;ACNjC+R,IAAAA,OAAQ,0BAAAjL,UAAA,EAAA;AAAA,EAAA,SAAAiL,OAAA,GAAA;AAAA,IAAA,IAAAlN,KAAA,CAAA;AAAA,IAAA,KAAA,IAAAyJ,IAAA,GAAA7N,SAAA,CAAAhE,MAAA,EAAA8R,IAAA,GAAApR,IAAAA,KAAA,CAAAmR,IAAA,GAAAE,IAAA,GAAA,CAAA,EAAAA,IAAA,GAAAF,IAAA,EAAAE,IAAA,EAAA,EAAA;AAAAD,MAAAA,IAAA,CAAAC,IAAA,CAAA/N,GAAAA,SAAA,CAAA+N,IAAA,CAAA,CAAA;AAAA,KAAA;IAAA3J,KAAA,GAAAiC,UAAA,CAAAxJ,IAAA,CAAA6I,KAAA,CAAAW,UAAA,EAAA,CAAA,IAAA,CAAA,CAAApG,MAAA,CAAA6N,IAAA,CAAA,CAAA,IAAA,IAAA,CAAA;IAAA1J,KAAA,CACnBmN,SAAS,GAAG,KAAK,CAAA;AAAA,IAAA,OAAAnN,KAAA,CAAA;AAAA,GAAA;EAAAuB,cAAA,CAAA2L,OAAA,EAAAjL,UAAA,CAAA,CAAA;AAAA,EAAA,IAAAxC,MAAA,GAAAyN,OAAA,CAAAlW,SAAA,CAAA;AAAAyI,EAAAA,MAAA,CAEjBU,QAAQ,GAAR,SAAAA,WAAQ;AAAA,IAAA,IAAAM,MAAA,GAAA,IAAA,CAAA;IACN,IAAMpC,QAAQ,GAAG,IAAI8G,oBAAoB,CACvC,UAACC,OAAO,EAAE/G,QAAQ,EAAI;AACpB+G,MAAAA,OAAO,CAAC1M,OAAO,CAAC,UAAA2M,KAAK,EAAG;QACtB,IAAIA,KAAK,CAACC,cAAc,EAAE;UACxBjH,QAAQ,CAACM,UAAU,EAAE,CAAA;UACrB8B,MAAI,CAAC0M,SAAS,GAAG,IAAI,CAAA;UACrB1M,MAAI,CAACX,MAAM,EAAE,CAAA;AACf,SAAA;AACF,OAAC,CAAC,CAAA;AACJ,KAAC,EACD;AAAE2F,MAAAA,SAAS,EAAE,CAAC,CAAC,EAAE,CAAC,CAAA;AAAG,KAAA,CACtB,CAAA;IACDpH,QAAQ,CAACQ,OAAO,CAAC,IAAI,CAACxD,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;GACnC,CAAA;AAAAoE,EAAAA,MAAA,CAED7F,MAAM,GAAN,SAAAA,WAAM;AACJ,IAAA,IAAI,CAAC,IAAI,CAACuT,SAAS,EAAE;MACnB,OAAOzR,CAAC,CAAC,KAAK,EAAE;AAAE,QAAA,cAAc,EAAE,KAAK;AAAE0R,QAAAA,UAAU,EAAE,QAAA;AAAQ,OAAE,CAAC,CAAA;AAClE,KAAC,MAAM;AACL,MAAA,IAAI,IAAI,CAACjU,KAAK,CAACkU,SAAS,EAAE,IAAI,CAAClU,KAAK,CAACkU,SAAS,EAAE,CAAA;AAChD,MAAA,OAAOzT,MAAM,CAAC,IAAI,CAACT,KAAK,CAACU,SAAS,IAAI,IAAI,CAACV,KAAK,CAACf,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAA;AAC/D,KAAA;GACD,CAAA;AAAA,EAAA,OAAA8U,OAAA,CAAA;AAAA,CAAA,CA1B0B/R,SAAS;;ACDtC,IAAamS,cAAc,gBAAA,YAAA;EAMzB,SAAAA,cAAAA,CAAY9R,GAAW,EAAA;AAAA,IAAA,IAAA,CALhBf,OAAO,GAAA,KAAA,CAAA,CAAA;IAAA,IACP8S,CAAAA,aAAa,GAAY,KAAK,CAAA;IAAA,IAC9BxU,CAAAA,QAAQ,GAA4D,IAAI,CAAA;AAAA,IAAA,IAAA,CACvEqD,IAAI,GAAA,KAAA,CAAA,CAAA;IAGV,IAAI,CAAC3B,OAAO,GAAGe,GAAG,CAAA;AAElB,IAAA,IAAMgS,WAAW,GAAG,CAClB,MAAM,EACN,MAAM,EACN,IAAI,EACJ,KAAK,EACL,OAAO,EACP,IAAI,EACJ,KAAK,EACL,OAAO,EACP,MAAM,EACN,MAAM,EACN,OAAO,EACP,QAAQ,EACR,OAAO,EACP,KAAK,CACN,CAAA;IAED,IAAI,CAACzU,QAAQ,GAAG,CAAC,CAAA;IAEjB,IAAIyU,WAAW,CAACrR,OAAO,CAACX,GAAG,CAAC,IAAI,CAAC,EAAE;AACjC,MAAA,IAAI,CAACY,IAAI,GAAOZ,GAAAA,GAAAA,GAAG,GAAK,KAAA,CAAA;MACxB,IAAI,CAAC+R,aAAa,GAAG,IAAI,CAAA;AAC3B,KAAC,MAAM;AACL,MAAA,IAAI,CAACnR,IAAI,GAAA,GAAA,GAAOZ,GAAG,GAAA,KAAA,GAAMA,GAAG,GAAG,GAAA,CAAA;AACjC,KAAA;AACF,GAAA;AAAC,EAAA,IAAAiE,MAAA,GAAA6N,cAAA,CAAAtW,SAAA,CAAA;AAAAyI,EAAAA,MAAA,CAyBDkH,YAAY,GAAZ,SAAAA,YAAAA,CAAa8G,KAAU,EAAA;AACrB,IAAA,OAAO,IAAI,CAAA;GACZ,CAAA;AAAAhO,EAAAA,MAAA,CAqBDxH,QAAQ,GAAR,SAAAA,WAAQ;IACN,OAAO,IAAI,CAACmE,IAAI,CAAA;GACjB,CAAA;EAAAqD,MAAA,CAEDiO,cAAc,GAAd,SAAAA,cAAAA,CAAeC,UAAyB,EAAElU,IAAY,EAAEC,KAAa,EAAA;AACnE,IAAA,IAAI,CAACF,YAAY,CAACC,IAAI,EAAEC,KAAK,CAAC,CAAA;GAC/B,CAAA;EAAA+F,MAAA,CAEDjG,YAAY,GAAZ,SAAAA,aAAaC,IAAY,EAAEC,KAAa,EAAA;IACtC,IAAMkU,SAAS,GAAG,SAAZA,SAASA,CAAIC,MAAc,EAAEC,EAAU,EAAEC,EAAU,EAAA;AAAA,MAAA,OAAA,EAAA,GACpDD,EAAE,GAAG9O,UAAU,CAACvF,IAAI,CAAC,GAAKuF,KAAAA,GAAAA,UAAU,CAACtF,KAAK,CAAC,GAAA,KAAA,GAAKqU,EAAE,CAAA;KAAE,CAAA;IACzD,IAAMC,SAAS,GAAG,SAAZA,SAASA,CAAIH,MAAc,EAAEC,EAAU,EAAEC,EAAU,EAAA;AAAA,MAAA,OACpDD,EAAE,GAAA,GAAA,GAAI9O,UAAU,CAACvF,IAAI,CAAC,GAAKuF,KAAAA,GAAAA,UAAU,CAACtF,KAAK,CAAC,GAAA,IAAA,GAAIqU,EAAE,CAAA;KAAE,CAAA;AAEzD,IAAA,IAAI,IAAI,CAACR,aAAa,EAAE,IAAI,CAACnR,IAAI,GAAG,IAAI,CAACA,IAAI,CAACO,OAAO,CAAC,sBAAsB,EAAEiR,SAAS,CAAC,CAAA,KACnF,IAAI,CAACxR,IAAI,GAAG,IAAI,CAACA,IAAI,CAACO,OAAO,CAAC,iBAAiB,EAAEqR,SAAS,CAAC,CAAA;GACjE,CAAA;AAAAvO,EAAAA,MAAA,CAEDwO,MAAM,GAAN,SAAAA,MAAAA,CAAOtV,KAAU,EAAA;AACf,IAAA,IAAI,CAACG,WAAW,CAACH,KAAK,CAAC,CAAA;GACxB,CAAA;AAAA8G,EAAAA,MAAA,CAED3G,WAAW,GAAX,SAAAA,WAAAA,CAAYH,KAAU,EAAA;IACpB,IAAMiR,KAAK,GAAG,IAAI,CAACxN,IAAI,CAAC8R,WAAW,CAAC,IAAI,CAAC,CAAA;IACzC,IAAI,CAAC9R,IAAI,GAAG,IAAI,CAACA,IAAI,CAACU,SAAS,CAAC,CAAC,EAAE8M,KAAK,CAAC,GAAGjR,KAAK,GAAG,IAAI,CAACyD,IAAI,CAACU,SAAS,CAAC8M,KAAK,CAAC,CAAA;GAC/E,CAAA;AAAAnK,EAAAA,MAAA,CAcD5C,gBAAgB,GAAhB,SAAAA,gBACEsR,CAAAA,KAAc,EACdC,SAA2D,EAC3DC,QAAwD,IACtD,CAAA;EAAA,OAAAtN,YAAA,CAAAuM,cAAA,EAAA,CAAA;IAAAtM,GAAA,EAAA,WAAA;IAAAC,GAAA,EAzFJ,SAAAA,GAAAA,GAAa;AACX,MAAA,OAAO,IAAI,CAAChJ,QAAQ,EAAE,CAAA;AACxB,KAAA;AAAC,GAAA,EAAA;IAAA+I,GAAA,EAAA,WAAA;IAAAC,GAAA,EAED,SAAAA,GAAAA,GAAa;MACX,OAAO,IAAI,CAACsC,SAAS,CAAA;KACtB;AAAArC,IAAAA,GAAA,EAED,SAAAA,GAAc6C,CAAAA,IAAI,EAAA;MAChB,IAAI,CAACR,SAAS,GAAGQ,IAAI,CAAA;AACvB,KAAA;AAAC,GAAA,EAAA;IAAA/C,GAAA,EAAA,WAAA;IAAAC,GAAA,EAED,SAAAA,GAAAA,GAAa;AAAA,MAAA,IAAAqN,SAAA,CAAA;MACX,IAAMlM,GAAG,GAAG,wCAAwC,CAAA;AACpD,MAAA,OAAO,EAAAkM,SAAA,GAAAlM,GAAG,CAACa,IAAI,CAAC,IAAI,CAAC7G,IAAI,CAAC,KAAnBkS,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,SAAA,CAAsB,CAAC,CAAC,KAAI,EAAE,CAAA;KACtC;AAAApN,IAAAA,GAAA,EAED,SAAAA,GAAc6C,CAAAA,IAAI,EAAA;MAChB,IAAM3B,GAAG,GAAG,wCAAwC,CAAA;MACpD,IAAMmM,QAAQ,GAAG,SAAXA,QAAQA,CAAIV,MAAc,EAAEC,EAAU,EAAEU,GAAW,EAAEC,EAAU,EAAA;QAAA,OAAK,CAACX,EAAE,EAAE/J,IAAI,EAAE0K,EAAE,CAAC,CAAC/R,IAAI,CAAC,EAAE,CAAC,CAAA;AAAA,OAAA,CAAA;AACjG,MAAA,IAAI,CAACN,IAAI,GAAG,IAAI,CAACA,IAAI,CAACO,OAAO,CAACyF,GAAG,EAAEmM,QAAQ,CAAC,CAAA;AAC9C,KAAA;AAAC,GAAA,EAAA;IAAAvN,GAAA,EAAA,WAAA;IAAAC,GAAA,EAMD,SAAAA,GAAAA,GAAa;AAAA,MAAA,IAAAjB,KAAA,GAAA,IAAA,CAAA;AACX,MAAA,IAAM7H,OAAO,GAAG,IAAI,CAACiE,IAAI,CAAA;MAEzB,IAAMsS,YAAY,GAAG,8BAA8B,CAAA;MAEnD,OAAO;AACLC,QAAAA,GAAG,EAAE,SAAAA,GAAClV,CAAAA,IAAY,EAAI;AACpBuG,UAAAA,KAAI,CAACxG,YAAY,CAAC,OAAO,EAAEC,IAAI,CAAC,CAAA;SACjC;AACD2L,QAAAA,OAAO,EAAE;UACP,IAAIxN,MAAMA,GAAA;AACR,YAAA,IAAMgX,OAAO,GAAGF,YAAY,CAACzL,IAAI,CAAC9K,OAAO,CAAC,CAAA;AAC1C,YAAA,IAAIyW,OAAO,IAAIA,OAAO,CAAC,CAAC,CAAC,EAAE,OAAOA,OAAO,CAAC,CAAC,CAAC,CAACzF,KAAK,CAAC,GAAG,CAAC,CAACvR,MAAM,CAAA;AAC9D,YAAA,OAAO,CAAC,CAAA;AACV,WAAA;AACD,SAAA;OACF,CAAA;AACH,KAAA;AAAC,GAAA,EAAA;IAAAoJ,GAAA,EAAA,UAAA;IAAAC,GAAA,EA6BD,SAAAA,GAAAA,GAAY;MACV,IAAMmB,GAAG,GAAG,wCAAoC,CAAA;MAChD,IAAMyM,KAAK,GAAG,EAAE,CAAA;AAChB,MAAA,IAAIjS,KAAK,CAAA;AAET,MAAA,OAAO,CAACA,KAAK,GAAGwF,GAAG,CAACa,IAAI,CAAC,IAAI,CAACtJ,SAAS,CAAC,MAAM,IAAI,EAAE;AAClDkV,QAAAA,KAAK,CAAC/S,IAAI,CAACc,KAAK,CAAC,CAAC,CAAC,CAACD,OAAO,CAAC,SAAS,EAAE,GAAG,CAAC,CAAC,CAAA;AAC9C,OAAA;AAEA,MAAA,OAAOkS,KAAK,CAAA;AACd,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA,EAAA,CAAA;AASH,IAAaC,WAAW,gBAAA,YAAA;AAItB,EAAA,SAAAA,cAAA;AAAA,IAAA,IAAA,CAHA3M,IAAI,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CACJE,IAAI,GAAA,KAAA,CAAA,CAAA;IAGF,IAAI,CAACF,IAAI,GAAG,IAAI,CAACnG,aAAa,CAAC,MAAM,CAAC,CAAA;IACtC,IAAI,CAACqG,IAAI,GAAG,IAAI,CAACrG,aAAa,CAAC,MAAM,CAAC,CAAA;AACxC,GAAA;AAAC,EAAA,IAAAqH,OAAA,GAAAyL,WAAA,CAAA9X,SAAA,CAAA;AAAAqM,EAAAA,OAAA,CAEDrH,aAAa,GAAb,SAAAA,aAAAA,CAAcR,GAAW,EAAA;AACvB,IAAA,OAAO,IAAI8R,cAAc,CAAC9R,GAAG,CAA2B,CAAA;GACzD,CAAA;EAAA6H,OAAA,CAED5H,eAAe,GAAf,SAAAA,gBAAgBsT,IAAY,EAAEvT,GAAW,EAAA;AACvC,IAAA,OAAO,IAAI,CAACQ,aAAa,CAACR,GAAG,CAAC,CAAA;GAC/B,CAAA;AAAA6H,EAAAA,OAAA,CAEDpK,cAAc,GAAd,SAAAA,cAAAA,CAAe8K,IAAY,EAAA;IACzB,OAAO/E,UAAU,CAAC+E,IAAI,CAAC,CAAA;GACxB,CAAA;AAAAV,EAAAA,OAAA,CAED2L,aAAa,GAAb,SAAAA,aAAAA,CAAcC,MAAc,EAAA;AAC1B,IAAA,OAAOrQ,SAAS,CAAA;GACjB,CAAA;AAAA,EAAA,OAAAkQ,WAAA,CAAA;AAAA,CAAA,EAAA,CAAA;AAGH,IAAMI,WAAW,GAAG,SAAdA,WAAWA,GAAQ;EACvB,OAAO,IAAIJ,WAAW,EAAyB,CAAA;AACjD,CAAC;;ACzJD;AACA,IAAMK,SAAS,GAAG;AAChBC,EAAAA,cAAc,EAAE,SAAAA,cAACzT,CAAAA,kBAAuB,EAAI;AAC1C,IAAA,OACE,OAAOA,kBAAkB,KAAK,QAAQ,IACtCA,kBAAkB,CAACiF,QAAQ,CAAC,GAAG,CAAC,IAChC/J,KAAK,CAACwY,cAAc,CAAChE,GAAG,CAAC1P,kBAAkB,CAAC,CAAA;GAE/C;EACD2T,kBAAkB,EAAE,SAAAA,kBAAAA,CAAC3T,kBAAuB,EAAExC,KAAU,EAAEf,QAAa,EAAES,OAAY,EAAI;IACvF,IAAM0W,aAAa,GAAG1Y,KAAK,CAACwY,cAAc,CAACpO,GAAG,CAACtF,kBAAkB,CAAC,CAAA;IAClE,IAAM9B,SAAS,GAAGhB,OAAO,CAAC;AAAEgB,MAAAA,SAAS,EAAE0V,aAAa;MAAEpW,KAAK,EAAA4C,QAAA,CAAA,EAAA,EAAO5C,KAAK,EAAA;AAAEf,QAAAA,QAAQ,EAAEA,QAAAA;AAAQ,OAAA,CAAA;AAAI,KAAA,CAAC,CAAA;AAChG;AACA;AACA;AACA,IAAA,IAAMwE,KAAK,GAAG/C,SAAS,CAAC5B,QAAQ,EAAE,CAAC2E,KAAK,eAAA4S,WAAA,CAAC,wBAAmC,EAAA;MAAAhU,GAAA,EAAA,CAAA;KAAC,CAAA,CAAA,CAAA;AAC7E,IAAA,IAAIoB,KAAK,EAAE;AAIT;AAAA,MAAA,IACS2R,QAAQ,GAAjB,SAASA,QAAQA,CAAC3R,KAAa,EAAEkR,EAAU,EAAE2B,OAAe,EAAEC,OAAe,EAAA;AAC3E,QAAA,OAAO9S,KAAK,CAACD,OAAO,CAACmR,EAAE,EAAE,EAAE,CAAC,CAAA;AAC9B,OAAC,CACD;MAPA,IAAM3V,OAAO,GAAGa,QAAQ,CAACgD,aAAa,CAACY,KAAK,CAAC,CAAC,CAAC,CAAC,CAAA;AAChDzE,MAAAA,OAAO,CAACoL,SAAS,GAAG3G,KAAK,CAAC,CAAC,CAAC,CAAA;AAO5BzE,MAAAA,OAAO,CAACoL,SAAS,GAAGpL,OAAO,CAACoL,SAAS,CAAC5G,OAAO,CAAC,gCAAgC,EAAE4R,QAAQ,CAAC,CAAA;AAEzF,MAAA,OAAOpW,OAAO,CAAA;AAChB,KAAC,MAAM;AACL,MAAA,OAAO,IAAI,CAAA;AACb,KAAA;AACF,GAAA;CACD,CAAA;AAED,IAAMwX,aAAa,GAAG,SAAhBA,aAAaA,GAAQ;EACzB,IAAM/Y,KAAK,GAAG8G,SAAS,EAAE,KAAK,IAAI,GAAG,IAAI,GAAGkB,SAAS,CAAA;AACrD,EAAA,IAAM4I,QAAQ,GAAG;AAAEkB,IAAAA,QAAQ,EAAE,GAAA;GAAK,CAAA;EAClC,IAAM1P,QAAQ,GAAGpC,KAAK,GAAGsY,WAAW,EAAE,GAAGpR,MAAM,CAAC9E,QAAQ,CAAA;EACxD4W,UAAU,CAAC/Y,KAAK,GAAG;AAAED,IAAAA,KAAK,EAALA,KAAK;AAAE4Q,IAAAA,QAAQ,EAARA,QAAQ;AAAExO,IAAAA,QAAQ,EAARA,QAAQ;AAAEqW,IAAAA,cAAc,EAAE,IAAIhQ,GAAG,EAAE;AAAE8P,IAAAA,SAAS,EAATA,SAAAA;GAAW,CAAA;AACxF,CAAC,CAAA;AACDQ,aAAa,EAAE,CAAA;AAER,IAAME,OAAO,GAAG,SAAVA,OAAOA,CAAInH,QAAmB,EAAO;AAAA,EAAA,IAA1BA,QAAmB,KAAA,KAAA,CAAA,EAAA;AAAnBA,IAAAA,QAAmB,GAAA,GAAG,CAAA;AAAA,GAAA;EAC5C7R,KAAK,CAAC2Q,QAAQ,GAAG;AAAEkB,IAAAA,QAAQ,EAARA,QAAAA;GAAU,CAAA;AAC7BkH,EAAAA,UAAU,CAAC5W,QAAQ,GAAGnC,KAAK,CAACmC,QAAQ,GAAGpC,KAAK,EAAE,GAAGsY,WAAW,EAAE,GAAGpR,MAAM,CAAC9E,QAAQ,CAAA;AAClF,CAAC,CAAA;AAEM,IAAM8W,SAAS,GAAG,SAAZA,SAASA,CAAIjW,SAAc,EAAE8O,OAAA,EAA6D;AAAA,EAAA,IAA7DA,OAAA,KAAA,KAAA,CAAA,EAAA;IAAAA,OAAA,GAAuD,EAAE,CAAA;AAAA,GAAA;EACjG,IAAA0F,QAAA,GAAwC1F,OAAO;IAAvCD,QAAQ,GAAA2F,QAAA,CAAR3F,QAAQ;IAAAqH,mBAAA,GAAA1B,QAAA,CAAE2B,UAAU;AAAVA,IAAAA,UAAU,GAAAD,mBAAA,KAAG,KAAA,CAAA,GAAA,IAAI,GAAAA,mBAAA,CAAA;EAEnCF,OAAO,CAACnH,QAAQ,CAAC,CAAA;AACjB,EAAA,IAAIsH,UAAU,EAAE5Q,MAAM,CAAC6Q,KAAK,EAAE,CAAA;EAE9B,IAAMC,GAAG,GAAGtW,MAAM,CAACC,SAAS,EAAE,IAAI,EAAE,IAAI,CAAsB,CAAA;EAC9D,IAAIvB,KAAK,CAACC,OAAO,CAAC2X,GAAG,CAAC,EAAE,OAAOA,GAAG,CAACxT,IAAI,CAAC,EAAE,CAAC,CAAA,KACtC,OAAOpE,KAAK,CAAC6X,IAAI,CAACD,GAAG,CAAC,CAACxT,IAAI,CAAC,EAAE,CAAC,CAAA;AACtC;;AC3DA,IAAM0T,UAAU,GAAG,CAAC,CAAA;AACpB,IAAMC,SAAS,GAAG,CAAC,CAAA;AACnB,IAAMC,eAAe,GAAG,CAAC,CAAA;AACzB,IAAMC,YAAY,GAAG,CAAC,CAAA;AACtB,IAAMC,YAAY,GAAG,CAAC,CAAA;AACtB,IAAMC,aAAa,GAAG,CAAC,CAAA;AACvB,IAAMC,gBAAgB,GAAG,CAAC,CAAA;AAE1B,IAAMC,YAAY,GAAG,CAAC,CAAA;AACtB,IAAMC,aAAa,GAAG,CAAC,CAAA;AACvB,IAAMC,OAAO,GAAG,CAAC,CAAA;AACjB,IAAMC,YAAY,GAAG,CAAC,CAAA;AACtB,IAAMC,QAAQ,GAAGN,aAAa,CAAA;AAC9B,IAAMO,WAAW,GAAGN,gBAAgB,CAAA;AAoD7B,IAAMO,QAAQ,GAAG,SAAXA,QAAQA,CAAIvV,CAAM,EAAEwV,KAAU,EAAEC,MAAW,EAAEzH,IAAS,EAAS;AAC1E,EAAA,IAAIwG,GAAG,CAAA;AAEP;AACA;AACA;AACA;AACAgB,EAAAA,KAAK,CAAC,CAAC,CAAC,GAAG,CAAC,CAAA;AAEZ,EAAA,KAAK,IAAIvZ,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGuZ,KAAK,CAACtZ,MAAM,EAAED,CAAC,EAAE,EAAE;AACrC,IAAA,IAAMyZ,IAAI,GAAGF,KAAK,CAACvZ,CAAC,EAAE,CAAC,CAAA;AAEvB;AACA,IAAA,IAAM+B,KAAK,GAAGwX,KAAK,CAACvZ,CAAC,CAAC,IAAKuZ,KAAK,CAAC,CAAC,CAAC,IAAIE,IAAI,GAAG,CAAC,GAAG,CAAC,EAAGD,MAAM,CAACD,KAAK,CAACvZ,CAAC,EAAE,CAAC,CAAC,IAAIuZ,KAAK,CAAC,EAAEvZ,CAAC,CAAC,CAAA;IAEtF,IAAIyZ,IAAI,KAAKP,OAAO,EAAE;AACpBnH,MAAAA,IAAI,CAAC,CAAC,CAAC,GAAGhQ,KAAK,CAAA;AACjB,KAAC,MAAM,IAAI0X,IAAI,KAAKN,YAAY,EAAE;AAChCpH,MAAAA,IAAI,CAAC,CAAC,CAAC,GAAGnN,MAAM,CAAC8U,MAAM,CAAC3H,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,EAAEhQ,KAAK,CAAC,CAAA;AAC/C,KAAC,MAAM,IAAI0X,IAAI,KAAKL,QAAQ,EAAE;MAC3B,CAACrH,IAAI,CAAC,CAAC,CAAC,GAAGA,IAAI,CAAC,CAAC,CAAC,IAAI,EAAE,EAAEwH,KAAK,CAAC,EAAEvZ,CAAC,CAAC,CAAC,GAAG+B,KAAK,CAAA;AAChD,KAAC,MAAM,IAAI0X,IAAI,KAAKJ,WAAW,EAAE;MAC/BtH,IAAI,CAAC,CAAC,CAAC,CAACwH,KAAK,CAAC,EAAEvZ,CAAC,CAAC,CAAC,IAAA,EAAA,GAAO+B,KAAO,CAAA;KAClC,MAAM,IAAI0X,IAAI,EAAE;AACf;AACA;AACA;MACAlB,GAAG,GAAGxU,CAAC,CAAC4F,KAAK,CAAC5H,KAAK,EAAEuX,QAAQ,CAACvV,CAAC,EAAEhC,KAAK,EAAEyX,MAAM,EAAE,CAAC,EAAE,EAAE,IAAI,CAAC,CAAC,CAAC,CAAA;AAC5DzH,MAAAA,IAAI,CAAC5N,IAAI,CAACoU,GAAG,CAAC,CAAA;AAEd,MAAA,IAAIxW,KAAK,CAAC,CAAC,CAAC,EAAE;AACZ;AACAwX,QAAAA,KAAK,CAAC,CAAC,CAAC,IAAI,CAAC,CAAA;AACf,OAAC,MAAM;AACL;AACA;AACA;AACA;AACA;AACAA,QAAAA,KAAK,CAACvZ,CAAC,GAAG,CAAC,CAAC,GAAGgZ,YAAY,CAAA;AAC3BO,QAAAA,KAAK,CAACvZ,CAAC,CAAC,GAAGuY,GAAG,CAAA;AAChB,OAAA;AACF,KAAC,MAAM;AACL;AACAxG,MAAAA,IAAI,CAAC5N,IAAI,CAACpC,KAAK,CAAC,CAAA;AAClB,KAAA;AACF,GAAA;AAEA,EAAA,OAAOgQ,IAAI,CAAA;AACb,CAAC,CAAA;AAEM,IAAM4H,KAAK,GAAG,SAARA,KAAKA,CAAaC,OAA6B,EAAgB;EAC1DA,CAAAA,OAAO,CAAA1V,CAAAA,MAAA,CAAArD,EAAAA,CAAAA,KAAA,CAAAC,IAAA,CAAAmD,SAAA,EAAU,CAAA,CAAA,EAAA;EAIjC,IAAI4V,IAAI,GAAQnB,SAAS,CAAA;EACzB,IAAIoB,MAAM,GAAG,EAAE,CAAA;EACf,IAAIC,KAAK,GAAG,EAAE,CAAA;AACd,EAAA,IAAIC,OAAO,GAAQ,CAAC,CAAC,CAAC,CAAA;AACtB,EAAA,IAAIC,KAAS,CAAA;AACb,EAAA,IAAIC,QAAa,CAAA;AAEjB,EAAA,IAAMC,MAAM,GAAG,SAATA,MAAMA,CAAIC,KAAW,EAAI;AAC7B,IAAA,IAAIP,IAAI,KAAKnB,SAAS,KAAK0B,KAAK,KAAKN,MAAM,GAAGA,MAAM,CAAC9U,OAAO,CAAC,sBAAsB,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE;AAC1F,MAEO;QACLgV,OAAO,CAAC7V,IAAI,CAAC6U,YAAY,EAAEoB,KAAK,EAAEN,MAAM,CAAC,CAAA;AAC3C,OAAA;KACD,MAAM,IAAID,IAAI,KAAKjB,YAAY,KAAKwB,KAAK,IAAIN,MAAM,CAAC,EAAE;AACrD,MAEO;QACLE,OAAO,CAAC7V,IAAI,CAAC+U,OAAO,EAAEkB,KAAK,EAAEN,MAAM,CAAC,CAAA;AACtC,OAAA;AACAD,MAAAA,IAAI,GAAGlB,eAAe,CAAA;KACvB,MAAM,IAAIkB,IAAI,KAAKlB,eAAe,IAAImB,MAAM,KAAK,KAAK,IAAIM,KAAK,EAAE;AAChE,MAEO;QACLJ,OAAO,CAAC7V,IAAI,CAACgV,YAAY,EAAEiB,KAAK,EAAE,CAAC,CAAC,CAAA;AACtC,OAAA;KACD,MAAM,IAAIP,IAAI,KAAKlB,eAAe,IAAImB,MAAM,IAAI,CAACM,KAAK,EAAE;AACvD,MAEO;QACLJ,OAAO,CAAC7V,IAAI,CAACiV,QAAQ,EAAE,CAAC,EAAE,IAAI,EAAEU,MAAM,CAAC,CAAA;AACzC,OAAA;AACF,KAAC,MAAM,IAAID,IAAI,IAAIf,aAAa,EAAE;AAChC,MAWO;QACL,IAAIgB,MAAM,IAAK,CAACM,KAAK,IAAIP,IAAI,KAAKf,aAAc,EAAE;UAChDkB,OAAO,CAAC7V,IAAI,CAAC0V,IAAI,EAAE,CAAC,EAAEC,MAAM,EAAEI,QAAQ,CAAC,CAAA;AACvCL,UAAAA,IAAI,GAAGd,gBAAgB,CAAA;AACzB,SAAA;AACA,QAAA,IAAIqB,KAAK,EAAE;UACTJ,OAAO,CAAC7V,IAAI,CAAC0V,IAAI,EAAEO,KAAK,EAAE,CAAC,EAAEF,QAAQ,CAAC,CAAA;AACtCL,UAAAA,IAAI,GAAGd,gBAAgB,CAAA;AACzB,SAAA;AACF,OAAA;AACF,KAAA;AAEAe,IAAAA,MAAM,GAAG,EAAE,CAAA;GACZ,CAAA;AAED,EAAA,KAAK,IAAI9Z,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAG4Z,OAAO,CAAC3Z,MAAM,EAAED,CAAC,EAAE,EAAE;AACvC,IAAA,IAAIA,CAAC,EAAE;MACL,IAAI6Z,IAAI,KAAKnB,SAAS,EAAE;AACtByB,QAAAA,MAAM,EAAE,CAAA;AACV,OAAA;MACAA,MAAM,CAACna,CAAC,CAAC,CAAA;AACX,KAAA;AAEA,IAAA,KAAK,IAAIqa,CAAC,GAAG,CAAC,EAAEA,CAAC,GAAGT,OAAO,CAAC5Z,CAAC,CAAC,CAACC,MAAM,EAAEoa,CAAC,EAAE,EAAE;AAC1CJ,MAAAA,KAAI,GAAGL,OAAO,CAAC5Z,CAAC,CAAC,CAACqa,CAAC,CAAC,CAAA;MAEpB,IAAIR,IAAI,KAAKnB,SAAS,EAAE;QACtB,IAAIuB,KAAI,KAAK,GAAG,EAAE;AAChB;AACAE,UAAAA,MAAM,EAAE,CAAA;AACR,UAEO;YACLH,OAAO,GAAG,CAACA,OAAO,CAAC,CAAA;AACrB,WAAA;AACAH,UAAAA,IAAI,GAAGjB,YAAY,CAAA;AACrB,SAAC,MAAM;AACLkB,UAAAA,MAAM,IAAIG,KAAI,CAAA;AAChB,SAAA;AACF,OAAC,MAAM,IAAIJ,IAAI,KAAKhB,YAAY,EAAE;AAChC;AACA,QAAA,IAAIiB,MAAM,KAAK,IAAI,IAAIG,KAAI,KAAK,GAAG,EAAE;AACnCJ,UAAAA,IAAI,GAAGnB,SAAS,CAAA;AAChBoB,UAAAA,MAAM,GAAG,EAAE,CAAA;AACb,SAAC,MAAM;AACLA,UAAAA,MAAM,GAAGG,KAAI,GAAGH,MAAM,CAAC,CAAC,CAAC,CAAA;AAC3B,SAAA;OACD,MAAM,IAAIC,KAAK,EAAE;QAChB,IAAIE,KAAI,KAAKF,KAAK,EAAE;AAClBA,UAAAA,KAAK,GAAG,EAAE,CAAA;AACZ,SAAC,MAAM;AACLD,UAAAA,MAAM,IAAIG,KAAI,CAAA;AAChB,SAAA;OACD,MAAM,IAAIA,KAAI,KAAK,GAAG,IAAIA,KAAI,KAAK,GAAG,EAAE;AACvCF,QAAAA,KAAK,GAAGE,KAAI,CAAA;AACd,OAAC,MAAM,IAAIA,KAAI,KAAK,GAAG,EAAE;AACvBE,QAAAA,MAAM,EAAE,CAAA;AACRN,QAAAA,IAAI,GAAGnB,SAAS,CAAA;AAClB,OAAC,MAAM,IAAI,CAACmB,IAAI,EAAE,CAEjB,MAAM,IAAII,KAAI,KAAK,GAAG,EAAE;AACvBJ,QAAAA,IAAI,GAAGf,aAAa,CAAA;AACpBoB,QAAAA,QAAQ,GAAGJ,MAAM,CAAA;AACjBA,QAAAA,MAAM,GAAG,EAAE,CAAA;OACZ,MAAM,IAAIG,KAAI,KAAK,GAAG,KAAKJ,IAAI,GAAGf,aAAa,IAAIc,OAAO,CAAC5Z,CAAC,CAAC,CAACqa,CAAC,GAAG,CAAC,CAAC,KAAK,GAAG,CAAC,EAAE;AAC9EF,QAAAA,MAAM,EAAE,CAAA;QACR,IAAIN,IAAI,KAAKjB,YAAY,EAAE;AACzBoB,UAAAA,OAAO,GAAGA,OAAO,CAAC,CAAC,CAAC,CAAA;AACtB,SAAA;AACAH,QAAAA,IAAI,GAAGG,OAAO,CAAA;AACd,QAEO;AACJ,UAAA,CAACA,OAAO,GAAGA,OAAO,CAAC,CAAC,CAAC,EAAE7V,IAAI,CAAC8U,aAAa,EAAE,CAAC,EAAEY,IAAI,CAAC,CAAA;AACtD,SAAA;AACAA,QAAAA,IAAI,GAAGpB,UAAU,CAAA;AACnB,OAAC,MAAM,IAAIwB,KAAI,KAAK,GAAG,IAAIA,KAAI,KAAK,IAAI,IAAIA,KAAI,KAAK,IAAI,IAAIA,KAAI,KAAK,IAAI,EAAE;AAC1E;AACAE,QAAAA,MAAM,EAAE,CAAA;AACRN,QAAAA,IAAI,GAAGlB,eAAe,CAAA;AACxB,OAAC,MAAM;AACLmB,QAAAA,MAAM,IAAIG,KAAI,CAAA;AAChB,OAAA;AAEA,MAAA,IAAIJ,IAAI,KAAKjB,YAAY,IAAIkB,MAAM,KAAK,KAAK,EAAE;AAC7CD,QAAAA,IAAI,GAAGhB,YAAY,CAAA;AACnBmB,QAAAA,OAAO,GAAGA,OAAO,CAAC,CAAC,CAAC,CAAA;AACtB,OAAA;AACF,KAAA;AACF,GAAA;AACAG,EAAAA,MAAM,EAAE,CAAA;AAKR,EAAA,OAAOH,OAAO,CAAA;AAChB,CAAC;;ACxQD;;;;;;;;;;;AAWG;AAKH,IAAMM,MAAM,GAAG,IAAI5S,GAAG,EAAE,CAAA;AAExB,IAAM6S,OAAO,GAAG,SAAVA,OAAOA,CAAgCX,OAA6B,EAAA;AACxE,EAAA,IAAIrB,GAAG,GAAG+B,MAAM,CAAChR,GAAG,CAAC,IAAI,CAAC,CAAA;EAC1B,IAAI,CAACiP,GAAG,EAAE;AACRA,IAAAA,GAAG,GAAG,IAAI7Q,GAAG,EAAE,CAAA;AACf4S,IAAAA,MAAM,CAAC/Q,GAAG,CAAC,IAAI,EAAEgP,GAAG,CAAC,CAAA;AACvB,GAAA;AACAA,EAAAA,GAAG,GAAGe,QAAQ,CAAC,IAAI,EAAEf,GAAG,CAACjP,GAAG,CAACsQ,OAAO,CAAC,KAAKrB,GAAG,CAAChP,GAAG,CAACqQ,OAAO,EAAGrB,GAAG,GAAGoB,KAAK,CAACC,OAAO,CAAE,CAAC,EAAErB,GAAG,CAAC,EAAEtU,SAAS,EAAE,EAAE,CAAC,CAAA;EACxG,OAAOsU,GAAG,CAACtY,MAAM,GAAG,CAAC,GAAGsY,GAAG,GAAGA,GAAG,CAAC,CAAC,CAAC,CAAA;AACtC,CAAC,CAAA;AAED;AACA,UAA8BgC,OAAO;;AC3BrC,IAAMC,GAAG,GAAGC,GAAG,CAAClb,IAAI,CAACwE,CAAC;;ACCf,IAAM2W,WAAW,GAAG,SAAdA,WAAWA,CAAIxY,SAAc,EAAExC,MAA6B,EAAMyC,gBAAgB,EAAW;AAAA,EAAA,IAA9DzC,MAA6B,KAAA,KAAA,CAAA,EAAA;AAA7BA,IAAAA,MAA6B,GAAA,IAAI,CAAA;AAAA,GAAA;AAAA,EAAA,IAAEyC,gBAAgB,KAAA,KAAA,CAAA,EAAA;AAAhBA,IAAAA,gBAAgB,GAAG,IAAI,CAAA;AAAA,GAAA;EACpG,IAAMlB,CAAC,GAAG8C,CAAC,CAACwR,OAAO,EAAE,IAAI,EAAErT,SAAS,CAAC,CAAA;AACrC,EAAA,OAAOU,OAAO,CAAC3B,CAAC,EAAEvB,MAAM,EAAEyC,gBAAgB,CAAC,CAAA;AAC7C;;ACJA,IAAawY,KAAK,gBAAA,YAAA;AAOhB;;;;;AAKG;AACH,EAAA,SAAAA,MAAYC,YAAoB,EAAE9Y,IAAA,EAAmB+Y,SAAkD;AAAA,IAAA,IAArE/Y,IAAA,KAAA,KAAA,CAAA,EAAA;AAAAA,MAAAA,IAAA,GAAe,EAAE,CAAA;AAAA,KAAA;AAAA,IAAA,IAAE+Y;AAAAA,MAAAA,UAA0C,QAAQ,CAAA;AAAA,KAAA;AAAA,IAAA,IAAA,CAZ/FpT,MAAM,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CACNqT,UAAU,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CACV3H,UAAU,GAA0B,IAAIzL,GAAG,EAAE,CAAA;AAAA,IAAA,IAAA,CAC7CqT,QAAQ,GAAA,KAAA,CAAA,CAAA;AAAA,IAAA,IAAA,CACRC,GAAG,GAAA,KAAA,CAAA,CAAA;AAST,IAAA,IAAI/b,KAAK,EAAE,EAAE4b,OAAO,GAAG,QAAQ,CAAA;IAE/B,IAAI,CAACG,GAAG,GAAGlZ,IAAI,CAAA;IACf,IAAI,CAACiZ,QAAQ,GAAGF,OAAO,CAAA;AAEvB,IAAA,IAAI,CAACpT,MAAM,GAAG,IAAI,CAACqT,UAAU,GAAGF,YAAmB,CAAA;AAEnD,IAAA,IAAIC,OAAO,KAAK,QAAQ,IAAI,CAACA,OAAO,EAAE,OAAA;IAEtC,IAAMI,OAAO,GAAGJ,OAAO,KAAK,OAAO,GAAGK,YAAY,GAAGC,cAAc,CAAA;AAEnE;IACA,IAAMnP,IAAI,GAAGiP,OAAO,CAACG,OAAO,CAAC,IAAI,CAACJ,GAAG,CAAC,CAAA;AACtC,IAAA,IAAIhP,IAAI,EAAE;AACR,MAAA,IAAI,CAACvE,MAAM,GAAG,IAAI,CAACqT,UAAU,GAAGnO,IAAI,CAAC0O,KAAK,CAACrP,IAAI,CAAC,CAAA;AAClD,KAAC,MAAMiP,OAAO,CAACK,OAAO,CAAC,IAAI,CAACN,GAAG,EAAErO,IAAI,CAACC,SAAS,CAACgO,YAAY,CAAC,CAAC,CAAA;AAChE,GAAA;AAAC,EAAA,IAAA9S,MAAA,GAAA6S,KAAA,CAAAtb,SAAA,CAAA;AAAAyI,EAAAA,MAAA,CAEOyT,OAAO,GAAP,SAAAA,OAAAA,CAAQC,QAAW,EAAA;AACzB,IAAA,IAAI,IAAI,CAACT,QAAQ,KAAK,QAAQ,EAAE,OAAA;IAChC,IAAME,OAAO,GAAG,IAAI,CAACF,QAAQ,KAAK,OAAO,GAAGG,YAAY,GAAGC,cAAc,CAAA;AACzEF,IAAAA,OAAO,CAACK,OAAO,CAAC,IAAI,CAACN,GAAG,EAAErO,IAAI,CAACC,SAAS,CAAC4O,QAAQ,CAAC,CAAC,CAAA;AACrD,GAAA;AAEA,8CAAA;AAAA1T,EAAAA,MAAA,CACOwQ,KAAK,GAAL,SAAAA,QAAK;AACV;AACA,IAAA,IAAI,CAAC7Q,MAAM,GAAG,IAAI,CAACqT,UAAU,GAAG7T,SAAS,CAAA;AAEzC,IAAA,IAAI,IAAI,CAAC8T,QAAQ,KAAK,OAAO,EAAEG,YAAY,CAACO,UAAU,CAAC,IAAI,CAACT,GAAG,CAAC,CAAA,KAC3D,IAAI,IAAI,CAACD,QAAQ,KAAK,SAAS,EAAEI,cAAc,CAACM,UAAU,CAAC,IAAI,CAACT,GAAG,CAAC,CAAA;GAC1E,CAAA;AAAAlT,EAAAA,MAAA,CAEMC,QAAQ,GAAR,SAAAA,QAAAA,CAASyT,QAAW,EAAA;IACzB,IAAI,CAACxT,KAAK,GAAGwT,QAAQ,CAAA;GACtB,CAAA;AAAA1T,EAAAA,MAAA,CAiBMwL,GAAG,GAAH,SAAAA,MAAG;AAAA,IAAA,IAAAxK,MAAA,GAAA,IAAA,CAAA;AACR,IAAA,IAAMrG,EAAE,GAAGrC,IAAI,CAACmT,MAAM,EAAE,CAACjT,QAAQ,CAAC,EAAE,CAAC,CAAC6E,SAAS,CAAC,CAAC,EAAE,CAAC,CAAC,CAAA;IACrD,IAAMkD,KAAK,GAAG,IAAI,CAAA;IAClB,OAAO;MACL,IAAIL,KAAKA,GAAA;QACP,OAAOK,KAAK,CAACL,KAAK,CAAA;OACnB;AACDD,MAAAA,QAAQ,EAAE,SAAAA,QAACyT,CAAAA,QAAW,EAAI;QACxB1S,MAAI,CAACd,KAAK,GAAGwT,QAAQ,CAAA;OACtB;AACDhI,MAAAA,SAAS,EAAE,SAAAA,SAACH,CAAAA,GAAwC,EAAI;QACtDvK,MAAI,CAACqK,UAAU,CAAC5J,GAAG,CAAC9G,EAAE,EAAE4Q,GAAG,CAAC,CAAA;OAC7B;MACDI,MAAM,EAAE,SAAAA,MAAAA,GAAK;AACX,QAAA,IAAI3K,MAAI,CAACqK,UAAU,CAACO,GAAG,CAACjR,EAAE,CAAC,EAAEqG,MAAI,CAACqK,UAAU,CAAO,QAAA,CAAA,CAAC1Q,EAAE,CAAC,CAAA;AACzD,OAAA;KACD,CAAA;GACF,CAAA;EAAA,OAAA2G,YAAA,CAAAuR,KAAA,EAAA,CAAA;IAAAtR,GAAA,EAAA,OAAA;IAAAC,GAAA,EArBD,SAAAA,GAAAA,GAAgB;MACd,OAAO,IAAI,CAAC7B,MAAM,CAAA;KACnB;AAAA8B,IAAAA,GAAA,EAbD,SAAAA,GAAiBiS,CAAAA,QAAW,EAAA;AAAA,MAAA,IAAAhS,MAAA,GAAA,IAAA,CAAA;AAC1B,MAAA,IAAI,CAACsR,UAAU,GAAG,IAAI,CAACrT,MAAM,CAAA;MAC7B,IAAI,CAACA,MAAM,GAAG+T,QAAQ,CAAA;AAEtB,MAAA,IAAI,CAACD,OAAO,CAACC,QAAQ,CAAC,CAAA;AAEtB,MAAA,IAAI,CAACrI,UAAU,CAACpS,OAAO,CAAC,UAAAsS,GAAG,EAAG;QAC5BA,GAAG,CAAC7J,MAAI,CAAC/B,MAAM,EAAE+B,MAAI,CAACsR,UAAU,CAAC,CAAA;AACnC,OAAC,CAAC,CAAA;AACJ,KAAA;AAAC,GAAA,CAAA,CAAA,CAAA;AAAA,CAAA;;IC9DUY,aAAa,GAAG,SAAhBA,aAAaA,CAAIC,GAAQ,EAAI;EACxC,IAAIC,IAAI,GAAGD,GAAG,CAAA;EACd,OAAO;AACLE,IAAAA,QAAQ,EAAE,SAAAA,QAACra,CAAAA,KAAU,EAAI;MACvB,IAAIA,KAAK,CAACO,KAAK,EAAE6Z,IAAI,GAAGpa,KAAK,CAACO,KAAK,CAAA;MACnC,OAAOP,KAAK,CAACf,QAAQ,CAAA;KACtB;AACDqb,IAAAA,QAAQ,EAAE,SAAAA,QAACta,CAAAA,KAAU,EAAI;MACvB,OAAO;QAAEU,SAAS,EAAEV,KAAK,CAACf,QAAQ,CAAC,CAAC,CAAC,CAACmb,IAAI,CAAC;QAAEpa,KAAK,EAAA4C,QAAA,CAAA,EAAA,EAAO5C,KAAK,EAAA;AAAEua,UAAAA,OAAO,EAAEH,IAAAA;AAAI,SAAA,CAAA;OAAI,CAAA;KAClF;IACDtS,GAAG,EAAE,SAAAA,GAAA,GAAA;AAAA,MAAA,OAAMsS,IAAI,CAAA;AAAA,KAAA;IACfrS,GAAG,EAAE,SAAAA,GAAAA,CAACoS,GAAQ,EAAA;MAAA,OAAMC,IAAI,GAAGD,GAAG,CAAA;AAAA,KAAA;GAC/B,CAAA;AACH,EAAC;IAEYK,UAAU,GAAG,SAAbA,UAAUA,CAAIL,GAAQ,EAAI;EACrC,IAAMC,IAAI,GAAGD,GAAG,CAAA;EAChB,IAAIC,IAAI,IAAI,OAAOA,IAAI,CAACtS,GAAG,KAAK,UAAU,EAAE;AAC1C,IAAA,OAAOsS,IAAI,CAACtS,GAAG,EAAE,CAAA;AACnB,GAAA;AACF;;;ACRa2S,IAAAA,UAAU,GACrB,SADWA,UAAUA,GAAA;AAAA,EAAA,IACjBtX,MAAwB,GAAA9D,EAAAA,CAAAA,KAAA,CAAAC,IAAA,CAAAmD,SAAA,CAAA,CAAA;EAAA,OAC5B,UAACiY,gBAAqB,EAAI;AACxB,IAAA,oBAAA,UAAA5R,UAAA,EAAA;AAAA,MAAA,SAAA6R,MAAA,GAAA;AAAA,QAAA,OAAA7R,UAAA,CAAAX,KAAA,CAAA,IAAA,EAAA1F,SAAA,CAAA,IAAA,IAAA,CAAA;AAAA,OAAA;MAAA2F,cAAA,CAAAuS,MAAA,EAAA7R,UAAA,CAAA,CAAA;AAAA,MAAA,IAAAxC,MAAA,GAAAqU,MAAA,CAAA9c,SAAA,CAAA;AAAAyI,MAAAA,MAAA,CACE7F,MAAM,GAAN,SAAAA,SAAM;AACJ,QAAA,IAAAiL,WAAA,GAA8B,IAAI,CAAC1L,KAAK;UAAhCf,QAAQ,GAAAyM,WAAA,CAARzM,QAAQ;AAAK4M,UAAAA,IAAI,GAAAC,6BAAA,CAAAJ,WAAA,EAAAK,SAAA,CAAA,CAAA;QAEzB,IAAM6O,OAAO,GAAU,EAAE,CAAA;AACzBzX,QAAAA,MAAM,CAAC5D,OAAO,CAAC,UAAAoN,KAAK,EAAG;AACrB,UAAA,IAAI,OAAOA,KAAK,KAAK,QAAQ,EAAE;AAC7BiO,YAAAA,OAAO,CAACjY,IAAI,CAACJ,CAAC,CAACsG,MAAM,EAAE,IAAI,EAAEtG,CAAC,CAAC,OAAO,EAAE,IAAI,EAAEoK,KAAK,CAAC,CAAC,CAAC,CAAA;AACxD,WAAC,MAAM,IAAI,OAAOA,KAAK,KAAK,UAAU,EAAE;AACtC,YAAA,IAAMkO,MAAM,GAAGlO,KAAK,EAAE,CAAA;AACtB,YAAA,IAAI,OAAOkO,MAAM,KAAK,QAAQ,EAAE;AAC9BD,cAAAA,OAAO,CAACjY,IAAI,CAACJ,CAAC,CAACsG,MAAM,EAAE,IAAI,EAAEtG,CAAC,CAAC,OAAO,EAAE,IAAI,EAAEsY,MAAM,CAAC,CAAC,CAAC,CAAA;AACzD,aAAA;AACF,WAAC,MAAM,IAAI,OAAOlO,KAAK,KAAK,QAAQ,EAAE;YACpC,IAAMkO,OAAM,GAAGlO,KAAK,CAAC7N,QAAQ,oBAAd6N,KAAK,CAAC7N,QAAQ,EAAI,CAAA;AACjC,YAAA,IAAI,OAAO+b,OAAM,KAAK,QAAQ,EAAE;AAC9BD,cAAAA,OAAO,CAACjY,IAAI,CAACJ,CAAC,CAACsG,MAAM,EAAE,IAAI,EAAEtG,CAAC,CAAC,OAAO,EAAE,IAAI,EAAEsY,OAAM,CAAC,CAAC,CAAC,CAAA;AACzD,aAAA;AACF,WAAA;AACF,SAAC,CAAC,CAAA;AAEF,QAAA,IAAMna,SAAS,GACbzB,QAAQ,IAAIA,QAAQ,CAACR,MAAM,GAAG,CAAC,GAC3B8D,CAAC,CAACmY,gBAAgB,EAAA9X,QAAA,CAAOiJ,EAAAA,EAAAA,IAAI,CAAI5M,EAAAA,QAAQ,CAAC,GAC1CsD,CAAC,CAACmY,gBAAgB,EAAA9X,QAAA,CAAO,EAAA,EAAA,IAAI,CAAC5C,KAAK,CAAE,CAAC,CAAA;AAE5C,QAAA,OAAOuC,CAAC,CAAA4F,KAAA,CAAA,KAAA,CAAA,EAAA,CAAC6E,QAAQ,EAAE,IAAI,CAAA,CAAAtK,MAAA,CAAKkY,OAAO,EAAA,CAAEla,SAAS,CAAC,CAAA,CAAA,CAAA;OAChD,CAAA;AAAA,MAAA,OAAAia,MAAA,CAAA;AAAA,KAAA,CA3BkB3Y,SAAS,CAAA,CAAA;GA6B/B,CAAA;AAAA;;AC1CH,IAAM8Y,yBAAyB,GAAG,SAA5BA,yBAAyBA,CAC7Bpa,SAAc,EACdqa,aAAqB,EACrBC,YAAA,EACA9F,QAAgB,EACd;EACF,IAAI,CAAC,6BAA6B,CAACnR,IAAI,CAACgX,aAAa,CAAC,EACpDna,OAAO,CAACC,GAAG,CAA8Bka,6BAAAA,GAAAA,aAAa,mBAAe,CAAC,CAAA,KACnErd,KAAK,CAACwY,cAAc,CAACnO,GAAG,CAACgT,aAAa,EAAEra,SAAS,CAAC,CAAA;AACzD,CAAC,CAAA;AAEYua,IAAAA,sBAAsB,GAKvB,SALCA,sBAAsBA,CAKbva,SAAS,EAAEqa,aAAa,EAAEG,WAAW,EAAEC,MAAM,EAAA;EACjE,IAAI1d,KAAK,EAAE,EAAE;AACXqd,IAAAA,yBAAyB,CAACpa,SAAS,EAAEqa,aAA0B,CAAC,CAAA;AAChE,IAAA,OAAA;AACF,GAAA;AAEA7E,EAAAA,cAAc,CAACkF,MAAM,CACnBL,aAAa,yBAAAM,YAAA,EAAA;AAOX,IAAA,SAAAV,SAAA;AAAA,MAAA,IAAA9T,KAAA,CAAA;AACEA,MAAAA,KAAA,GAAAwU,YAAA,CAAA/b,IAAA,MAAO,IAAA,IAAA,CAAA;AAAAuH,MAAAA,KAAA,CANTnG,SAAS,GAAA,KAAA,CAAA,CAAA;AAAAmG,MAAAA,KAAA,CACTyU,KAAK,GAAA,KAAA,CAAA,CAAA;AAAAzU,MAAAA,KAAA,CACG0U,qBAAqB,GAAA,KAAA,CAAA,CAAA;AAAA1U,MAAAA,KAAA,CACrB2U,yBAAyB,GAAA,KAAA,CAAA,CAAA;AAK/B,MAAA,IAAIL,MAAM,EAAE;AACVtU,QAAAA,KAAA,CAAK4U,YAAY,CAACN,MAAM,CAAC,CAAA;AACzBtU,QAAAA,KAAA,CAAKyU,KAAK,GAAGzU,KAAA,CAAK6U,UAAwB,CAAA;AAC5C,OAAC,MAAM;QACL7U,KAAA,CAAKyU,KAAK,GAAAzU,KAAO,CAAA;AACnB,OAAA;AAEA,MAAA,IAAI1E,IAAG,CAAA;AAEP,MAAA,IAAMrB,EAAE,GAAG+F,KAAA,CAAK8U,OAAO,CACrBjc,OAAO,CAAC;AACNgB,QAAAA,SAAS,EAATA,SAAS;AACTV,QAAAA,KAAK,EAAE;UACLmC,GAAG,EAAE,SAAAA,GAAAA,CAACyZ,CAAM,EAAA;YAAA,OAAMzZ,IAAG,GAAGyZ,CAAC,CAAA;WAAC;AAC1B3c,UAAAA,QAAQ,EAAEE,KAAK,CAAC6X,IAAI,CAACnQ,KAAA,CAAK5H,QAAQ,CAAC,CAAC8B,GAAG,CAAC,UAAAtB,CAAC,EAAA;YAAA,OAAIgB,MAAM,CAAChB,CAAC,CAAC,CAAA;AAAA,WAAA,CAAA;AACvD,SAAA;AACF,OAAA,CAAC,CACH,CAAA;AAED;MACAoH,KAAA,CAAKnG,SAAS,GAAGyB,IAAG,CAAA;AACpB0E,MAAAA,KAAA,CAAK0U,qBAAqB,GAAG,CAAC7a,SAAS,CAACc,OAAO,CAAA;AAC/CqF,MAAAA,KAAA,CAAK2U,yBAAyB,GAAG,EAAE,CAAA;AACnC3U,MAAAA,KAAA,CAAKgV,QAAQ,CAAC/a,EAAE,CAAC,CAAA;AACjB;AAEA,MAAA,IAAI,CAAC+F,KAAA,CAAK0U,qBAAqB,EAAE;QAC/B1U,KAAA,CAAKnG,SAAS,CAACob,gBAAgB,GAAG,UAACxb,IAAY,EAAEC,KAAU,EAAI;AAC7D;AACA,UAAA,IAAI,CAACsG,KAAA,CAAKnG,SAAS,CAACV,KAAK,EAAE6G,KAAA,CAAKnG,SAAS,CAACV,KAAK,GAAG,EAAE,CAAA;UACpD6G,KAAA,CAAKnG,SAAS,CAACV,KAAK,CAACM,IAAI,CAAC,GAAGC,KAAK,CAAA;AAClCsG,UAAAA,KAAA,CAAKnG,SAAS,CAACJ,IAAI,CAAC,GAAGC,KAAK,CAAA;SAC7B,CAAA;AACH,OAAA;AAAC,MAAA,OAAAsG,KAAA,CAAA;AACH,KAAA;IAACuB,cAAA,CAAAuS,MAAA,EAAAU,YAAA,CAAA,CAAA;AAAA,IAAA,IAAA/U,MAAA,GAAAqU,MAAA,CAAA9c,SAAA,CAAA;AAAAyI,IAAAA,MAAA,CAMOqV,OAAO,GAAP,SAAAA,OAAAA,CAAQI,QAAa,EAAA;AAC3B;AACA;AACA,MAAA,OAAOxZ,CAAC,CAAC,IAAI,CAACmZ,UAAU,GAAG,KAAK,GAAG,UAAU,EAAE,IAAI,EAAEK,QAAQ,CAAC,CAAA;KAC/D,CAAA;AAAAzV,IAAAA,MAAA,CAEOuV,QAAQ,GAAR,SAAAA,QAAAA,CAAS/a,EAAO,EAAA;MACtB,IAAI,IAAI,CAAC4a,UAAU,EAAE;AACnB;AACA,QAAA,IAAI,CAACJ,KAAK,CAACxG,MAAM,CAAChU,EAAE,CAAC,CAAA;AACvB,OAAC,MAAM;AAAA,QAAA,IAAAkb,WAAA,CAAA;AACL,QAAA,CAAAA,WAAA,GAAA,IAAI,CAACV,KAAK,EAACxG,MAAM,CAAA3M,KAAA,CAAA6T,WAAA,EAAIlb,EAAE,CAACmb,UAAU,CAAC,CAAA;AACrC,OAAA;KACD,CAAA;AAAA3V,IAAAA,MAAA,CAEO4V,cAAc,GAAd,SAAAA,iBAAc;MACpB,IAAI,IAAI,CAACZ,KAAK,EAAE;AAAA,QAAA,IAAAa,YAAA,CAAA;AACd,QAAA,IAAMld,QAAQ,GAAGE,KAAK,CAAC6X,IAAI,EAAAmF,YAAA,GAAC,IAAI,CAACb,KAAK,KAAVa,IAAAA,GAAAA,KAAAA,CAAAA,GAAAA,YAAA,CAAYld,QAAQ,CAAC,IAAI,EAAE,CAAA;AACvD,QAAA,KAAA,IAAAqJ,SAAA,GAAAC,+BAAA,CAAiBtJ,QAAQ,CAAA,EAAAuJ,KAAA,EAAA,CAAA,CAAAA,KAAA,GAAAF,SAAA,EAAA,EAAAG,IAAA,GAAE;AAAA,UAAA,IAAhB3H,EAAE,GAAA0H,KAAA,CAAAjI,KAAA,CAAA;UACXO,EAAE,CAAC4G,MAAM,EAAE,CAAA;AACb,SAAA;AACF,OAAA;KACD,CAAA;IAAApB,MAAA,CAED8V,wBAAwB,GAAxB,SAAAA,wBAAAA,CAAyB9b,IAAY,EAAE+b,CAAM,EAAEC,QAAa,EAAA;AAAA,MAAA,IAAAhV,MAAA,GAAA,IAAA,CAAA;AAC1D,MAAA,IAAI,CAAC,IAAI,CAACiU,qBAAqB,EAAE;QAC/B,IAAI,CAAC7a,SAAS,CAACob,gBAAgB,CAACxb,IAAI,EAAEgc,QAAQ,CAAC,CAAA;AAC/C,QAAA,IAAI,CAAC5b,SAAS,CAACiG,MAAM,EAAE,CAAA;AACzB,OAAC,MAAM;QACL,IAAI,CAACuV,cAAc,EAAE,CAAA;AACrB,QAAA,IAAI,CAACV,yBAAyB,CAAClb,IAAI,CAAC,GAAGgc,QAAQ,CAAA;AAE/C,QAAA,IAAMxb,EAAE,GAAG,IAAI,CAAC6a,OAAO,CACrBjc,OAAO,CAAC;AACNgB,UAAAA,SAAS,EAATA,SAAS;AACTV,UAAAA,KAAK,EAAA4C,QAAA,CAAA;AACH3D,YAAAA,QAAQ,EAAE,EAAE;YACZkD,GAAG,EAAE,SAAAA,GAAAA,CAACyZ,CAAM,EAAA;AAAA,cAAA,OAAMtU,MAAI,CAAC5G,SAAS,GAAGkb,CAAC,CAAA;AAAA,aAAA;WACjC,EAAA,IAAI,CAACJ,yBAAyB,CAAA;AAEpC,SAAA,CAAC,CACH,CAAA;AAED,QAAA,IAAI,CAACK,QAAQ,CAAC/a,EAAE,CAAC,CAAA;AACnB,OAAA;KACD,CAAA;IAAA,OAAA8G,YAAA,CAAA+S,MAAA,EAAA,IAAA,EAAA,CAAA;MAAA9S,GAAA,EAAA,oBAAA;MAAAC,GAAA,EAjDD,SAAAA,GAAAA,GAA6B;AAC3B,QAAA,OAAOoT,WAAW,CAAA;AACpB,OAAA;AAAC,KAAA,CAAA,CAAA,CAAA;AAAA,GAAA,eAAAtS,gBAAA,CA/CWuB,WAAW,CAAA,CA+FxB,CACF,CAAA;AACH;;AC3HA;AAaA,YAAe;AAAE5H,EAAAA,CAAC,EAADA,CAAC;AAAE9B,EAAAA,MAAM,EAANA,MAAM;AAAEW,EAAAA,OAAO,EAAPA,OAAO;AAAEuV,EAAAA,SAAS,EAATA,SAAS;AAAElZ,EAAAA,KAAK,EAALA,KAAAA;AAAK,CAAE;;;;"}