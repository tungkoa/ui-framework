{"code":"import { isSSR, render } from './core.js';\nimport { documentSSR } from './regexDom.js';\nimport { _state } from './state.js';\nimport { detectSSR } from './helpers.js';\n// functions that should only be available on the server-side\nconst ssrTricks = {\n    isWebComponent: (tagNameOrComponent) => {\n        return (typeof tagNameOrComponent === 'string' &&\n            tagNameOrComponent.includes('-') &&\n            _nano.customElements.has(tagNameOrComponent));\n    },\n    renderWebComponent: (tagNameOrComponent, props, children, _render) => {\n        const customElement = _nano.customElements.get(tagNameOrComponent);\n        const component = _render({ component: customElement, props: { ...props, children: children } });\n        // get the html tag and the innerText from string\n        // match[1]: HTMLTag\n        // match[2]: innerText\n        const match = component.toString().match(/^<(?<tag>[a-z]+)>(.*)<\\/\\k<tag>>$/);\n        if (match) {\n            const element = document.createElement(match[1]);\n            element.innerText = match[2];\n            // eslint-disable-next-line no-inner-declarations\n            function replacer(match, p1, _offset, _string) {\n                return match.replace(p1, '');\n            }\n            // remove events like onClick from DOM\n            element.innerText = element.innerText.replace(/<\\w+[^>]*(\\s(on\\w*)=\"[^\"]*\")/gm, replacer);\n            return element;\n        }\n        else {\n            return null;\n        }\n    }\n};\nconst initGlobalVar = () => {\n    const isSSR = detectSSR() === true ? true : undefined;\n    const location = { pathname: '/' };\n    const document = isSSR ? documentSSR() : window.document;\n    globalThis._nano = { isSSR, location, document, customElements: new Map(), ssrTricks };\n};\ninitGlobalVar();\nexport const initSSR = (pathname = '/') => {\n    _nano.location = { pathname };\n    globalThis.document = _nano.document = isSSR() ? documentSSR() : window.document;\n};\nexport const renderSSR = (component, options = {}) => {\n    const { pathname, clearState = true } = options;\n    initSSR(pathname);\n    if (clearState)\n        _state.clear();\n    const tmp = render(component, null, true);\n    if (Array.isArray(tmp))\n        return tmp.join('');\n    else\n        return Array.from(tmp).join('');\n};\nexport const clearState = () => {\n    _state.clear();\n};\n//# sourceMappingURL=ssr.js.map","references":["/Users/tungkoa/WebstormProjects/new-ui-framework/nano/src/core.ts","/Users/tungkoa/WebstormProjects/new-ui-framework/nano/src/regexDom.ts","/Users/tungkoa/WebstormProjects/new-ui-framework/nano/src/state.ts","/Users/tungkoa/WebstormProjects/new-ui-framework/nano/src/helpers.ts"],"map":"{\"version\":3,\"file\":\"ssr.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/ssr.ts\"],\"names\":[],\"mappings\":\"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\"}","dtsmap":{"name":"./node_modules/.cache/.rts2_cache_cjs/placeholder/ssr.d.ts.map","writeByteOrderMark":false,"text":"{\"version\":3,\"file\":\"ssr.d.ts\",\"sourceRoot\":\"\",\"sources\":[\"../../../../src/ssr.ts\"],\"names\":[],\"mappings\":\"AA+CA,eAAO,MAAM,OAAO,cAAc,MAAM,SAGvC,CAAA;AAED,eAAO,MAAM,SAAS,cAAe,GAAG,YAAW;IAAE,QAAQ,CAAC,EAAE,MAAM,CAAC;IAAC,UAAU,CAAC,EAAE,OAAO,CAAA;CAAE,WAS7F,CAAA;AAED,eAAO,MAAM,UAAU,YAEtB,CAAA\"}"},"dts":{"name":"./node_modules/.cache/.rts2_cache_cjs/placeholder/ssr.d.ts","writeByteOrderMark":false,"text":"export declare const initSSR: (pathname?: string) => void;\nexport declare const renderSSR: (component: any, options?: {\n    pathname?: string;\n    clearState?: boolean;\n}) => string;\nexport declare const clearState: () => void;\n//# sourceMappingURL=ssr.d.ts.map"}}
