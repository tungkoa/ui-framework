"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.serveStatic = void 0;
const path_1 = require("path");
const serveStatic = (directory) => (async (req, res, next) => {
    if (req.route.path instanceof RegExp)
        return next('Static middleware does not accept "RegExp" paths.');
    const pathName = new URL(req.url, `http://${req.headers.host}`).pathname;
    const filePath = (0, path_1.join)(directory, pathName.substring(req.route.path.length));
    try {
        await res.send.file(filePath);
    }
    catch (err) {
        return next(err);
    }
});
exports.serveStatic = serveStatic;
//# sourceMappingURL=serveStatic.js.map