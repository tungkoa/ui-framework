!function(e,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n((e||self).talon={})}(this,function(e){var n=32,t=128,o=65536,r=1<<17,l=~(n|t),i={},a=[],u=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,c=Array.isArray;function s(e,n){for(var t in n)e[t]=n[t];return e}function _(e){var n=e.parentNode;n&&n.removeChild(e)}var d=a.slice,f={_catchError:function(e,n,t,o){for(var r,l,i;n=n._parent;)if((r=n._component)&&!r._processingException)try{if((l=r.constructor)&&null!=l.getDerivedStateFromError&&(r.setState(l.getDerivedStateFromError(e)),i=r._dirty),null!=r.componentDidCatch&&(r.componentDidCatch(e,o||{}),i=r._dirty),i)return r._pendingError=r}catch(n){e=n}throw e}},p=0;function h(e,n,t){var o,r,l,i={};for(l in n)"key"==l?o=n[l]:"ref"==l?r=n[l]:i[l]=n[l];if(arguments.length>2&&(i.children=arguments.length>3?d.call(arguments,2):t),"function"==typeof e&&null!=e.defaultProps)for(l in e.defaultProps)void 0===i[l]&&(i[l]=e.defaultProps[l]);return m(e,i,o,r,null)}function m(e,n,t,o,r){var l={type:e,props:n,key:t,ref:o,_children:null,_parent:null,_depth:0,_dom:null,_nextDom:void 0,_component:null,constructor:void 0,_original:null==r?++p:r,_index:-1,_flags:0};return null==r&&null!=f.vnode&&f.vnode(l),l}function g(e){return e.children}function y(e,n){this.props=e,this.context=n}function v(e,n){if(null==n)return e._parent?v(e._parent,e._index+1):null;for(var t;n<e._children.length;n++)if(null!=(t=e._children[n])&&null!=t._dom)return t._dom;return"function"==typeof e.type?v(e):null}function x(e){var t=e._vnode,o=t._dom,r=[],l=[];if(e._parentDom){var i=s({},t);i._original=t._original+1,f.vnode&&f.vnode(i),A(e._parentDom,i,t,e._globalContext,e._parentDom.namespaceURI,t._flags&n?[o]:null,r,null==o?v(t):o,!!(t._flags&n),l),i._original=t._original,i._parent._children[i._index]=i,H(r,i,l),i._dom!=o&&b(i)}}function b(e){if(null!=(e=e._parent)&&null!=e._component){e._dom=e._component.base=null;for(var n=0;n<e._children.length;n++){var t=e._children[n];if(null!=t&&null!=t._dom){e._dom=e._component.base=t._dom;break}}return b(e)}}y.prototype.setState=function(e,n){var t;t=null!=this._nextState&&this._nextState!==this.state?this._nextState:this._nextState=s({},this.state),"function"==typeof e&&(e=e(s({},t),this.props)),e&&s(t,e),null!=e&&this._vnode&&(n&&this._stateCallbacks.push(n),w(this))},y.prototype.forceUpdate=function(e){this._vnode&&(this._force=!0,e&&this._renderCallbacks.push(e),w(this))},y.prototype.render=g;var C,k=[],S="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout;function w(e){(!e._dirty&&(e._dirty=!0)&&k.push(e)&&!E._rerenderCount++||C!==f.debounceRendering)&&((C=f.debounceRendering)||S)(E)}var D=function(e,n){return e._vnode._depth-n._vnode._depth};function E(){var e;for(k.sort(D);e=k.shift();)if(e._dirty){var n=k.length;x(e),k.length>n&&k.sort(D)}E._rerenderCount=0}function P(e,n,t,l,u,s,_,d,f,p,h){var y,x,b,C,k,S=l&&l._children||a,w=n.length;for(t._nextDom=f,function(e,n,t){var l,i,a,u=n.length,s=t.length,_=s,d=0;for(e._children=[],l=0;l<u;l++){var f=l+d;if(null!=(i=e._children[l]=null==(i=n[l])||"boolean"==typeof i||"function"==typeof i?null:"string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?m(null,i,null,null,null):c(i)?m(g,{children:i},null,null,null):void 0===i.constructor&&i._depth>0?m(i.type,i.props,i.key,i.ref?i.ref:null,i._original):i)){i._parent=e,i._depth=e._depth+1;var p=T(i,t,f,_);i._index=p,a=null,-1!==p&&(_--,(a=t[p])&&(a._flags|=r)),null==a||null===a._original?(-1==p&&d--,"function"!=typeof i.type&&(i._flags|=o)):p!==f&&(p==f-1?d=p-f:p==f+1?d++:p>f?_>u-f?d+=p-f:d--:p<f&&d++,p!==l+d&&(i._flags|=o))}else!(a=t[f])||null!=a.key||!a._dom||a._flags&r||(a._dom==e._nextDom&&(e._nextDom=v(a)),$(a,a,!1),t[f]=null,_--)}if(_)for(l=0;l<s;l++)null==(a=t[l])||a._flags&r||(a._dom==e._nextDom&&(e._nextDom=v(a)),$(a,a))}(t,n,S),f=t._nextDom,y=0;y<w;y++)null!=(b=t._children[y])&&"boolean"!=typeof b&&"function"!=typeof b&&(x=-1===b._index?i:S[b._index]||i,b._index=y,A(e,b,x,u,s,_,d,f,p,h),C=b._dom,b.ref&&x.ref!=b.ref&&(x.ref&&I(x.ref,null,b),h.push(b.ref,b._component||C,b)),null==k&&null!=C&&(k=C),b._flags&o||x._children===b._children?(f&&"string"==typeof b.type&&!e.contains(f)&&(f=v(x)),f=U(b,f,e)):"function"==typeof b.type&&void 0!==b._nextDom?f=b._nextDom:C&&(f=C.nextSibling),b._nextDom=void 0,b._flags&=~(o|r));t._nextDom=f,t._dom=k}function U(e,n,t){if("function"==typeof e.type){for(var o=e._children,r=0;o&&r<o.length;r++)o[r]&&(o[r]._parent=e,n=U(o[r],n,t));return n}e._dom!=n&&(t.insertBefore(e._dom,n||null),n=e._dom);do{n=n&&n.nextSibling}while(null!=n&&8===n.nodeType);return n}function T(e,n,t,o){var l=e.key,i=e.type,a=t-1,u=t+1,c=n[t];if(null===c||c&&l==c.key&&i===c.type&&!(c._flags&r))return t;if(o>(null==c||c._flags&r?0:1))for(;a>=0||u<n.length;){if(a>=0){if((c=n[a])&&!(c._flags&r)&&l==c.key&&i===c.type)return a;a--}if(u<n.length){if((c=n[u])&&!(c._flags&r)&&l==c.key&&i===c.type)return u;u++}}return-1}function M(e,n,t){"-"===n[0]?e.setProperty(n,null==t?"":t):e[n]=null==t?"":"number"!=typeof t||u.test(n)?t:t+"px"}E._rerenderCount=0;var W=0;function L(e,n,t,o,r){var l;e:if("style"===n)if("string"==typeof t)e.style.cssText=t;else{if("string"==typeof o&&(e.style.cssText=o=""),o)for(n in o)t&&n in t||M(e.style,n,"");if(t)for(n in t)o&&t[n]===o[n]||M(e.style,n,t[n])}else if("o"===n[0]&&"n"===n[1])l=n!==(n=n.replace(/(PointerCapture)$|Capture$/i,"$1")),n=n.toLowerCase()in e||"onFocusOut"===n||"onFocusIn"===n?n.toLowerCase().slice(2):n.slice(2),e._listeners||(e._listeners={}),e._listeners[n+l]=t,t?o?t._attached=o._attached:(t._attached=W,e.addEventListener(n,l?N:R,l)):e.removeEventListener(n,l?N:R,l);else{if("http://www.w3.org/2000/svg"==r)n=n.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=n&&"height"!=n&&"href"!=n&&"list"!=n&&"form"!=n&&"tabIndex"!=n&&"download"!=n&&"rowSpan"!=n&&"colSpan"!=n&&"role"!=n&&"popover"!=n&&n in e)try{e[n]=null==t?"":t;break e}catch(e){}"function"==typeof t||(null==t||!1===t&&"-"!==n[4]?e.removeAttribute(n):e.setAttribute(n,"popover"==n&&1==t?"":t))}}function F(e){return function(n){if(this._listeners){var t=this._listeners[n.type+e];if(null==n._dispatched)n._dispatched=W++;else if(n._dispatched<t._attached)return;return t(f.event?f.event(n):n)}}}var R=F(!1),N=F(!0);function A(e,o,r,a,u,p,h,m,x,b){var C,k=o.type;if(void 0!==o.constructor)return null;r._flags&t&&(x=!!(r._flags&n),p=[m=o._dom=r._dom]),(C=f._diff)&&C(o);e:if("function"==typeof k)try{var S,w,D,E,U,T,M=o.props,W="prototype"in k&&k.prototype.render,F=(C=k.contextType)&&a[C._id],R=C?F?F.props.value:C._defaultValue:a;if(r._component?T=(S=o._component=r._component)._processingException=S._pendingError:(W?o._component=S=new k(M,R):(o._component=S=new y(M,R),S.constructor=k,S.render=O),F&&F.sub(S),S.props=M,S.state||(S.state={}),S.context=R,S._globalContext=a,w=S._dirty=!0,S._renderCallbacks=[],S._stateCallbacks=[]),W&&null==S._nextState&&(S._nextState=S.state),W&&null!=k.getDerivedStateFromProps&&(S._nextState==S.state&&(S._nextState=s({},S._nextState)),s(S._nextState,k.getDerivedStateFromProps(M,S._nextState))),D=S.props,E=S.state,S._vnode=o,w)W&&null==k.getDerivedStateFromProps&&null!=S.componentWillMount&&S.componentWillMount(),W&&null!=S.componentDidMount&&S._renderCallbacks.push(S.componentDidMount);else{if(W&&null==k.getDerivedStateFromProps&&M!==D&&null!=S.componentWillReceiveProps&&S.componentWillReceiveProps(M,R),!S._force&&(null!=S.shouldComponentUpdate&&!1===S.shouldComponentUpdate(M,S._nextState,R)||o._original===r._original)){o._original!==r._original&&(S.props=M,S.state=S._nextState,S._dirty=!1),o._dom=r._dom,o._children=r._children,o._children.forEach(function(e){e&&(e._parent=o)});for(var N=0;N<S._stateCallbacks.length;N++)S._renderCallbacks.push(S._stateCallbacks[N]);S._stateCallbacks=[],S._renderCallbacks.length&&h.push(S);break e}null!=S.componentWillUpdate&&S.componentWillUpdate(M,S._nextState,R),W&&null!=S.componentDidUpdate&&S._renderCallbacks.push(function(){S.componentDidUpdate(D,E,U)})}S.context=R,S.props=M,S._parentDom=e,S._force=!1;var A=f._render,H=0;if(W){S.state=S._nextState,S._dirty=!1,A&&A(o),C=S.render(S.props,S.state,S.context);for(var I=0;I<S._stateCallbacks.length;I++)S._renderCallbacks.push(S._stateCallbacks[I]);S._stateCallbacks=[]}else do{S._dirty=!1,A&&A(o),C=S.render(S.props,S.state,S.context),S.state=S._nextState}while(S._dirty&&++H<25);S.state=S._nextState,null!=S.getChildContext&&(a=s(s({},a),S.getChildContext())),W&&!w&&null!=S.getSnapshotBeforeUpdate&&(U=S.getSnapshotBeforeUpdate(D,E));var $=null!=C&&C.type===g&&null==C.key?C.props.children:C;P(e,c($)?$:[$],o,r,a,u,p,h,m,x,b),S.base=o._dom,o._flags&=l,S._renderCallbacks.length&&h.push(S),T&&(S._pendingError=S._processingException=null)}catch(e){o._original=null,x||null!=p?(o._dom=m,o._flags|=x?n|t:n,p[p.indexOf(m)]=null):(o._dom=r._dom,o._children=r._children),f._catchError(e,o,r)}else null==p&&o._original===r._original?(o._children=r._children,o._dom=r._dom):o._dom=function(e,n,t,o,r,l,a,u,s){var f,p,h,m,g,y,x,b=t.props,C=n.props,k=n.type;if("svg"===k?r="http://www.w3.org/2000/svg":"math"===k?r="http://www.w3.org/1998/Math/MathML":r||(r="http://www.w3.org/1999/xhtml"),null!=l)for(f=0;f<l.length;f++)if((g=l[f])&&"setAttribute"in g==!!k&&(k?g.localName===k:3===g.nodeType)){e=g,l[f]=null;break}if(null==e){if(null===k)return document.createTextNode(C);e=document.createElementNS(r,k,C.is&&C),l=null,u=!1}if(null===k)b===C||u&&e.data===C||(e.data=C);else{if(l=l&&d.call(e.childNodes),b=t.props||i,!u&&null!=l)for(b={},f=0;f<e.attributes.length;f++)b[(g=e.attributes[f]).name]=g.value;for(f in b)if(g=b[f],"children"==f);else if("dangerouslySetInnerHTML"==f)h=g;else if("key"!==f&&!(f in C)){if("value"==f&&"defaultValue"in C||"checked"==f&&"defaultChecked"in C)continue;L(e,f,null,g,r)}for(f in C)g=C[f],"children"==f?m=g:"dangerouslySetInnerHTML"==f?p=g:"value"==f?y=g:"checked"==f?x=g:"key"===f||u&&"function"!=typeof g||b[f]===g||L(e,f,g,b[f],r);if(p)u||h&&(p.__html===h.__html||p.__html===e.innerHTML)||(e.innerHTML=p.__html),n._children=[];else if(h&&(e.innerHTML=""),P(e,c(m)?m:[m],n,t,o,"foreignObject"===k?"http://www.w3.org/1999/xhtml":r,l,a,l?l[0]:t._children&&v(t,0),u,s),null!=l)for(f=l.length;f--;)null!=l[f]&&_(l[f]);u||(f="value",void 0!==y&&(y!==e[f]||"progress"===k&&!y||"option"===k&&y!==b[f])&&L(e,f,y,b[f],r),f="checked",void 0!==x&&x!==e[f]&&L(e,f,x,b[f],r))}return e}(r._dom,o,r,a,u,p,h,x,b);(C=f.diffed)&&C(o)}function H(e,n,t){n._nextDom=void 0;for(var o=0;o<t.length;o++)I(t[o],t[++o],t[++o]);f._commit&&f._commit(n,e),e.some(function(n){try{e=n._renderCallbacks,n._renderCallbacks=[],e.some(function(e){e.call(n)})}catch(e){f._catchError(e,n._vnode)}})}function I(e,n,t){try{"function"==typeof e?e(n):e.current=n}catch(e){f._catchError(e,t)}}function $(e,n,t){var o;if(f.unmount&&f.unmount(e),(o=e.ref)&&(o.current&&o.current!==e._dom||I(o,null,n)),null!=(o=e._component)){if(o.componentWillUnmount)try{o.componentWillUnmount()}catch(e){f._catchError(e,n)}o.base=o._parentDom=null}if(o=e._children)for(var r=0;r<o.length;r++)o[r]&&$(o[r],n,t||"function"!=typeof e.type);t||null==e._dom||_(e._dom),e._component=e._parent=e._dom=e._nextDom=void 0}function O(e,n,t){return this.constructor(e,t)}function V(e,n,t){f._root&&f._root(e,n);var o="function"==typeof t,r=o?null:t&&t._children||n._children,l=[],a=[];A(n,e=(!o&&t||n)._children=h(g,null,[e]),r||i,i,n.namespaceURI,!o&&t?[t]:r?null:n.firstChild?d.call(n.childNodes):null,l,!o&&t?t:r?r._dom:n.firstChild,o,a),H(l,e,a)}var B=0;e.Component=y,e.Fragment=g,e.cloneElement=function(e,n,t){var o,r,l,i,a=s({},e.props);for(l in e.type&&e.type.defaultProps&&(i=e.type.defaultProps),n)"key"==l?o=n[l]:"ref"==l?r=n[l]:a[l]=void 0===n[l]&&void 0!==i?i[l]:n[l];return arguments.length>2&&(a.children=arguments.length>3?d.call(arguments,2):t),m(e.type,a,o||e.key,r||e.ref,null)},e.createContext=function(e,n){var t={_id:n="__cC"+B++,_defaultValue:e,Consumer:function(e,n){return e.children(n)},Provider:function(e){if(!this.getChildContext){var t=[],o={};o[n]=this,this.getChildContext=function(){return o},this.componentWillUnmount=function(){t=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&t.some(function(e){e._force=!0,w(e)})},this.sub=function(e){t.push(e);var n=e.componentWillUnmount;e.componentWillUnmount=function(){t&&t.splice(t.indexOf(e),1),n&&n.call(e)}}}return e.children}};return t.Provider._contextRef=t.Consumer.contextType=t},e.createElement=h,e.createRef=function(){return{current:null}},e.h=h,e.hydrate=function e(n,t){V(n,t,e)},e.isValidElement=function(e){return null!=e&&null==e.constructor},e.options=f,e.render=V,e.toChildArray=function e(n,t){return t=t||[],null==n||"boolean"==typeof n||(c(n)?n.some(function(n){e(n,t)}):t.push(n)),t}});
//# sourceMappingURL=talon.umd.js.map
